<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="–ö–§–õ –õ–∏–∑–∏–Ω–≥ - –ö–∞—Ç–∞–ª–æ–≥ –∫–æ–Ω—Ñ–∏—Å–∫–æ–≤–∞–Ω–Ω–æ–π —Ç–µ—Ö–Ω–∏–∫–∏ –∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞. –°–ø–µ—Ü—Ç–µ—Ö–Ω–∏–∫–∞, –≥—Ä—É–∑–æ–≤–æ–π –∏ –ª–µ–≥–∫–æ–≤–æ–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç, –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –≤ –ª–∏–∑–∏–Ω–≥.">
    <meta name="theme-color" content="#000000">
    <title>–ö–§–õ –õ–∏–∑–∏–Ω–≥ | –ö–∞—Ç–∞–ª–æ–≥ –∫–æ–Ω—Ñ–∏—Å–∫–∞—Ç–∞</title>
    <style>
:root {
    --primary: #FFD700;
    --primary-dark: #E6C200;
    --primary-light: #FFF4CC;
    --secondary: #000000;
    --secondary-light: #1A1A1A;
    --bg: #0A0A0A;
    --card-bg: #FFFFFF;
    --card-dark: #1E1E1E;
    --text: #FFFFFF;
    --text-secondary: #CCCCCC;
    --text-dark: #333333;
    --success: #4CAF50;
    --warning: #FF9800;
    --error: #F44336;
    --border: rgba(255, 215, 0, 0.2);
    --radius-lg: 20px;
    --radius-md: 16px;
    --radius-sm: 12px;
    --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    --shadow-hover: 0 20px 40px rgba(255, 215, 0, 0.2);
    --gradient: linear-gradient(135deg, #FFD700 0%, #FFC300 100%);
    --gradient-dark: linear-gradient(135deg, #1A1A1A 0%, #000000 100%);
    --transition-fast: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-normal: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
}

body {
    font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    background: var(--bg);
    color: var(--text);
    line-height: 1.5;
    font-size: 15px;
    overflow-x: hidden;
    padding-bottom: env(safe-area-inset-bottom);
}

/* Accessibility - Focus visible */
*:focus-visible {
    outline: 3px solid var(--primary);
    outline-offset: 2px;
    border-radius: 4px;
}

/* Reduced motion for accessibility */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

/* Screen reader only utility */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
}

/* ===== HEADER ===== */
.header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 70px;
    background: var(--secondary);
    z-index: 1000;
    padding: 0 15px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid var(--border);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    gap: 15px;
}

.logo-section {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-shrink: 0;
}

.logo-container {
    background: white;
    padding: 6px;
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    box-shadow: 0 2px 8px rgba(255, 215, 0, 0.2);
}

.logo {
    height: 28px;
    width: auto;
    display: block;
}

.logo-text {
    display: flex;
    flex-direction: column;
    flex-shrink: 0;
}

.logo-title {
    font-size: 16px;
    font-weight: 700;
    color: var(--primary);
    line-height: 1.2;
}

.logo-subtitle {
    font-size: 10px;
    color: var(--text-secondary);
    opacity: 0.8;
    line-height: 1.2;
}

/* ===== SEARCH ===== */
.header-search {
    flex: 1;
    max-width: 400px;
    position: relative;
}

.search-input {
    width: 100%;
    padding: 12px 45px 12px 15px;
    background: var(--secondary-light);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    color: var(--text);
    font-size: 14px;
    transition: all var(--transition-normal);
    height: 42px;
}

.search-input::placeholder {
    color: var(--text-secondary);
    opacity: 0.6;
}

.search-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.1);
    background: rgba(255, 255, 255, 0.05);
}

.search-icon {
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--primary);
    font-size: 18px;
    pointer-events: none;
}

/* ===== MOBILE MENU BUTTON ===== */
.mobile-menu-btn {
    width: 40px;
    height: 40px;
    background: rgba(255, 215, 0, 0.1);
    border: 1px solid var(--border);
    border-radius: 50%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 4px;
    cursor: pointer;
    padding: 8px;
    transition: all var(--transition-normal);
    z-index: 1001;
    flex-shrink: 0;
}

.mobile-menu-btn span {
    display: block;
    width: 20px;
    height: 2px;
    background: var(--primary);
    border-radius: 1px;
    transition: all var(--transition-normal);
}

.mobile-menu-btn:hover {
    background: rgba(255, 215, 0, 0.2);
    transform: scale(1.05);
}

.mobile-menu-btn:active {
    transform: scale(0.95);
    background: rgba(255, 215, 0, 0.25);
}

/* ===== MOBILE MENU ===== */
.mobile-menu {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.98);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    z-index: 2000;
    flex-direction: column;
    padding: 20px;
    transform: translateX(-100%);
    transition: transform var(--transition-normal);
    overflow-y: auto;
    display: none;
}

.mobile-menu.active {
    transform: translateX(0);
    display: flex;
}

.mobile-menu-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 40px;
    padding-bottom: 20px;
    border-bottom: 1px solid var(--border);
}

.mobile-menu-close {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: rgba(255, 215, 0, 0.1);
    border: 1px solid var(--border);
    color: var(--primary);
    font-size: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all var(--transition-normal);
}

.mobile-menu-close:hover {
    background: rgba(255, 215, 0, 0.2);
    transform: rotate(90deg);
}

.mobile-menu-close:active {
    transform: scale(0.9) rotate(90deg);
}

.mobile-menu-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.mobile-menu-item {
    padding: 18px 20px;
    background: var(--secondary-light);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    color: var(--text);
    font-size: 17px;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 15px;
    cursor: pointer;
    transition: all var(--transition-normal);
    text-align: left;
    width: 100%;
}

.mobile-menu-item.active {
    background: var(--primary);
    color: var(--secondary);
    border-color: var(--primary);
    box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3);
}

.mobile-menu-item:hover:not(.active) {
    background: rgba(255, 255, 255, 0.03);
    border-color: var(--primary);
}

.mobile-menu-item:active:not(.active) {
    transform: scale(0.98);
    background: rgba(255, 255, 255, 0.05);
}

.mobile-menu-icon {
    font-size: 20px;
    width: 30px;
    text-align: center;
}

.favorites-count {
    margin-left: auto;
    background: var(--primary);
    color: var(--secondary);
    font-size: 14px;
    font-weight: 700;
    padding: 4px 10px;
    border-radius: 10px;
    min-width: 24px;
    text-align: center;
}

.mobile-menu-item.active .favorites-count {
    background: var(--secondary);
    color: var(--primary);
}

/* ===== MAIN CONTENT ===== */
.main-content {
    margin-top: 70px;
    min-height: calc(100vh - 140px);
    width: 100%;
}

/* ===== SORT SECTION ===== */
.sort-section {
    padding: 15px 20px;
    overflow-x: auto;
    display: flex;
    gap: 10px;
    background: var(--bg);
    border-bottom: 1px solid var(--border);
    scrollbar-width: none;
    white-space: nowrap;
}

.sort-section::-webkit-scrollbar {
    display: none;
}

.sort-btn {
    flex: 0 0 auto;
    padding: 12px 20px;
    background: var(--secondary-light);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    color: var(--text);
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all var(--transition-normal);
    white-space: nowrap;
    position: relative;
    min-height: 44px;
}

.sort-btn:hover:not(.active) {
    background: rgba(255, 255, 255, 0.03);
    border-color: var(--primary);
    transform: translateY(-2px);
}

.sort-btn.active {
    background: var(--primary);
    border-color: var(--primary);
    color: var(--secondary);
    box-shadow: var(--shadow-hover);
}

.sort-btn:active:not(.active) {
    transform: scale(0.98);
}

/* ===== CATEGORIES ===== */
.categories {
    padding: 15px 20px 10px;
    overflow-x: auto;
    display: flex;
    gap: 10px;
    scrollbar-width: none;
}

.categories::-webkit-scrollbar {
    display: none;
}

.category-btn {
    flex: 0 0 auto;
    padding: 12px 24px;
    background: var(--secondary-light);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    color: var(--text);
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all var(--transition-normal);
    white-space: nowrap;
}

.category-btn:hover:not(.active) {
    background: rgba(255, 255, 255, 0.03);
    border-color: var(--primary);
    transform: translateY(-2px);
}

.category-btn.active {
    background: var(--primary);
    border-color: var(--primary);
    color: var(--secondary);
    box-shadow: var(--shadow-hover);
}

.category-btn:active:not(.active) {
    transform: scale(0.98);
}

.category-count {
    font-size: 12px;
    opacity: 0.7;
}

/* ===== –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô ===== */

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–π —Ñ–æ—Ä–º—ã */
.product-image-container {
    width: 100%;
    height: 240px;
    position: relative;
    overflow: hidden;
    background: var(--secondary-light);
}

.product-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

/* Placeholder –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π */
.image-placeholder {
    width: 100%;
    height: 100%;
    min-height: 240px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: var(--secondary-light);
    position: relative;
    overflow: hidden;
    animation: fadeIn 0.3s ease-in-out;
}

/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ */
.modal-image-container {
    width: 100%;
    height: 280px;
    position: relative;
    overflow: hidden;
    background: var(--secondary-light);
    border-radius: var(--radius-md);
    margin-bottom: 25px;
}

.modal-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    border-radius: var(--radius-md);
}

/* –ö–Ω–æ–ø–∫–∞ –ø–æ–≤—Ç–æ—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏ */
.image-retry-btn {
    margin-top: 15px;
    padding: 8px 16px;
    background: var(--primary);
    color: var(--secondary);
    border: none;
    border-radius: var(--radius-sm);
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-normal);
    z-index: 2;
    position: relative;
}

.image-retry-btn:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3);
}

.image-retry-btn:active {
    transform: scale(0.95) !important;
}

/* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è placeholder */
@keyframes pulse {
    0%, 100% { 
        opacity: 0.3; 
        transform: scale(1); 
    }
    50% { 
        opacity: 0.5; 
        transform: scale(1.05); 
    }
}

@keyframes fadeIn {
    from { 
        opacity: 0; 
    }
    to { 
        opacity: 1; 
    }
}

@keyframes spin {
    to { 
        transform: rotate(360deg); 
    }
}

/* –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ */
.image-loading {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    background: var(--secondary-light);
}

.image-loading-spinner {
    width: 40px;
    height: 40px;
    border: 3px solid rgba(255, 215, 0, 0.2);
    border-top-color: var(--primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

/* ===== PRODUCTS CONTAINER ===== */
.products-container {
    width: 100%;
    max-width: 1600px;
    margin: 0 auto;
    padding: 0 20px;
}

@media (max-width: 768px) {
    .products-container {
        padding: 0 15px;
    }
}

/* ===== PRODUCTS GRID ===== */
.products-grid {
    padding: 20px 0 80px;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 15px;
    width: 100%;
}

@media (max-width: 768px) {
    .products-grid {
        grid-template-columns: repeat(2, 1fr);
        padding: 0 0 80px;
        gap: 12px;
    }
}

@media (max-width: 480px) {
    .products-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
    }
}

/* ===== PRODUCT CARD ===== */
.product-card {
    background: var(--secondary-light);
    border-radius: var(--radius-lg);
    overflow: hidden;
    border: 1px solid var(--border);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    cursor: pointer;
}

.product-card::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: var(--radius-lg);
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, transparent 100%);
    opacity: 0;
    transition: opacity var(--transition-normal);
    pointer-events: none;
}

.product-card:hover {
    transform: translateY(-4px) scale(1.02);
    box-shadow: var(--shadow-hover);
    border-color: var(--primary);
}

.product-card:hover::before {
    opacity: 1;
}

.product-card:active {
    transform: translateY(-2px) scale(1.01);
}

/* Skeleton loading state */
.product-card.loading {
    pointer-events: none;
}

.product-card.loading .product-image,
.product-card.loading .product-title,
.product-card.loading .product-details {
    background: linear-gradient(
        90deg,
        var(--secondary-light) 0%,
        rgba(255, 255, 255, 0.05) 50%,
        var(--secondary-light) 100%
    );
    background-size: 200% 100%;
    animation: skeleton-loading 1.5s ease-in-out infinite;
    color: transparent;
    user-select: none;
}

@keyframes skeleton-loading {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

.favorite-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    z-index: 2;
    width: 36px;
    height: 36px;
    background: rgba(0, 0, 0, 0.6);
    border: 1px solid var(--border);
    border-radius: 50%;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    cursor: pointer;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    transition: all var(--transition-normal);
}

.favorite-btn:hover {
    transform: scale(1.1);
    background: rgba(0, 0, 0, 0.8);
}

.favorite-btn.active {
    background: var(--primary);
    color: var(--secondary);
    border-color: var(--primary);
}

.favorite-btn:active {
    transform: scale(0.9);
}

.product-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform var(--transition-normal);
}

.product-card:hover .product-image {
    transform: scale(1.05);
}

.product-content {
    padding: 15px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.product-title {
    font-size: 16px;
    font-weight: 600;
    line-height: 1.3;
    margin-bottom: 0;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    min-height: 40px;
}

.product-price-section {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-bottom: 0;
}

.product-price {
    font-size: 20px;
    font-weight: 800;
    color: var(--primary);
    line-height: 1;
    font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
    letter-spacing: 0.5px;
}

.product-price-note {
    font-size: 11px;
    color: var(--text-secondary);
    line-height: 1.2;
    margin-bottom: 0;
}

/* –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ */
.product-actions {
    display: none;
}

/* ===== BUTTONS ===== */
.btn {
    flex: 1;
    padding: 14px;
    border: none;
    border-radius: var(--radius-md);
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    text-align: center;
    transition: all var(--transition-normal);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    min-height: 48px;
}

.btn:hover {
    transform: translateY(-2px);
}

.btn:active {
    transform: scale(0.98);
}

.btn-primary {
    background: var(--primary);
    color: var(--secondary);
    box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3);
}

.btn-primary:hover {
    background: var(--primary-dark);
    box-shadow: 0 6px 16px rgba(255, 215, 0, 0.4);
}

.btn-primary:active {
    background: var(--primary-dark);
}

.btn-secondary {
    background: transparent;
    border: 1px solid var(--border);
    color: var(--text);
}

.btn-secondary:hover {
    background: rgba(255, 255, 255, 0.05);
    border-color: var(--primary);
}

.btn-secondary:active {
    background: rgba(255, 255, 255, 0.08);
}

/* ===== FOOTER NAVIGATION ===== */
.footer-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: 70px;
    background: rgba(10, 10, 10, 0.95);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-top: 1px solid var(--border);
    display: flex;
    justify-content: space-around;
    align-items: center;
    padding: 0 10px;
    z-index: 1000;
    padding-bottom: env(safe-area-inset-bottom);
}

.nav-item {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: 12px;
    cursor: pointer;
    transition: all var(--transition-normal);
    position: relative;
    min-width: 48px;
}

.nav-item:hover:not(.active) {
    color: var(--primary);
}

.nav-item:active {
    transform: scale(0.95);
}

.nav-item.active {
    color: var(--primary);
}

/* –û—Å–æ–±—ã–π —Å—Ç–∏–ª—å –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–†–∞–∑–º–µ—Å—Ç–∏—Ç—å" */
.nav-item-add {
    background: linear-gradient(135deg, var(--primary) 0%, #FFC300 100%) !important;
    color: var(--secondary) !important;
    border-radius: var(--radius-md);
    margin: 0 4px;
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
    transform: scale(1.05);
}

.nav-item-add:hover {
    transform: scale(1.08) translateY(-2px) !important;
    box-shadow: 0 6px 20px rgba(255, 215, 0, 0.6);
}

.nav-item-add:active {
    transform: scale(1.03) translateY(0) !important;
}

.nav-item-add .nav-icon {
    font-size: 26px;
    animation: pulseAdd 2s ease-in-out infinite;
}

.nav-item-add .nav-text {
    color: var(--secondary) !important;
    font-weight: 700;
}

@keyframes pulseAdd {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

.nav-icon {
    font-size: 22px;
    margin-bottom: 4px;
    transition: all var(--transition-normal);
}

.nav-item.active .nav-icon {
    transform: translateY(-2px) scale(1.1);
}

.nav-badge {
    position: absolute;
    top: 8px;
    right: calc(50% - 20px);
    background: var(--primary);
    color: var(--secondary);
    font-size: 10px;
    font-weight: 700;
    padding: 2px 6px;
    border-radius: 10px;
    min-width: 18px;
    text-align: center;
}

/* ===== MODALS ===== */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.9);
    z-index: 2000;
    padding: 20px;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    animation: fadeIn var(--transition-normal) ease;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.modal-content {
    background: var(--secondary-light);
    border-radius: var(--radius-lg);
    overflow: hidden;
    max-width: 500px;
    margin: 20px auto;
    animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    border: 1px solid var(--border);
    box-shadow: var(--shadow);
}

@keyframes slideUp {
    from {
        transform: translateY(50px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.modal-header {
    padding: 25px 25px 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.modal-title {
    font-size: 22px;
    font-weight: 700;
    color: var(--primary);
}

.modal-close {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: rgba(255, 215, 0, 0.1);
    border: 1px solid var(--border);
    color: var(--primary);
    font-size: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all var(--transition-normal);
}

.modal-close:hover {
    background: rgba(255, 215, 0, 0.2);
    transform: rotate(90deg);
}

.modal-close:active {
    transform: scale(0.9) rotate(90deg);
}

.modal-body {
    padding: 25px;
}

.modal-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: var(--radius-md);
    border: 1px solid var(--border);
}

.modal-section {
    margin-bottom: 25px;
    animation: fadeInUp var(--transition-slow) ease-out backwards;
}

.modal-section:nth-child(1) { animation-delay: 0.1s; }
.modal-section:nth-child(2) { animation-delay: 0.2s; }
.modal-section:nth-child(3) { animation-delay: 0.3s; }
.modal-section:nth-child(4) { animation-delay: 0.4s; }

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.modal-section-title {
    font-size: 16px;
    font-weight: 700;
    color: var(--primary);
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.modal-section-content {
    font-size: 15px;
    color: var(--text);
    line-height: 1.6;
}

.modal-section-content p {
    margin-bottom: 10px;
}

.modal-section-content p:last-child {
    margin-bottom: 0;
}

.modal-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 10px;
}

.modal-tag {
    padding: 6px 12px;
    background: rgba(255, 215, 0, 0.1);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: 13px;
    color: var(--primary);
}

.modal-actions {
    display: flex;
    gap: 15px;
    margin-top: 30px;
}

/* ===== LOADING ===== */
.loading {
    text-align: center;
    padding: 60px 20px;
    color: var(--text-secondary);
}

.loading-spinner {
    width: 50px;
    height: 50px;
    border: 3px solid var(--border);
    border-top-color: var(--primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: 0 auto 20px;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* ===== EMPTY STATE ===== */
.empty-state {
    text-align: center;
    padding: 80px 20px;
    color: var(--text-secondary);
}

.empty-icon {
    font-size: 64px;
    margin-bottom: 20px;
    opacity: 0.5;
}

.empty-state h3 {
    font-size: 20px;
    margin-bottom: 10px;
    color: var(--text);
}

/* ===== FILTERS ===== */
.filters-content {
    padding: 25px;
}

.filter-group {
    margin-bottom: 30px;
}

.filter-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.filter-title {
    font-size: 18px;
    font-weight: 700;
    color: var(--primary);
}

.filter-clear {
    font-size: 14px;
    color: var(--text-secondary);
    background: none;
    border: none;
    cursor: pointer;
    transition: color var(--transition-normal);
}

.filter-clear:hover {
    color: var(--primary);
}

.filter-options {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

.filter-option {
    padding: 12px 20px;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    color: var(--text);
    font-size: 15px;
    cursor: pointer;
    transition: all var(--transition-normal);
    flex: 1;
    min-width: 120px;
    text-align: center;
}

.filter-option:hover:not(.active) {
    background: rgba(255, 255, 255, 0.03);
    border-color: var(--primary);
    transform: translateY(-2px);
}

.filter-option.active {
    background: var(--primary);
    border-color: var(--primary);
    color: var(--secondary);
    font-weight: 700;
    box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3);
}

.filter-option:active:not(.active) {
    transform: scale(0.98);
}

/* ===== RANGE SLIDERS ===== */
.range-slider-container {
    padding: 20px 0;
}

.range-slider {
    width: 100%;
    height: 4px;
    -webkit-appearance: none;
    appearance: none;
    background: var(--border);
    border-radius: 2px;
    outline: none;
    cursor: pointer;
}

.range-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 24px;
    height: 24px;
    background: var(--primary);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 2px 10px rgba(255, 215, 0, 0.3);
    transition: all var(--transition-normal);
}

.range-slider::-webkit-slider-thumb:hover {
    transform: scale(1.1);
    box-shadow: 0 4px 16px rgba(255, 215, 0, 0.5);
}

.range-slider::-webkit-slider-thumb:active {
    transform: scale(0.95);
}

.range-slider::-moz-range-thumb {
    width: 24px;
    height: 24px;
    background: var(--primary);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 2px 10px rgba(255, 215, 0, 0.3);
    border: none;
    transition: all var(--transition-normal);
}

.range-slider::-moz-range-thumb:hover {
    transform: scale(1.1);
    box-shadow: 0 4px 16px rgba(255, 215, 0, 0.5);
}

.range-slider::-moz-range-thumb:active {
    transform: scale(0.95);
}

.range-values {
    display: flex;
    justify-content: space-between;
    margin-top: 10px;
    font-size: 14px;
    color: var(--text-secondary);
    font-weight: 500;
}

/* Year range slider */
.year-range-container {
    padding: 20px 0;
}

.year-slider-container {
    position: relative;
    height: 50px;
    margin: 20px 0 30px;
}

.year-track {
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 4px;
    background: var(--border);
    transform: translateY(-50%);
    border-radius: 2px;
}

.year-track-filled {
    position: absolute;
    top: 50%;
    height: 4px;
    background: var(--primary);
    transform: translateY(-50%);
    border-radius: 2px;
    transition: all var(--transition-fast);
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
}

.year-slider {
    position: absolute;
    top: 50%;
    width: 100%;
    -webkit-appearance: none;
    appearance: none;
    background: transparent;
    outline: none;
    pointer-events: none;
    z-index: 2;
    transform: translateY(-50%);
}

.year-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 24px;
    height: 24px;
    background: var(--primary);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 2px 10px rgba(255, 215, 0, 0.3);
    pointer-events: all;
    transition: all var(--transition-normal);
}

.year-slider::-webkit-slider-thumb:hover {
    transform: scale(1.1);
    box-shadow: 0 4px 16px rgba(255, 215, 0, 0.5);
}

.year-slider::-webkit-slider-thumb:active {
    transform: scale(0.95);
}

.year-slider::-moz-range-thumb {
    width: 24px;
    height: 24px;
    background: var(--primary);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 2px 10px rgba(255, 215, 0, 0.3);
    pointer-events: all;
    border: none;
    transition: all var(--transition-normal);
}

.year-slider::-moz-range-thumb:hover {
    transform: scale(1.1);
    box-shadow: 0 4px 16px rgba(255, 215, 0, 0.5);
}

.year-slider::-moz-range-thumb:active {
    transform: scale(0.95);
}

.year-labels {
    display: flex;
    justify-content: space-between;
    margin-top: 25px;
    font-size: 14px;
    color: var(--text-secondary);
    font-weight: 600;
}

/* ===== SELECT DROPDOWN ===== */
.select-container {
    position: relative;
    margin-top: 10px;
}

.select-dropdown {
    width: 100%;
    padding: 14px 45px 14px 15px;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    color: var(--text);
    font-size: 15px;
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    cursor: pointer;
    outline: none;
    transition: all var(--transition-normal);
}

.select-dropdown:hover {
    border-color: var(--primary);
    background: rgba(255, 255, 255, 0.03);
}

.select-dropdown:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.1);
}

.select-dropdown option {
    background: var(--secondary-light);
    color: var(--text);
    padding: 10px;
}

.select-arrow {
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--primary);
    font-size: 16px;
    pointer-events: none;
    transition: transform var(--transition-normal);
}

.select-dropdown:focus + .select-arrow {
    transform: translateY(-50%) rotate(180deg);
}

/* ===== PAGINATION ===== */
.pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    padding: 20px 20px 100px;
    flex-wrap: wrap;
}

.page-btn {
    width: 44px;
    height: 44px;
    border-radius: var(--radius-md);
    background: var(--secondary-light);
    border: 1px solid var(--border);
    color: var(--text);
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-normal);
}

.page-btn:hover:not(.active):not(:disabled) {
    background: rgba(255, 255, 255, 0.03);
    border-color: var(--primary);
    transform: translateY(-2px);
}

.page-btn.active {
    background: var(--primary);
    border-color: var(--primary);
    color: var(--secondary);
    box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3);
}

.page-btn:active:not(:disabled) {
    transform: scale(0.95);
}

.page-btn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
}

/* ===== CONTACT LINKS ===== */
.contact-link {
    color: var(--primary);
    text-decoration: none;
    transition: color var(--transition-normal);
    font-weight: 600;
}

.contact-link:hover {
    color: var(--primary-dark);
    text-decoration: underline;
}

.contact-link:focus-visible {
    outline: 2px solid var(--primary);
    outline-offset: 2px;
    border-radius: 2px;
}

/* ===== PRICE FORMATTING ===== */
.price-formatted {
    font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    letter-spacing: 0.5px;
    font-variant-numeric: tabular-nums;
}

/* ===== ANIMATIONS ===== */
@keyframes pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}

@keyframes shimmer {
    0% {
        background-position: -1000px 0;
    }
    100% {
        background-position: 1000px 0;
    }
}

/* ===== UTILITY CLASSES ===== */
.text-center {
    text-align: center;
}

.text-muted {
    color: var(--text-secondary);
}

.mt-1 { margin-top: 0.5rem; }
.mt-2 { margin-top: 1rem; }
.mt-3 { margin-top: 1.5rem; }
.mb-1 { margin-bottom: 0.5rem; }
.mb-2 { margin-bottom: 1rem; }
.mb-3 { margin-bottom: 1.5rem; }

.p-1 { padding: 0.5rem; }
.p-2 { padding: 1rem; }
.p-3 { padding: 1.5rem; }

/* ===== –†–ê–ó–ú–ï–©–ï–ù–ò–ï –û–ë–™–Ø–í–õ–ï–ù–ò–ô ===== */

/* –§–æ—Ä–º–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è */
.ad-form {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

/* –†–∞–∑–¥–µ–ª—ã —Ñ–æ—Ä–º—ã */
.form-section {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 20px;
    transition: all var(--transition-normal);
}

.form-section:hover {
    border-color: var(--primary);
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.08);
}

.form-section-title {
    font-size: 16px;
    font-weight: 700;
    color: var(--primary);
    margin: 0 0 16px 0;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--border);
    display: flex;
    align-items: center;
    gap: 10px;
}

.form-section-icon {
    font-size: 20px;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.form-row {
    display: flex;
    gap: 15px;
}

.form-row-2 {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
}

.form-group {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.form-group label {
    font-size: 14px;
    font-weight: 600;
    color: var(--text);
    display: flex;
    align-items: center;
    gap: 8px;
}

.label-icon {
    font-size: 16px;
    opacity: 0.8;
}

.required {
    color: var(--error);
    font-weight: 700;
    font-size: 16px;
}

.form-input,
.form-select,
.form-textarea {
    width: 100%;
    padding: 14px 16px;
    background: rgba(0, 0, 0, 0.3);
    border: 2px solid var(--border);
    border-radius: var(--radius-md);
    color: var(--text);
    font-size: 15px;
    font-family: inherit;
    transition: all var(--transition-normal);
}

.form-input:focus,
.form-select:focus,
.form-textarea:focus {
    outline: none;
    border-color: var(--primary);
    background: rgba(0, 0, 0, 0.4);
    box-shadow: 0 0 0 4px rgba(255, 215, 0, 0.15);
    transform: translateY(-1px);
}

.form-input::placeholder,
.form-textarea::placeholder {
    color: var(--text-secondary);
    opacity: 0.5;
}

.form-textarea {
    min-height: 120px;
    resize: vertical;
    line-height: 1.6;
}

.textarea-counter {
    text-align: right;
    font-size: 12px;
    color: var(--text-secondary);
    margin-top: 4px;
    font-weight: 500;
}

.form-select {
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L6 6L11 1' stroke='%23FFD700' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 16px center;
    padding-right: 45px;
}

.form-file {
    display: none;
}

.char-counter {
    font-size: 12px;
    color: var(--text-secondary);
    text-align: right;
    margin-top: 4px;
}

/* –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π */
.image-upload-area {
    border: 2px dashed var(--border);
    border-radius: var(--radius-md);
    padding: 35px 20px;
    text-align: center;
    cursor: pointer;
    transition: all var(--transition-normal);
    background: rgba(0, 0, 0, 0.2);
}

.image-upload-area:hover {
    border-color: var(--primary);
    background: rgba(255, 215, 0, 0.08);
    transform: scale(1.01);
}

.image-upload-area:active {
    transform: scale(0.99);
}

.image-upload-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
}

.upload-icon {
    font-size: 44px;
    opacity: 0.7;
    animation: floatUpDown 3s ease-in-out infinite;
}

@keyframes floatUpDown {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-8px); }
}

.upload-title {
    font-size: 15px;
    font-weight: 600;
    color: var(--text);
}

.upload-subtitle {
    font-size: 13px;
    color: var(--text-secondary);
}

.upload-hint {
    font-size: 11px;
    color: var(--text-secondary);
    opacity: 0.6;
}

.image-preview-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 12px;
    margin-top: 15px;
}

.preview-item {
    position: relative;
    aspect-ratio: 1;
    border-radius: var(--radius-sm);
    overflow: hidden;
    border: 2px solid var(--border);
    transition: all var(--transition-normal);
}

.preview-item:hover {
    border-color: var(--primary);
    box-shadow: 0 4px 12px rgba(255, 215, 0, 0.2);
    transform: scale(1.05);
}

.preview-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.preview-remove {
    position: absolute;
    top: 6px;
    right: 6px;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: rgba(0, 0, 0, 0.9);
    border: 2px solid var(--error);
    color: var(--error);
    font-size: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all var(--transition-fast);
    z-index: 2;
    opacity: 0;
}

.preview-item:hover .preview-remove {
    opacity: 1;
}

.preview-remove:hover {
    background: var(--error);
    color: white;
    transform: rotate(90deg) scale(1.1);
}

.image-upload-container {
    border: 2px dashed var(--border);
    border-radius: var(--radius-md);
    padding: 20px;
    text-align: center;
    cursor: pointer;
    transition: all var(--transition-normal);
}

.image-upload-container:hover {
    border-color: var(--primary);
    background: rgba(255, 215, 0, 0.05);
}

.image-upload-label {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    cursor: pointer;
}

.image-upload-icon {
    font-size: 32px;
    color: var(--primary);
    opacity: 0.7;
}

.image-upload-text {
    font-size: 14px;
    color: var(--text-secondary);
}

.image-preview-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
    gap: 10px;
    margin-top: 15px;
}

.image-preview-item {
    position: relative;
    width: 80px;
    height: 80px;
    border-radius: var(--radius-sm);
    overflow: hidden;
}

.image-preview-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.image-preview-remove {
    position: absolute;
    top: 5px;
    right: 5px;
    width: 24px;
    height: 24px;
    background: rgba(0, 0, 0, 0.7);
    border: none;
    border-radius: 50%;
    color: white;
    font-size: 14px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-normal);
}

.image-preview-remove:hover {
    background: var(--error);
    transform: scale(1.1);
}

/* –î–µ–π—Å—Ç–≤–∏—è —Ñ–æ—Ä–º—ã */
.form-actions {
    display: flex;
    gap: 12px;
    margin-top: 10px;
    padding-top: 24px;
    border-top: 2px solid var(--border);
}

.submit-ad-btn {
    flex: 1;
    padding: 18px 24px;
    font-size: 16px;
    font-weight: 700;
    background: linear-gradient(135deg, var(--primary) 0%, #FFC300 100%);
    box-shadow: 0 6px 20px rgba(255, 215, 0, 0.3);
    transition: all var(--transition-normal);
}

.submit-ad-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(255, 215, 0, 0.5);
}

.submit-ad-btn:active {
    transform: translateY(-1px);
}

.btn-secondary {
    background: rgba(255, 255, 255, 0.05);
    border: 2px solid var(--border);
    padding: 18px 24px;
    transition: all var(--transition-normal);
}

.btn-secondary:hover {
    background: rgba(255, 255, 255, 0.08);
    border-color: var(--primary);
}

.add-ad-modal {
    max-width: 650px;
}

@media (max-width: 768px) {
    .form-section {
        padding: 16px;
    }
    
    .form-row-2 {
        grid-template-columns: 1fr;
    }
    
    .form-actions {
        flex-direction: column-reverse;
    }
    
    .form-actions .btn {
        width: 100%;
    }
}


/* –ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è */
.my-ads-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
    max-height: 60vh;
    overflow-y: auto;
    padding-right: 10px;
}

.my-ad-item {
    background: var(--secondary-light);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 15px;
    display: flex;
    gap: 15px;
    align-items: flex-start;
    transition: all var(--transition-normal);
}

.my-ad-item:hover {
    border-color: var(--primary);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(255, 215, 0, 0.2);
}

.ad-item-image {
    width: 80px;
    height: 80px;
    border-radius: var(--radius-md);
    overflow: hidden;
    flex-shrink: 0;
}

.ad-item-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.ad-item-content {
    flex: 1;
    min-width: 0;
}

.ad-item-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 5px;
    line-height: 1.3;
}

.ad-item-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 10px;
}

.ad-item-price {
    font-size: 18px;
    font-weight: 700;
    color: var(--primary);
}

.ad-item-status {
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 600;
}

.status-pending {
    background: rgba(255, 193, 7, 0.2);
    color: #FFC107;
}

.status-active {
    background: rgba(76, 175, 80, 0.2);
    color: #4CAF50;
}

.status-rejected {
    background: rgba(244, 67, 54, 0.2);
    color: #F44336;
}

.ad-item-actions {
    display: flex;
    gap: 10px;
    margin-top: 10px;
}

.ad-action-btn {
    padding: 8px 12px;
    border: none;
    border-radius: var(--radius-sm);
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-normal);
    display: flex;
    align-items: center;
    gap: 5px;
    flex: 1;
    justify-content: center;
}

.ad-action-edit {
    background: rgba(33, 150, 243, 0.1);
    color: #2196F3;
    border: 1px solid rgba(33, 150, 243, 0.3);
}

.ad-action-edit:hover {
    background: rgba(33, 150, 243, 0.2);
}

.ad-action-delete {
    background: rgba(244, 67, 54, 0.1);
    color: #F44336;
    border: 1px solid rgba(244, 67, 54, 0.3);
}

.ad-action-delete:hover {
    background: rgba(244, 67, 54, 0.2);
}

/* –ö–Ω–æ–ø–∫–∞ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
.nav-add-btn {
    background: var(--primary) !important;
    color: var(--secondary) !important;
    border-radius: var(--radius-lg);
    margin: 5px;
    box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3);
    transition: all var(--transition-normal);
}

.nav-add-btn:hover {
    background: var(--primary-dark) !important;
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4);
}

.nav-add-btn:active {
    transform: scale(0.95);
}

.nav-add-btn .nav-icon {
    font-size: 24px;
}

/* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
.notification {
    position: fixed;
    top: 20px;
    right: 20px;
    background: var(--secondary-light);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 15px 20px;
    display: flex;
    align-items: center;
    gap: 15px;
    z-index: 9999;
    animation: slideInRight 0.3s ease-out;
    box-shadow: var(--shadow);
    max-width: 350px;
}

.notification.success {
    border-left: 4px solid #4CAF50;
}

.notification.error {
    border-left: 4px solid #F44336;
}

.notification.info {
    border-left: 4px solid #2196F3;
}

.notification.warning {
    border-left: 4px solid #FF9800;
}

.notification-icon {
    font-size: 24px;
    flex-shrink: 0;
}

.notification-content {
    flex: 1;
}

.notification-title {
    font-weight: 600;
    margin-bottom: 4px;
    color: var(--text);
}

.notification-message {
    font-size: 14px;
    color: var(--text-secondary);
}

.notification-close {
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: 20px;
    cursor: pointer;
    padding: 0;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: all var(--transition-normal);
}

.notification-close:hover {
    background: rgba(255, 255, 255, 0.1);
    color: var(--text);
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* ===== –£–õ–£–ß–®–ï–ù–ù–´–ô –ü–û–ò–°–ö –ò –ê–í–¢–û–î–û–ü–û–õ–ù–ï–ù–ò–ï ===== */

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è */
.search-suggestions {
    position: absolute;
    top: calc(100% + 5px);
    left: 0;
    right: 0;
    background: var(--secondary-light);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow);
    z-index: 1000;
    max-height: 400px;
    overflow-y: auto;
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    animation: slideDown 0.2s ease-out;
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* –≠–ª–µ–º–µ–Ω—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è */
.suggestion-item {
    padding: 12px 15px;
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
    transition: all var(--transition-normal);
    border-bottom: 1px solid rgba(255, 215, 0, 0.1);
    text-align: left;
    width: 100%;
}

.suggestion-item:last-child {
    border-bottom: none;
}

.suggestion-item:hover {
    background: rgba(255, 215, 0, 0.1);
}

.suggestion-item.selected {
    background: rgba(255, 215, 0, 0.2);
    border-left: 3px solid var(--primary);
}

/* –ö–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è */
.suggestion-content {
    flex: 1;
    min-width: 0;
}

.suggestion-text {
    font-size: 14px;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 4px;
    line-height: 1.3;
}

.suggestion-text mark {
    background: var(--primary);
    color: var(--secondary);
    padding: 1px 3px;
    border-radius: 3px;
    font-weight: 700;
}

.suggestion-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    font-size: 11px;
    color: var(--text-secondary);
}

.suggestion-category,
.suggestion-year,
.suggestion-price {
    padding: 2px 6px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 4px;
    white-space: nowrap;
}

.suggestion-price {
    color: var(--primary);
    font-weight: 600;
}

/* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ */
.suggestion-score {
    font-size: 16px;
    flex-shrink: 0;
    opacity: 0.7;
    transition: opacity var(--transition-normal);
}

.suggestion-item:hover .suggestion-score {
    opacity: 1;
}

/* –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è */
.search-suggestions.loading {
    padding: 20px;
    text-align: center;
}

.search-suggestions.loading::after {
    content: '';
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 2px solid var(--border);
    border-top-color: var(--primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

/* –ü—É—Å—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã */
.search-suggestions.empty {
    padding: 20px;
    text-align: center;
    color: var(--text-secondary);
}

.search-suggestions.empty::before {
    content: 'üîç';
    font-size: 24px;
    display: block;
    margin-bottom: 10px;
    opacity: 0.5;
}

/* –ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø–æ–¥ –ø–æ–∏—Å–∫–æ–º */
.search-hint {
    position: absolute;
    bottom: -25px;
    left: 15px;
    font-size: 11px;
    color: var(--text-secondary);
    opacity: 0;
    transition: opacity var(--transition-normal);
    pointer-events: none;
}

.search-input:focus + .search-icon + .search-hint {
    opacity: 0.7;
}

/* –ö–∞—Å—Ç–æ–º–Ω—ã–π —Å–∫—Ä–æ–ª–ª–±–∞—Ä –¥–ª—è –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è */
.search-suggestions::-webkit-scrollbar {
    width: 6px;
}

.search-suggestions::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 3px;
}

.search-suggestions::-webkit-scrollbar-thumb {
    background: var(--primary);
    border-radius: 3px;
}

.search-suggestions::-webkit-scrollbar-thumb:hover {
    background: var(--primary-dark);
}

/* –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–æ–∫—É—Å–∞ –¥–ª—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ */
.suggestion-item:focus-visible {
    outline: 2px solid var(--primary);
    outline-offset: -2px;
    position: relative;
    z-index: 1;
}

/* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö */
.suggestion-category[data-category="spec"] {
    background: rgba(255, 140, 0, 0.15);
    color: #FF8C00;
}

.suggestion-category[data-category="truck"] {
    background: rgba(0, 122, 255, 0.15);
    color: #007AFF;
}

.suggestion-category[data-category="passenger"] {
    background: rgba(52, 199, 89, 0.15);
    color: #34C759;
}

.suggestion-category[data-category="equipment"] {
    background: rgba(175, 82, 222, 0.15);
    color: #AF52DE;
}

/* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ */
.suggestion-score[title*="90"] { /* 90%+ */
    color: #34C759;
}

.suggestion-score[title*="70"] { /* 70-89% */
    color: #FFCC00;
}

.suggestion-score[title*="50"] { /* 50-69% */
    color: #FF9500;
}

.suggestion-score[title*="30"] { /* 30-49% */
    color: #FF3B30;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —ç–ª–µ–º–µ–Ω—Ç–∞ */
@keyframes selectPulse {
    0%, 100% {
        background-color: transparent;
    }
    50% {
        background-color: rgba(255, 215, 0, 0.3);
    }
}

.suggestion-item.selected {
    animation: selectPulse 1s ease-in-out;
}

/* ===== RESPONSIVE STYLES ===== */

/* Tablet and below */
@media (max-width: 768px) {
    .header {
        padding: 0 15px;
        gap: 10px;
    }
    
    .header-search {
        flex: 1;
        min-width: 0;
    }
    
    .search-input {
        font-size: 16px; /* Prevent iOS zoom */
        padding: 12px 40px 12px 15px;
    }
    
    .search-icon {
        font-size: 18px;
    }
    
    .logo-text {
        display: none;
    }
    
    .mobile-menu-btn {
        display: flex;
    }
    
    .btn {
        min-height: 48px;
        font-size: 14px;
    }
    
    .modal-content {
        margin: 15px auto;
    }
    
    .search-suggestions {
        position: fixed;
        top: 70px;
        left: 15px;
        right: 15px;
        max-height: 50vh;
    }
    
    .suggestion-item {
        padding: 15px;
    }
    
    .suggestion-text {
        font-size: 16px; /* –ë–æ–ª—å—à–µ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
    }
    
    .suggestion-meta {
        font-size: 12px;
    }
    
    .nav-add-btn {
        margin: 2px;
    }
    
    .nav-add-btn .nav-icon {
        font-size: 20px;
    }
}

/* Mobile */
@media (max-width: 480px) {
    .sort-section {
        padding: 12px 15px;
        gap: 8px;
    }
    
    .sort-btn {
        padding: 10px 12px;
        font-size: 14px;
        min-height: 44px;
        min-width: 44px;
        justify-content: center;
    }
    
    /* –¢–µ–∫—Å—Ç –≤—Å–µ–≥–¥–∞ –≤–∏–¥–µ–Ω –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö */
    .sort-btn-text {
        display: inline !important;
    }
    
    .sort-btn:last-child {
        padding: 10px 12px;
        font-size: 12px;
        min-width: 60px;
    }
    
    .categories {
        padding: 12px 15px 10px;
        gap: 8px;
    }
    
    .category-btn {
        padding: 10px 15px;
        font-size: 14px;
        min-height: 44px;
    }
    
    .category-count {
        font-size: 11px;
    }
    
    .products-grid {
        padding: 0 0 80px;
        gap: 10px;
    }
    
    .product-image-container {
        height: 180px;
    }
    
    .image-placeholder {
        min-height: 180px;
    }
    
    .product-content {
        padding: 12px;
        gap: 8px;
    }
    
    .product-title {
        font-size: 14px;
        min-height: 36px;
        font-weight: 500;
    }
    
    .product-price {
        font-size: 18px;
    }
    
    .product-price-note {
        font-size: 10px;
    }
    
    .modal-image-container {
        height: 220px;
    }
    
    .btn {
        padding: 12px;
        font-size: 14px;
        min-height: 44px;
    }
    
    .modal-content {
        margin: 10px auto;
    }
    
    .modal-header {
        padding: 20px 20px 0;
    }
    
    .modal-title {
        font-size: 20px;
    }
    
    .modal-body {
        padding: 20px;
    }
    
    .modal-section-title {
        font-size: 15px;
    }
    
    .modal-section-content {
        font-size: 14px;
    }
    
    .filters-content {
        padding: 20px;
    }
    
    .filter-title {
        font-size: 16px;
    }
    
    .filter-option {
        min-width: 100px;
        font-size: 14px;
        padding: 10px 15px;
    }
    
    .pagination {
        padding: 15px 15px 100px;
        gap: 8px;
    }
    
    .page-btn {
        width: 36px;
        height: 36px;
        font-size: 14px;
    }
    
    .ad-form {
        gap: 15px;
    }
    
    .form-group {
        gap: 6px;
    }
    
    .form-input,
    .form-select,
    .form-textarea {
        padding: 12px;
        font-size: 14px;
    }
    
    .ad-item-actions {
        flex-direction: column;
    }
    
    .ad-action-btn {
        width: 100%;
    }
}

/* Extra small devices */
@media (max-width: 360px) {
    .sort-section {
        padding: 10px 12px;
        gap: 6px;
    }
    
    .sort-btn {
        padding: 8px 10px;
        font-size: 12px;
        min-width: 40px;
        min-height: 40px;
    }
    
    .sort-btn:last-child {
        font-size: 11px;
        padding: 8px 10px;
        min-width: 55px;
    }
    
    .products-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
    }
    
    .product-image-container {
        height: 160px;
    }
    
    .image-placeholder {
        min-height: 160px;
    }
    
    .product-content {
        padding: 10px;
        gap: 6px;
    }
    
    .product-title {
        font-size: 13px;
        min-height: 32px;
    }
    
    .product-price {
        font-size: 16px;
    }
    
    .product-price-note {
        font-size: 9px;
    }
    
    .filter-option {
        min-width: 90px;
        padding: 8px 12px;
    }
    
    .pagination {
        padding: 12px 12px 100px;
        gap: 6px;
    }
    
    .page-btn {
        width: 32px;
        height: 32px;
        font-size: 12px;
    }
    
    .search-suggestions {
        left: 10px;
        right: 10px;
    }
    
    .suggestion-item {
        padding: 12px;
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
    }
    
    .suggestion-meta {
        flex-direction: column;
        gap: 4px;
    }
    
    .suggestion-score {
        align-self: flex-end;
        margin-top: -24px;
    }
}

/* Desktop - hide mobile menu button */
@media (min-width: 769px) {
    .mobile-menu-btn {
        display: none;
    }
}

/* –ë–æ–ª—å—à–∏–µ —ç–∫—Ä–∞–Ω—ã - 3 –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ —Ä—è–¥ */
@media (min-width: 1024px) {
    .products-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}

/* –û—á–µ–Ω—å –±–æ–ª—å—à–∏–µ —ç–∫—Ä–∞–Ω—ã - 4 –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ —Ä—è–¥ */
@media (min-width: 1400px) {
    .products-grid {
        grid-template-columns: repeat(4, 1fr);
    }
}

/* Print styles */
@media print {
    .header,
    .footer-nav,
    .mobile-menu,
    .sort-section,
    .categories,
    .pagination,
    .favorite-btn,
    .btn {
        display: none !important;
    }
    
    .main-content {
        margin-top: 0;
    }
    
    .products-grid {
        padding: 20px;
    }
    
    .product-card {
        break-inside: avoid;
        page-break-inside: avoid;
    }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    :root {
        --border: rgba(255, 215, 0, 0.5);
    }
    
    .product-card,
    .btn,
    .modal-content {
        border-width: 2px;
    }
    
    .search-suggestions {
        border-width: 2px;
    }
    
    .suggestion-item {
        border-bottom-width: 2px;
    }
    
    .suggestion-item.selected {
        border-left-width: 4px;
    }
}

/* –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–π –¥–ª—è –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é—â–∏—Ö —Å–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è */
@media (prefers-reduced-motion: reduce) {
    .search-suggestions,
    .suggestion-item,
    .suggestion-item.selected,
    .notification {
        animation: none !important;
        transition: none !important;
    }
}

/* –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è */
@media (prefers-color-scheme: dark) {
    .search-suggestions {
        background: rgba(30, 30, 30, 0.95);
        border-color: rgba(255, 215, 0, 0.3);
    }
    
    .suggestion-item:hover {
        background: rgba(255, 215, 0, 0.15);
    }
    
    .suggestion-item.selected {
        background: rgba(255, 215, 0, 0.25);
    }
}
/* ===== –û–ë–ù–û–í–õ–ï–ù–ù–´–ô –ü–†–û–§–ò–õ–¨ ===== */

.modal-header-profile {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 195, 0, 0.05) 100%);
    border-bottom: none;
    padding: 20px 25px;
    display: flex;
    justify-content: flex-end;
}

/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–æ—Ñ–∏–ª—è —Å –∞–≤–∞—Ç–∞—Ä–∫–æ–π */
.profile-header {
    display: flex;
    align-items: center;
    gap: 20px;
    margin-bottom: 25px;
    padding: 0 25px;
}

.profile-avatar {
    flex-shrink: 0;
}

.avatar-placeholder {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.2) 0%, rgba(255, 195, 0, 0.1) 100%);
    border: 3px solid var(--primary);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
    transition: all var(--transition-normal);
}

.avatar-placeholder:hover {
    transform: scale(1.05);
    box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4);
}

.avatar-icon {
    font-size: 40px;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.profile-info {
    flex: 1;
}

.profile-name {
    font-size: 24px;
    font-weight: 700;
    color: var(--primary);
    margin: 0 0 5px 0;
}

.profile-subtitle {
    font-size: 14px;
    color: var(--text-secondary);
    margin: 0;
}

/* –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
.profile-stats-compact {
    display: flex;
    align-items: center;
    justify-content: space-around;
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 20px;
    margin: 0 25px 25px 25px;
}

.profile-stat-item {
    text-align: center;
    flex: 1;
}

.stat-value-compact {
    font-size: 28px;
    font-weight: 800;
    color: var(--primary);
    line-height: 1;
    margin-bottom: 5px;
}

.stat-label-compact {
    font-size: 12px;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.stat-divider {
    width: 1px;
    height: 40px;
    background: var(--border);
}

/* –°–µ–∫—Ü–∏—è –∫–Ω–æ–ø–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è */
.profile-action-section {
    padding: 0 25px 25px 25px;
}

.btn-create-ad {
    width: 100%;
    padding: 18px;
    font-size: 16px;
    font-weight: 700;
    background: linear-gradient(135deg, var(--primary) 0%, #FFC300 100%);
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
    border: none;
}

.btn-create-ad:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(255, 215, 0, 0.5);
}

.btn-create-ad .btn-icon {
    font-size: 20px;
}

/* –°–µ–∫—Ü–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π */
.profile-ads-section {
    padding: 0 25px 25px 25px;
}

.section-title {
    font-size: 18px;
    font-weight: 700;
    color: var(--text);
    margin: 0 0 20px 0;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--border);
}

/* –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ø—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–∫–æ–º–ø–∞–∫—Ç–Ω–µ–µ) */
.no-ads-message {
    padding: 40px 20px;
    text-align: center;
}

.no-ads-message h4 {
    font-size: 18px;
    margin-bottom: 8px;
    color: var(--text);
}

.no-ads-message p {
    font-size: 14px;
    color: var(--text-secondary);
    margin: 0;
}

/* –ö–∞—Ä—Ç–æ—á–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π (–±–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–µ) */
.my-ad-card {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    padding: 15px;
    display: flex;
    gap: 15px;
    align-items: flex-start;
    transition: all var(--transition-normal);
    margin-bottom: 12px;
}

.my-ad-card:hover {
    transform: translateX(5px);
    border-color: var(--primary);
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.15);
}

.my-ad-image {
    width: 80px;
    height: 80px;
    object-fit: cover;
    border-radius: var(--radius-sm);
    border: 2px solid var(--border);
    flex-shrink: 0;
}

.my-ad-content {
    flex: 1;
    min-width: 0;
}

.my-ad-title {
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 8px;
    color: var(--text);
    line-height: 1.3;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.my-ad-price {
    font-size: 18px;
    font-weight: 800;
    color: var(--primary);
    margin-bottom: 8px;
}

.my-ad-details {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 8px;
}

.my-ad-detail {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 12px;
    color: var(--text-secondary);
}

.my-ad-actions {
    display: flex;
    gap: 8px;
    margin-top: 10px;
}

.my-ad-actions .btn {
    flex: 1;
    padding: 8px 12px;
    font-size: 13px;
    min-height: auto;
}

/* ===== –û–†–ê–ù–ñ–ï–í–ê–Ø –ö–ù–û–ü–ö–ê –ò–ó–ë–†–ê–ù–ù–û–ì–û –í –ú–û–î–ê–õ–¨–ù–û–ú –û–ö–ù–ï ===== */

/* –í –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ —Ç–æ–≤–∞—Ä–∞ –∫–Ω–æ–ø–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ä–∞–Ω–∂–µ–≤–æ–π –∫–æ–≥–¥–∞ –∞–∫—Ç–∏–≤–Ω–∞ */
#product-modal .favorite-btn.active {
    background: linear-gradient(135deg, #FF9800 0%, #FF5722 100%);
    border-color: #FF9800;
    color: white;
    box-shadow: 0 4px 15px rgba(255, 152, 0, 0.4);
}

#product-modal .favorite-btn.active:hover {
    background: linear-gradient(135deg, #FB8C00 0%, #F4511E 100%);
    box-shadow: 0 6px 20px rgba(255, 152, 0, 0.5);
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ */
#product-modal .favorite-btn.active.animating {
    animation: favoriteOrangeHeartBeat 0.6s ease-in-out;
}

@keyframes favoriteOrangeHeartBeat {
    0% { transform: scale(1); }
    25% { transform: scale(1.3); }
    50% { transform: scale(1.1); }
    75% { transform: scale(1.25); }
    100% { transform: scale(1); }
}

/* –û—Ä–∞–Ω–∂–µ–≤—ã–µ –∑–≤–µ–∑–¥–æ—á–∫–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */
#product-modal .favorite-sparkle {
    color: #FF9800;
}

/* ===== –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ –î–õ–Ø –ü–†–û–§–ò–õ–Ø ===== */

@media (max-width: 600px) {
    .profile-header {
        flex-direction: column;
        text-align: center;
        padding: 0 20px;
    }
    
    .profile-avatar {
        margin: 0 auto;
    }
    
    .profile-stats-compact {
        flex-direction: column;
        gap: 15px;
        margin: 0 20px 20px 20px;
        padding: 15px;
    }
    
    .stat-divider {
        width: 100%;
        height: 1px;
    }
    
    .profile-action-section {
        padding: 0 20px 20px 20px;
    }
    
    .profile-ads-section {
        padding: 0 20px 20px 20px;
    }
    
    .my-ad-card {
        flex-direction: column;
        text-align: center;
    }
    
    .my-ad-image {
        width: 100%;
        height: 150px;
        margin: 0 auto;
    }
    
    .my-ad-title {
        white-space: normal;
    }
    
    .my-ad-actions {
        width: 100%;
    }
}

/* ===== –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø ===== */

/* –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–æ—Ñ–∏–ª—è */
.modal-my-ads {
    animation: slideUpProfile 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes slideUpProfile {
    from {
        transform: translateY(30px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

/* –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –¥–ª—è —Å–ø–∏—Å–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π */
.my-ads-list {
    max-height: 400px;
    overflow-y: auto;
    padding-right: 5px;
}

.my-ads-list::-webkit-scrollbar {
    width: 6px;
}

.my-ads-list::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 3px;
}

.my-ads-list::-webkit-scrollbar-thumb {
    background: var(--primary);
    border-radius: 3px;
}

.my-ads-list::-webkit-scrollbar-thumb:hover {
    background: var(--primary-dark);
}

/* ===== –°–¢–ò–õ–ò –î–õ–Ø –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê –ö–û–ù–¢–ê–ö–¢–û–í ===== */

.contact-button {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 18px 20px;
    background: var(--bg);
    border: 2px solid var(--border);
    border-radius: var(--radius-md);
    color: var(--text);
    font-size: 16px;
    font-weight: 600;
    text-decoration: none;
    transition: all var(--transition-normal);
    position: relative;
    overflow: hidden;
}

.contact-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.1), transparent);
    transition: left 0.5s ease;
}

.contact-button:hover::before {
    left: 100%;
}

.contact-button:hover {
    border-color: var(--primary);
    background: rgba(255, 215, 0, 0.05);
    transform: translateX(5px);
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.2);
}

.contact-button:active {
    transform: translateX(3px) scale(0.98);
}

.contact-icon {
    font-size: 24px;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
    flex-shrink: 0;
}

.contact-text {
    flex: 1;
}

.contact-arrow {
    font-size: 20px;
    color: var(--primary);
    transition: transform var(--transition-normal);
}

.contact-button:hover .contact-arrow {
    transform: translateX(5px);
}

.contact-info-box {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    padding: 15px 20px;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.contact-info-line {
    display: flex;
    align-items: center;
    gap: 12px;
    color: var(--text);
    font-size: 15px;
    line-height: 1.5;
}

.contact-info-icon {
    font-size: 18px;
    flex-shrink: 0;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

@media (max-width: 600px) {
    .contact-button {
        padding: 15px 18px;
        font-size: 15px;
    }

    .contact-icon {
        font-size: 22px;
    }

    .contact-info-line {
        font-size: 14px;
    }
}

/* ===== –°–¢–ò–õ–ò –î–õ–Ø –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†–ê –õ–ò–ó–ò–ù–ì–ê ===== */

.calculator-description {
    padding: 0 0 10px 0;
}

.calc-value-display {
    margin-top: 10px;
    padding: 12px 15px;
    background: rgba(255, 215, 0, 0.1);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    color: var(--primary);
    font-size: 18px;
    font-weight: 700;
    text-align: center;
}

/* –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ */
.calc-results {
    margin-top: 30px;
    padding: 20px;
    background: rgba(255, 215, 0, 0.05);
    border: 2px solid var(--primary);
    border-radius: var(--radius-md);
    animation: fadeInUp 0.4s ease-out;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* –ì–ª–∞–≤–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Å –µ–∂–µ–º–µ—Å—è—á–Ω—ã–º –ø–ª–∞—Ç–µ–∂–æ–º */
.calc-result-card {
    background: linear-gradient(135deg, var(--primary) 0%, #FFC300 100%);
    padding: 20px;
    border-radius: var(--radius-md);
    margin-bottom: 20px;
    text-align: center;
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
}

.calc-result-label {
    font-size: 14px;
    font-weight: 600;
    color: var(--secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 8px;
}

.calc-result-value {
    font-size: 32px;
    font-weight: 800;
    color: var(--secondary);
    line-height: 1.2;
}

/* –°–µ—Ç–∫–∞ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ */
.calc-result-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
}

.calc-result-item {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    padding: 15px;
    text-align: center;
    transition: all var(--transition-normal);
}

.calc-result-item:hover {
    border-color: var(--primary);
    background: rgba(255, 215, 0, 0.05);
    transform: translateY(-2px);
}

.calc-result-label-small {
    font-size: 12px;
    color: var(--text-secondary);
    margin-bottom: 8px;
    line-height: 1.3;
}

.calc-result-value-small {
    font-size: 18px;
    font-weight: 700;
    color: var(--primary);
    line-height: 1.2;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
@media (max-width: 600px) {
    .calc-result-value {
        font-size: 28px;
    }

    .calc-result-grid {
        grid-template-columns: 1fr;
        gap: 10px;
    }

    .calc-result-item {
        padding: 12px;
    }

    .calc-result-value-small {
        font-size: 16px;
    }
}
    </style>
</head>
<body>
    <!-- Header —Å –ø–æ–∏—Å–∫–æ–º -->
    <header class="header" role="banner">
        <div class="logo-section">
            <div class="logo-container">
                <img src="https://cdn-ru.bitrix24.ru/b10013927/sender/d77/d77ed0d02b49458dc53d9493d2bf5580/588929871af43f7bef2ed69abf2cc58c.png" 
                     alt="–ö–§–õ –õ–∏–∑–∏–Ω–≥" 
                     class="logo">
            </div>
            <div class="logo-text">
                <div class="logo-title">–ö–§–õ –õ–∏–∑–∏–Ω–≥</div>
                <div class="logo-subtitle">–ö–∞—Ç–∞–ª–æ–≥ –∫–æ–Ω—Ñ–∏—Å–∫–∞—Ç–∞</div>
            </div>
        </div>

        <!-- –ü–æ–∏—Å–∫ –≤ —Ö–µ–¥–µ—Ä–µ -->
        <div class="header-search">
            <label for="search-input" class="sr-only">–ü–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–∞–ª–æ–≥—É</label>
            <input type="search" 
                   id="search-input"
                   class="search-input" 
                   placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ä–µ–≥–∏–æ–Ω—É..." 
                   aria-label="–ü–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–∞–ª–æ–≥—É"
                   autocomplete="off">
            <div class="search-icon" aria-hidden="true">üîç</div>
        </div>
    </header>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="main-content" role="main">
        <!-- Sort Section -->
        <section class="sort-section" 
                 id="sort-section"
                 aria-label="–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä—ã">
            <button class="sort-btn active" 
                    data-sort="default" 
                    title="–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é"
                    aria-pressed="true">
                <span class="sort-btn-text">üìã –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é</span>
            </button>
            <button class="sort-btn" 
                    data-sort="price_asc" 
                    title="–¶–µ–Ω–∞ –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é"
                    aria-pressed="false">
                <span class="sort-btn-text">üí∞ –¶–µ–Ω–∞ ‚Üë</span>
            </button>
            <button class="sort-btn" 
                    data-sort="price_desc" 
                    title="–¶–µ–Ω–∞ –ø–æ —É–±—ã–≤–∞–Ω–∏—é"
                    aria-pressed="false">
                <span class="sort-btn-text">üí∞ –¶–µ–Ω–∞ ‚Üì</span>
            </button>
            <button class="sort-btn" 
                    data-sort="year_desc" 
                    title="–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ"
                    aria-pressed="false">
                <span class="sort-btn-text">üÜï –ù–æ–≤—ã–µ</span>
            </button>
            <button class="sort-btn" 
                    data-sort="year_asc" 
                    title="–°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä—ã–µ"
                    aria-pressed="false">
                <span class="sort-btn-text">üïê –°—Ç–∞—Ä—ã–µ</span>
            </button>
            <button class="sort-btn" 
                    data-action="filters" 
                    title="–§–∏–ª—å—Ç—Ä—ã" 
                    style="background: rgba(255, 215, 0, 0.1); color: var(--primary);"
                    aria-label="–û—Ç–∫—Ä—ã—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã">
                <span class="sort-btn-text">‚öôÔ∏è –§–∏–ª—å—Ç—Ä—ã</span>
            </button>
        </section>

        <!-- –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ -->
        <div class="products-container">
            <!-- Products Grid -->
            <div class="products-grid" 
                 id="products-grid"
                 role="region"
                 aria-live="polite"
                 aria-label="–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤">
                <!-- Products will be populated by JavaScript -->
            </div>

            <!-- Loading -->
            <div class="loading" 
                 id="loading"
                 role="status"
                 aria-live="polite">
                <div class="loading-spinner" aria-hidden="true"></div>
                <div>–ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞...</div>
            </div>

            <!-- Empty State -->
            <div class="empty-state" 
                 id="empty-state" 
                 style="display: none;"
                 role="status">
                <div class="empty-icon" aria-hidden="true">üîç</div>
                <h3>–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>
                <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä—ã</p>
            </div>

            <!-- Pagination -->
            <nav class="pagination" 
                 id="pagination" 
                 style="display: none;"
                 role="navigation"
                 aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º">
                <!-- Pagination will be populated by JavaScript -->
            </nav>
        </div>
    </main>

    <!-- Footer Navigation -->
    <nav class="footer-nav" 
         role="navigation"
         aria-label="–û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
        <button class="nav-item active" 
                data-view="catalog">
            <div class="nav-icon" aria-hidden="true">üè†</div>
            <div class="nav-text">–ö–∞—Ç–∞–ª–æ–≥</div>
        </button>
        <button class="nav-item" 
                data-view="favorites">
            <div class="nav-icon" aria-hidden="true">‚ù§Ô∏è</div>
            <div class="nav-text">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</div>
            <div class="nav-badge" 
                 id="footer-favorites-badge"
                 aria-label="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤">0</div>
        </button>
        <button class="nav-item"
                data-view="calculator">
            <div class="nav-icon" aria-hidden="true">üßÆ</div>
            <div class="nav-text">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</div>
        </button>
        <button class="nav-item nav-item-add"
                data-view="add-ad">
            <div class="nav-icon" aria-hidden="true">‚ûï</div>
            <div class="nav-text">–†–∞–∑–º–µ—Å—Ç–∏—Ç—å</div>
        </button>
        <button class="nav-item"
                data-view="contacts">
            <div class="nav-icon" aria-hidden="true">üìû</div>
            <div class="nav-text">–ö–æ–Ω—Ç–∞–∫—Ç—ã</div>
        </button>
        <button class="nav-item profile-item" 
                data-view="my-ads">
            <div class="nav-profile-icon" aria-hidden="true">üë§</div>
            <div class="nav-text">–ü—Ä–æ—Ñ–∏–ª—å</div>
            <div class="profile-notifications" 
                 id="profile-notifications"
                 style="display: none;"
                 aria-label="–ù–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è">0</div>
        </button>
    </nav>

    <!-- Product Modal -->
    <div class="modal" 
         id="product-modal"
         role="dialog"
         aria-modal="true"
         aria-labelledby="product-modal-title">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="product-modal-title">–î–µ—Ç–∞–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</h2>
                <button class="modal-close" 
                        aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Modal content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Filters Modal -->
    <div class="modal" 
         id="filters-modal"
         role="dialog"
         aria-modal="true"
         aria-labelledby="filters-modal-title">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="filters-modal-title">–§–∏–ª—å—Ç—Ä—ã</h2>
                <button class="modal-close" 
                        aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
            </div>
            <div class="filters-content">
                <div class="filter-group">
                    <div class="filter-header">
                        <div class="filter-title">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</div>
                        <button class="filter-clear" 
                                data-clear="category"
                                aria-label="–°–±—Ä–æ—Å–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é">–°–±—Ä–æ—Å–∏—Ç—å</button>
                    </div>
                    <div class="filter-options" 
                         id="category-filters"
                         role="group"
                         aria-label="–í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏">
                        <!-- Category filters will be populated by JavaScript -->
                    </div>
                </div>

                <div class="filter-group">
                    <div class="filter-header">
                        <div class="filter-title">–¶–µ–Ω–∞, ‚ÇΩ</div>
                        <button class="filter-clear" 
                                data-clear="price"
                                aria-label="–°–±—Ä–æ—Å–∏—Ç—å —Ü–µ–Ω—É">–°–±—Ä–æ—Å–∏—Ç—å</button>
                    </div>
                    <div class="range-slider-container">
                        <label for="price-range" class="sr-only">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞</label>
                        <input type="range" 
                               class="range-slider" 
                               id="price-range" 
                               min="0" 
                               max="100000000" 
                               step="1000000" 
                               value="100000000"
                               aria-valuemin="0"
                               aria-valuemax="100000000"
                               aria-valuenow="100000000">
                        <div class="range-values">
                            <span aria-label="–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞">0 ‚ÇΩ</span>
                            <span id="price-value" 
                                  aria-live="polite"
                                  aria-label="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞">100 000 000+ ‚ÇΩ</span>
                        </div>
                    </div>
                </div>

                <div class="filter-group">
                    <div class="filter-header">
                        <div class="filter-title">–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞</div>
                        <button class="filter-clear" 
                                data-clear="year"
                                aria-label="–°–±—Ä–æ—Å–∏—Ç—å –≥–æ–¥">–°–±—Ä–æ—Å–∏—Ç—å</button>
                    </div>
                    <div class="year-range-container">
                        <div class="year-slider-container">
                            <div class="year-track" aria-hidden="true"></div>
                            <div class="year-track-filled" 
                                 id="year-track-filled"
                                 aria-hidden="true"></div>
                            <label for="year-min" class="sr-only">–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≥–æ–¥</label>
                            <input type="range" 
                                   class="year-slider" 
                                   id="year-min" 
                                   min="2000" 
                                   max="2025" 
                                   value="2000" 
                                   step="1"
                                   aria-valuemin="2000"
                                   aria-valuemax="2025"
                                   aria-valuenow="2000">
                            <label for="year-max" class="sr-only">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≥–æ–¥</label>
                            <input type="range" 
                                   class="year-slider" 
                                   id="year-max" 
                                   min="2000" 
                                   max="2025" 
                                   value="2025" 
                                   step="1"
                                   aria-valuemin="2000"
                                   aria-valuemax="2025"
                                   aria-valuenow="2025">
                        </div>
                        <div class="year-labels">
                            <span id="year-min-value" aria-live="polite">2000</span>
                            <span id="year-max-value" aria-live="polite">2025</span>
                        </div>
                    </div>
                </div>

                <div class="filter-group">
                    <div class="filter-header">
                        <div class="filter-title">–†–µ–≥–∏–æ–Ω</div>
                        <button class="filter-clear" 
                                data-clear="region"
                                aria-label="–°–±—Ä–æ—Å–∏—Ç—å —Ä–µ–≥–∏–æ–Ω">–°–±—Ä–æ—Å–∏—Ç—å</button>
                    </div>
                    <div class="select-container">
                        <label for="region-select" class="sr-only">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω</label>
                        <select class="select-dropdown" 
                                id="region-select"
                                aria-label="–í—ã–±–æ—Ä —Ä–µ–≥–∏–æ–Ω–∞">
                            <option value="">–í—Å–µ —Ä–µ–≥–∏–æ–Ω—ã</option>
                            <!-- Regions will be populated by JavaScript -->
                        </select>
                        <div class="select-arrow" aria-hidden="true">‚ñº</div>
                    </div>
                </div>

                <div class="modal-actions">
                    <button class="btn btn-secondary" 
                            style="flex: 1;"
                            data-action="close-filters">
                        –û—Ç–º–µ–Ω–∞
                    </button>
                    <button class="btn btn-primary" 
                            style="flex: 2;"
                            data-action="apply-filters">
                        –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ -->
    <div class="modal" 
         id="contacts-modal"
         role="dialog"
         aria-modal="true"
         aria-labelledby="contacts-modal-title">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="contacts-modal-title">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
                <button class="modal-close" 
                        aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
            </div>
            <div class="filters-content">
                <!-- –¢–µ–ª–µ—Ñ–æ–Ω -->
                <div class="filter-group">
                    <div class="filter-header">
                        <div class="filter-title">üì± –¢–µ–ª–µ—Ñ–æ–Ω</div>
                    </div>
                    <a href="tel:+79139009091" 
                       class="contact-button">
                        <span class="contact-icon">üìû</span>
                        <span class="contact-text">+7 (913) 900-90-91</span>
                    </a>
                </div>

                <!-- Email -->
                <div class="filter-group">
                    <div class="filter-header">
                        <div class="filter-title">‚úâÔ∏è Email</div>
                    </div>
                    <a href="mailto:info@kfl-leasing.ru" 
                       class="contact-button">
                        <span class="contact-icon">üìß</span>
                        <span class="contact-text">info@kfl-leasing.ru</span>
                    </a>
                </div>

                <!-- –í–µ–±-—Å–∞–π—Ç -->
                <div class="filter-group">
                    <div class="filter-header">
                        <div class="filter-title">üåê –í–µ–±-—Å–∞–π—Ç</div>
                    </div>
                    <a href="https://kfl-leasing.ru" 
                       target="_blank" 
                       rel="noopener noreferrer"
                       class="contact-button">
                        <span class="contact-icon">üîó</span>
                        <span class="contact-text">kfl-leasing.ru</span>
                        <span class="contact-arrow">‚Üí</span>
                    </a>
                </div>

                <!-- –ê–¥—Ä–µ—Å -->
                <div class="filter-group">
                    <div class="filter-header">
                        <div class="filter-title">üìç –ê–¥—Ä–µ—Å</div>
                    </div>
                    <div class="contact-info-box">
                        <div class="contact-info-line">
                            <span class="contact-info-icon">üè¢</span>
                            <span>–≥. –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫</span>
                        </div>
                        <div class="contact-info-line">
                            <span class="contact-info-icon">üìÆ</span>
                            <span>—É–ª. –ö–∏—Ä–æ–≤–∞, 86, –æ—Ñ–∏—Å 1001</span>
                        </div>
                    </div>
                </div>

                <!-- –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã -->
                <div class="filter-group">
                    <div class="filter-header">
                        <div class="filter-title">‚è∞ –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã</div>
                    </div>
                    <div class="contact-info-box">
                        <div class="contact-info-line">
                            <span class="contact-info-icon">üìÖ</span>
                            <span>–ü–Ω-–ü—Ç: 9:00 - 18:00</span>
                        </div>
                        <div class="contact-info-line">
                            <span class="contact-info-icon">üèñÔ∏è</span>
                            <span>–°–±-–í—Å: –≤—ã—Ö–æ–¥–Ω–æ–π</span>
                        </div>
                    </div>
                </div>

                <div class="modal-actions">
                    <button class="btn btn-primary" 
                            style="flex: 1;"
                            data-action="close-contacts">
                        –ó–∞–∫—Ä—ã—Ç—å
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–π—Ç–∏–Ω–≥–∞ -->
    <div class="modal" 
         id="rating-modal"
         role="dialog"
         aria-modal="true"
         aria-labelledby="rating-modal-title">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="rating-modal-title">–†–µ–π—Ç–∏–Ω–≥ –†–ê –≠–∫—Å–ø–µ—Ä—Ç</h2>
                <button class="modal-close" 
                        aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
            </div>
            <div class="modal-body">
                <div class="modal-section">
                    <h3 class="modal-section-title">‚≠ê 30 –º–µ—Å—Ç–æ –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ</h3>
                    <div class="modal-section-content">
                        <p><strong>–ö–§–õ –∑–∞–Ω–∏–º–∞–µ—Ç 30 –º–µ—Å—Ç–æ</strong> –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ –†–ê –≠–∫—Å–ø–µ—Ä—Ç –ø–æ –æ–±—ä–µ–º—É –Ω–æ–≤–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞ –≤ –ª–∏–∑–∏–Ω–≥–µ –∑–∞ 9 –º–µ—Å—è—Ü–µ–≤ 2022 –≥–æ–¥–∞.</p>
                        <p>–≠—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –Ω–∞—à –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∏–∑–º –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∫–∞–∫ –ª–∏–∑–∏–Ω–≥–æ–≤–æ–π –∫–æ–º–ø–∞–Ω–∏–∏.</p>
                    </div>
                </div>

                <div class="modal-section">
                    <h3 class="modal-section-title">üèÜ –ù–∞—à–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
                    <div class="modal-section-content">
                        <p>‚Ä¢ –ë–æ–ª–µ–µ 10 –ª–µ—Ç –Ω–∞ —Ä—ã–Ω–∫–µ –ª–∏–∑–∏–Ω–≥–∞</p>
                        <p>‚Ä¢ 60+ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π</p>
                        <p>‚Ä¢ 4 –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–µ—Ö–Ω–∏–∫–∏</p>
                        <p>‚Ä¢ –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –ª–∏–∑–∏–Ω–≥–∞</p>
                    </div>
                </div>

                <div class="modal-actions">
                    <a href="https://raexpert.ru/rankingtable/leasing/9m2022/main/" 
                       target="_blank" 
                       rel="noopener noreferrer"
                       class="btn btn-primary" 
                       style="text-decoration: none; display: flex; align-items: center; justify-content: center;">
                        üåê –°–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–π—Ç–∏–Ω–≥
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è -->
    <div class="modal" 
         id="add-ad-modal"
         role="dialog"
         aria-modal="true"
         aria-labelledby="add-ad-modal-title">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="add-ad-modal-title">–†–∞–∑–º–µ—Å—Ç–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</h2>
                <button class="modal-close" 
                        aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
            </div>
            <div class="filters-content">
                <form id="ad-form" class="ad-form">
                    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <div class="filter-title">–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="ad-title">
                                <span class="label-icon">‚úèÔ∏è</span>
                                –ó–∞–≥–æ–ª–æ–≤–æ–∫ <span class="required">*</span>
                            </label>
                            <input type="text"
                                   id="ad-title"
                                   name="ad-title"
                                   class="form-input"
                                   placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä CAT 345"
                                   maxlength="100"
                                   required>
                        </div>

                        <div class="form-row-2">
                            <div class="form-group">
                                <label for="ad-category">
                                    <span class="label-icon">üìÇ</span>
                                    –ö–∞—Ç–µ–≥–æ—Ä–∏—è <span class="required">*</span>
                                </label>
                                <select id="ad-category" name="ad-category" class="form-select" required>
                                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                                    <option value="spec">üöú –°–ø–µ—Ü—Ç–µ—Ö–Ω–∏–∫–∞</option>
                                    <option value="truck">üöõ –ì—Ä—É–∑–æ–≤–æ–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç</option>
                                    <option value="passenger">üöó –õ–µ–≥–∫–æ–≤–æ–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å</option>
                                    <option value="equipment">‚öôÔ∏è –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="ad-year">
                                    <span class="label-icon">üìÖ</span>
                                    –ì–æ–¥ –≤—ã–ø—É—Å–∫–∞
                                </label>
                                <input type="number"
                                       id="ad-year"
                                       name="ad-year"
                                       class="form-input"
                                       placeholder="2022"
                                       min="1900"
                                       max="2025">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="ad-description">
                                <span class="label-icon">üìÑ</span>
                                –û–ø–∏—Å–∞–Ω–∏–µ <span class="required">*</span>
                            </label>
                            <textarea id="ad-description"
                                      name="ad-description"
                                      class="form-textarea"
                                      placeholder="–û–ø–∏—à–∏—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏, –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—é, –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏..."
                                      maxlength="2000"
                                      rows="4"
                                      required></textarea>
                            <div class="textarea-counter">
                                <span id="char-count">0</span> / 2000
                            </div>
                        </div>
                    </div>

                    <!-- –¶–µ–Ω–∞ –∏ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <div class="filter-title">–¶–µ–Ω–∞ –∏ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</div>
                        </div>

                        <div class="form-row-2">
                            <div class="form-group">
                                <label for="ad-price">
                                    <span class="label-icon">üí∞</span>
                                    –¶–µ–Ω–∞, ‚ÇΩ <span class="required">*</span>
                                </label>
                                <input type="number" 
                                       id="ad-price" 
                                       class="form-input" 
                                       placeholder="15 000 000"
                                       min="0"
                                       required>
                            </div>
                            
                            <div class="form-group">
                                <label for="ad-location">
                                    <span class="label-icon">üìç</span>
                                    –†–µ–≥–∏–æ–Ω/–ì–æ—Ä–æ–¥
                                </label>
                                <div class="select-container">
                                    <select class="select-dropdown" 
                                            id="ad-location"
                                            aria-label="–í—ã–±–æ—Ä —Ä–µ–≥–∏–æ–Ω–∞">
                                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω</option>
                                        <option value="–ú–æ—Å–∫–≤–∞">–ú–æ—Å–∫–≤–∞</option>
                                        <option value="–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥">–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥</option>
                                        <option value="–ê–ª—Ç–∞–π—Å–∫–∏–π –∫—Ä–∞–π">–ê–ª—Ç–∞–π—Å–∫–∏–π –∫—Ä–∞–π</option>
                                        <option value="–ê–º—É—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ê–º—É—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–ê—Å—Ç—Ä–∞—Ö–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ê—Å—Ç—Ä–∞—Ö–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–ë–µ–ª–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ë–µ–ª–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–ë—Ä—è–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ë—Ä—è–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–í–ª–∞–¥–∏–º–∏—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–í–ª–∞–¥–∏–º–∏—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–í–æ–ª–≥–æ–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–í–æ–ª–≥–æ–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–í–æ–ª–æ–≥–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–í–æ–ª–æ–≥–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–í–æ—Ä–æ–Ω–µ–∂—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–í–æ—Ä–æ–Ω–µ–∂—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–ï–≤—Ä–µ–π—Å–∫–∞—è –ê–û">–ï–≤—Ä–µ–π—Å–∫–∞—è –ê–û</option>
                                        <option value="–ó–∞–±–∞–π–∫–∞–ª—å—Å–∫–∏–π –∫—Ä–∞–π">–ó–∞–±–∞–π–∫–∞–ª—å—Å–∫–∏–π –∫—Ä–∞–π</option>
                                        <option value="–ò–≤–∞–Ω–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ò–≤–∞–Ω–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–ò—Ä–∫—É—Ç—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ò—Ä–∫—É—Ç—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–ö–∞–±–∞—Ä–¥–∏–Ω–æ-–ë–∞–ª–∫–∞—Ä—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞">–ö–∞–±–∞—Ä–¥–∏–Ω–æ-–ë–∞–ª–∫–∞—Ä—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞</option>
                                        <option value="–ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–ö–∞–ª—É–∂—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ö–∞–ª—É–∂—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–ö–∞–º—á–∞—Ç—Å–∫–∏–π –∫—Ä–∞–π">–ö–∞–º—á–∞—Ç—Å–∫–∏–π –∫—Ä–∞–π</option>
                                        <option value="–ö–∞—Ä–∞—á–∞–µ–≤–æ-–ß–µ—Ä–∫–µ—Å—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞">–ö–∞—Ä–∞—á–∞–µ–≤–æ-–ß–µ—Ä–∫–µ—Å—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞</option>
                                        <option value="–ö–µ–º–µ—Ä–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ö–µ–º–µ—Ä–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–ö–∏—Ä–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ö–∏—Ä–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–ö–æ—Å—Ç—Ä–æ–º—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ö–æ—Å—Ç—Ä–æ–º—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π</option>
                                        <option value="–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫–∏–π –∫—Ä–∞–π">–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫–∏–π –∫—Ä–∞–π</option>
                                        <option value="–ö—É—Ä–≥–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ö—É—Ä–≥–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–ö—É—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ö—É—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–õ–∏–ø–µ—Ü–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–õ–∏–ø–µ—Ü–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–ú–∞–≥–∞–¥–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ú–∞–≥–∞–¥–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–ú—É—Ä–º–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ú—É—Ä–º–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–ù–µ–Ω–µ—Ü–∫–∏–π –ê–û">–ù–µ–Ω–µ—Ü–∫–∏–π –ê–û</option>
                                        <option value="–ù–∏–∂–µ–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ù–∏–∂–µ–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–ù–æ–≤–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ù–æ–≤–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–û–º—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–û–º—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–û—Ä–µ–Ω–±—É—Ä–≥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–û—Ä–µ–Ω–±—É—Ä–≥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–û—Ä–ª–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–û—Ä–ª–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–ü–µ–Ω–∑–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ü–µ–Ω–∑–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–ü–µ—Ä–º—Å–∫–∏–π –∫—Ä–∞–π">–ü–µ—Ä–º—Å–∫–∏–π –∫—Ä–∞–π</option>
                                        <option value="–ü—Ä–∏–º–æ—Ä—Å–∫–∏–π –∫—Ä–∞–π">–ü—Ä–∏–º–æ—Ä—Å–∫–∏–π –∫—Ä–∞–π</option>
                                        <option value="–ü—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ü—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ê–¥—ã–≥–µ—è">–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ê–¥—ã–≥–µ—è</option>
                                        <option value="–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ê–ª—Ç–∞–π">–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ê–ª—Ç–∞–π</option>
                                        <option value="–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ë–∞—à–∫–æ—Ä—Ç–æ—Å—Ç–∞–Ω">–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ë–∞—à–∫–æ—Ä—Ç–æ—Å—Ç–∞–Ω</option>
                                        <option value="–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ë—É—Ä—è—Ç–∏—è">–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ë—É—Ä—è—Ç–∏—è</option>
                                        <option value="–†–µ—Å–ø—É–±–ª–∏–∫–∞ –î–∞–≥–µ—Å—Ç–∞–Ω">–†–µ—Å–ø—É–±–ª–∏–∫–∞ –î–∞–≥–µ—Å—Ç–∞–Ω</option>
                                        <option value="–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ò–Ω–≥—É—à–µ—Ç–∏—è">–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ò–Ω–≥—É—à–µ—Ç–∏—è</option>
                                        <option value="–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–∞–ª–º—ã–∫–∏—è">–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–∞–ª–º—ã–∫–∏—è</option>
                                        <option value="–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–∞—Ä–µ–ª–∏—è">–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–∞—Ä–µ–ª–∏—è</option>
                                        <option value="–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–æ–º–∏">–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–æ–º–∏</option>
                                        <option value="–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö—Ä—ã–º">–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö—Ä—ã–º</option>
                                        <option value="–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ú–∞—Ä–∏–π –≠–ª">–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ú–∞—Ä–∏–π –≠–ª</option>
                                        <option value="–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ú–æ—Ä–¥–æ–≤–∏—è">–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ú–æ—Ä–¥–æ–≤–∏—è</option>
                                        <option value="–†–µ—Å–ø—É–±–ª–∏–∫–∞ –°–∞—Ö–∞ (–Ø–∫—É—Ç–∏—è)">–†–µ—Å–ø—É–±–ª–∏–∫–∞ –°–∞—Ö–∞ (–Ø–∫—É—Ç–∏—è)</option>
                                        <option value="–†–µ—Å–ø—É–±–ª–∏–∫–∞ –°–µ–≤–µ—Ä–Ω–∞—è –û—Å–µ—Ç–∏—è">–†–µ—Å–ø—É–±–ª–∏–∫–∞ –°–µ–≤–µ—Ä–Ω–∞—è –û—Å–µ—Ç–∏—è</option>
                                        <option value="–†–µ—Å–ø—É–±–ª–∏–∫–∞ –¢–∞—Ç–∞—Ä—Å—Ç–∞–Ω">–†–µ—Å–ø—É–±–ª–∏–∫–∞ –¢–∞—Ç–∞—Ä—Å—Ç–∞–Ω</option>
                                        <option value="–†–µ—Å–ø—É–±–ª–∏–∫–∞ –¢—ã–≤–∞">–†–µ—Å–ø—É–±–ª–∏–∫–∞ –¢—ã–≤–∞</option>
                                        <option value="–†–µ—Å–ø—É–±–ª–∏–∫–∞ –•–∞–∫–∞—Å–∏—è">–†–µ—Å–ø—É–±–ª–∏–∫–∞ –•–∞–∫–∞—Å–∏—è</option>
                                        <option value="–†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–†—è–∑–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–†—è–∑–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–°–∞–º–∞—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–°–∞–º–∞—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–°–∞—Ä–∞—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–°–∞—Ä–∞—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–°–∞—Ö–∞–ª–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–°–∞—Ö–∞–ª–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–°–≤–µ—Ä–¥–ª–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–°–≤–µ—Ä–¥–ª–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å">–°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å</option>
                                        <option value="–°–º–æ–ª–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–°–º–æ–ª–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–°—Ç–∞–≤—Ä–æ–ø–æ–ª—å—Å–∫–∏–π –∫—Ä–∞–π">–°—Ç–∞–≤—Ä–æ–ø–æ–ª—å—Å–∫–∏–π –∫—Ä–∞–π</option>
                                        <option value="–¢–∞–º–±–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–¢–∞–º–±–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–¢–≤–µ—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–¢–≤–µ—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–¢–æ–º—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–¢–æ–º—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–¢—É–ª—å—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–¢—É–ª—å—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–¢—é–º–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–¢—é–º–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–£–¥–º—É—Ä—Ç—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞">–£–¥–º—É—Ä—Ç—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞</option>
                                        <option value="–£–ª—å—è–Ω–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–£–ª—å—è–Ω–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–•–∞–±–∞—Ä–æ–≤—Å–∫–∏–π –∫—Ä–∞–π">–•–∞–±–∞—Ä–æ–≤—Å–∫–∏–π –∫—Ä–∞–π</option>
                                        <option value="–•–∞–Ω—Ç—ã-–ú–∞–Ω—Å–∏–π—Å–∫–∏–π –ê–û">–•–∞–Ω—Ç—ã-–ú–∞–Ω—Å–∏–π—Å–∫–∏–π –ê–û</option>
                                        <option value="–ß–µ–ª—è–±–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ß–µ–ª—è–±–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                        <option value="–ß–µ—á–µ–Ω—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞">–ß–µ—á–µ–Ω—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞</option>
                                        <option value="–ß—É–≤–∞—à—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞">–ß—É–≤–∞—à—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞</option>
                                        <option value="–ß—É–∫–æ—Ç—Å–∫–∏–π –ê–û">–ß—É–∫–æ—Ç—Å–∫–∏–π –ê–û</option>
                                        <option value="–Ø–º–∞–ª–æ-–ù–µ–Ω–µ—Ü–∫–∏–π –ê–û">–Ø–º–∞–ª–æ-–ù–µ–Ω–µ—Ü–∫–∏–π –ê–û</option>
                                        <option value="–Ø—Ä–æ—Å–ª–∞–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–Ø—Ä–æ—Å–ª–∞–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
                                    </select>
                                    <div class="select-arrow" aria-hidden="true">‚ñº</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <div class="filter-title">–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="ad-contact">
                                <span class="label-icon">üì±</span>
                                –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ <span class="required">*</span>
                            </label>
                            <input type="text" 
                                   id="ad-contact" 
                                   class="form-input" 
                                   placeholder="+7 (XXX) XXX-XX-XX –∏–ª–∏ @telegram"
                                   required>
                        </div>
                    </div>
                    
                    <!-- –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <div class="filter-title">–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏</div>
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <span class="label-icon">üì∑</span>
                                –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ (–¥–æ 10 —à—Ç.)
                            </label>
                            <div class="image-upload-area" onclick="document.getElementById('ad-images').click()">
                                <div class="image-upload-content">
                                    <div class="upload-icon">üì∏</div>
                                    <p class="upload-title">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏</p>
                                    <p class="upload-subtitle">–ù–∞–∂–º–∏—Ç–µ –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã</p>
                                    <p class="upload-hint">JPG, PNG –¥–æ 10 –ú–ë</p>
                                </div>
                            </div>
                            <input type="file" 
                                   id="ad-images" 
                                   class="form-file" 
                                   accept="image/*" 
                                   multiple>
                            <div class="image-preview-grid" id="image-preview"></div>
                        </div>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" 
                                class="btn btn-secondary" 
                                style="flex: 1;"
                                data-action="close-add-ad">
                            –û—Ç–º–µ–Ω–∞
                        </button>
                        <button type="submit" 
                                class="btn btn-primary" 
                                style="flex: 2;"
                                id="submit-ad-btn">
                            <span class="btn-icon">üöÄ</span>
                            <span>–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ "–ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è" -->
    <div class="modal" 
         id="my-ads-modal"
         role="dialog"
         aria-modal="true"
         aria-labelledby="my-ads-modal-title">
        <div class="modal-content modal-my-ads">
            <div class="modal-header modal-header-profile">
                <button class="modal-close" 
                        aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
            </div>
            <div class="ad-modal-body">
                <!-- –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
                <div class="profile-header">
                    <div class="profile-avatar">
                        <div class="avatar-placeholder">
                            <span class="avatar-icon">üë§</span>
                        </div>
                    </div>
                    <div class="profile-info">
                        <h2 class="profile-name">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
                        <p class="profile-subtitle">–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏</p>
                    </div>
                </div>

                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
                <div class="profile-stats-compact">
                    <div class="profile-stat-item">
                        <div class="stat-value-compact" id="total-ads-count">0</div>
                        <div class="stat-label-compact">–û–±—ä—è–≤–ª–µ–Ω–∏–π</div>
                    </div>
                    <div class="stat-divider"></div>
                    <div class="profile-stat-item">
                        <div class="stat-value-compact">0</div>
                        <div class="stat-label-compact">–ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤</div>
                    </div>
                    <div class="stat-divider"></div>
                    <div class="profile-stat-item">
                        <div class="stat-value-compact">0</div>
                        <div class="stat-label-compact">–í –∏–∑–±—Ä–∞–Ω–Ω–æ–º</div>
                    </div>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è -->
                <div class="profile-action-section">
                    <button class="btn btn-primary btn-create-ad" onclick="openAddAdFromProfile()">
                        <span class="btn-icon">‚ûï</span>
                        <span>–°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</span>
                    </button>
                </div>

                <!-- –°–ø–∏—Å–æ–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π -->
                <div class="profile-ads-section">
                    <h3 class="section-title">–ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</h3>
                    
                    <div id="no-ads-message" class="no-ads-message" style="display: none;">
                        <div class="no-ads-illustration">
                            <div class="no-ads-icon">üì≠</div>
                            <div class="no-ads-circle"></div>
                        </div>
                        <h4>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–π</h4>
                        <p>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –≤—ã—à–µ, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</p>
                    </div>
                    
                    <div class="my-ads-list" id="my-ads-list">
                        <!-- –û–±—ä—è–≤–ª–µ–Ω–∏—è –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –ª–∏–∑–∏–Ω–≥–∞ -->
    <div class="modal"
         id="calculator-modal"
         role="dialog"
         aria-modal="true"
         aria-labelledby="calculator-modal-title">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="calculator-modal-title">üßÆ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ª–∏–∑–∏–Ω–≥–∞</h2>
                <button class="modal-close"
                        aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
            </div>
            <div class="filters-content">
                <div class="calculator-description">
                    <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.6; margin-bottom: 20px;">
                        –†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –ø—Ä–∏–º–µ—Ä–Ω—ã–π –µ–∂–µ–º–µ—Å—è—á–Ω—ã–π –ø–ª–∞—Ç–µ–∂ –ø–æ –ª–∏–∑–∏–Ω–≥—É —Ç–µ—Ö–Ω–∏–∫–∏. –û–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è —É—Ç–æ—á–Ω—è–π—Ç–µ —É –º–µ–Ω–µ–¥–∂–µ—Ä–∞.
                    </p>
                </div>

                <!-- –°—Ç–æ–∏–º–æ—Å—Ç—å —Ç–µ—Ö–Ω–∏–∫–∏ -->
                <div class="filter-group">
                    <div class="filter-header">
                        <div class="filter-title">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å —Ç–µ—Ö–Ω–∏–∫–∏</div>
                    </div>
                    <div class="form-group">
                        <input type="number"
                               id="calc-price"
                               class="form-input"
                               placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å"
                               min="100000"
                               max="100000000"
                               step="100000"
                               value="5000000">
                        <div class="calc-value-display" id="calc-price-display">5 000 000 ‚ÇΩ</div>
                    </div>
                </div>

                <!-- –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å -->
                <div class="filter-group">
                    <div class="filter-header">
                        <div class="filter-title">üìä –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å</div>
                        <div class="filter-subtitle" id="calc-advance-percent">20%</div>
                    </div>
                    <div class="range-slider-container">
                        <input type="range"
                               class="range-slider"
                               id="calc-advance"
                               min="10"
                               max="50"
                               step="5"
                               value="20"
                               aria-valuemin="10"
                               aria-valuemax="50"
                               aria-valuenow="20">
                        <div class="range-values">
                            <span>10%</span>
                            <span>50%</span>
                        </div>
                    </div>
                    <div class="calc-value-display" id="calc-advance-display">1 000 000 ‚ÇΩ</div>
                </div>

                <!-- –°—Ä–æ–∫ –ª–∏–∑–∏–Ω–≥–∞ -->
                <div class="filter-group">
                    <div class="filter-header">
                        <div class="filter-title">üìÖ –°—Ä–æ–∫ –ª–∏–∑–∏–Ω–≥–∞</div>
                        <div class="filter-subtitle" id="calc-term-display">36 –º–µ—Å—è—Ü–µ–≤</div>
                    </div>
                    <div class="range-slider-container">
                        <input type="range"
                               class="range-slider"
                               id="calc-term"
                               min="12"
                               max="60"
                               step="6"
                               value="36"
                               aria-valuemin="12"
                               aria-valuemax="60"
                               aria-valuenow="36">
                        <div class="range-values">
                            <span>12 –º–µ—Å</span>
                            <span>60 –º–µ—Å</span>
                        </div>
                    </div>
                </div>

                <!-- –ü—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è —Å—Ç–∞–≤–∫–∞ -->
                <div class="filter-group">
                    <div class="filter-header">
                        <div class="filter-title">üí≥ –ü—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è —Å—Ç–∞–≤–∫–∞</div>
                        <div class="filter-subtitle" id="calc-rate-display">12%</div>
                    </div>
                    <div class="range-slider-container">
                        <input type="range"
                               class="range-slider"
                               id="calc-rate"
                               min="8"
                               max="20"
                               step="0.5"
                               value="12"
                               aria-valuemin="8"
                               aria-valuemax="20"
                               aria-valuenow="12">
                        <div class="range-values">
                            <span>8%</span>
                            <span>20%</span>
                        </div>
                    </div>
                </div>

                <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞ -->
                <div class="calc-results">
                    <div class="calc-result-card">
                        <div class="calc-result-label">–ï–∂–µ–º–µ—Å—è—á–Ω—ã–π –ø–ª–∞—Ç–µ–∂</div>
                        <div class="calc-result-value" id="calc-monthly-payment">147 563 ‚ÇΩ</div>
                    </div>
                    <div class="calc-result-grid">
                        <div class="calc-result-item">
                            <div class="calc-result-label-small">–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å</div>
                            <div class="calc-result-value-small" id="calc-total-advance">1 000 000 ‚ÇΩ</div>
                        </div>
                        <div class="calc-result-item">
                            <div class="calc-result-label-small">–°—É–º–º–∞ –∫ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—é</div>
                            <div class="calc-result-value-small" id="calc-finance-amount">4 000 000 ‚ÇΩ</div>
                        </div>
                        <div class="calc-result-item">
                            <div class="calc-result-label-small">–ü–µ—Ä–µ–ø–ª–∞—Ç–∞</div>
                            <div class="calc-result-value-small" id="calc-overpayment">312 268 ‚ÇΩ</div>
                        </div>
                        <div class="calc-result-item">
                            <div class="calc-result-label-small">–û–±—â–∞—è —Å—É–º–º–∞</div>
                            <div class="calc-result-value-small" id="calc-total-amount">5 312 268 ‚ÇΩ</div>
                        </div>
                    </div>
                </div>

                <div class="modal-actions">
                    <button class="btn btn-secondary"
                            style="flex: 1;"
                            data-action="close-calculator">
                        –ó–∞–∫—Ä—ã—Ç—å
                    </button>
                    <button class="btn btn-primary"
                            style="flex: 2;"
                            id="calc-send-request">
                        <span class="btn-icon">üìù</span>
                        <span>–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –¥–ª—è –¥–æ–ª–≥–æ–≥–æ —Ç–∞–ø–∞ -->
    <div class="context-menu" id="context-menu" style="display: none;">
        <div class="context-menu-item" data-action="favorite">
            <span class="context-icon">‚ù§Ô∏è</span>
            <span>–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
        </div>
        <div class="context-menu-item" data-action="compare">
            <span class="context-icon">‚öñÔ∏è</span>
            <span>–°—Ä–∞–≤–Ω–∏—Ç—å</span>
        </div>
        <div class="context-menu-item" data-action="share">
            <span class="context-icon">üîó</span>
            <span>–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</span>
        </div>
        <div class="context-menu-item" data-action="request">
            <span class="context-icon">üìù</span>
            <span>–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</span>
        </div>
    </div>

    <!-- Pull to refresh –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä -->
    <div class="pull-to-refresh" id="pull-to-refresh" style="display: none;">
        <div class="ptr-content">
            <div class="ptr-icon">‚Üì</div>
            <div class="ptr-text">–ü–æ—Ç—è–Ω–∏—Ç–µ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</div>
        </div>
    </div>

    <script src="scripts.js"></script>
    <script>
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
let tg = window.Telegram?.WebApp;
if (tg) {
    tg.expand();
    tg.enableClosingConfirmation();
    tg.setHeaderColor('#000000');
    tg.setBackgroundColor('#0A0A0A');
    
    tg.BackButton.onClick(() => {
        if (state.currentModal) {
            closeCurrentModal();
            return false;
        }
        if (state.currentView !== 'catalog') {
            showView('catalog');
            return false;
        }
        tg.close();
    });
}

// ========== –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö –ó–ê–ì–†–£–ó–ö–ò –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô ==========

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
function handleImageError(imgElement, options = {}) {
    const {
        placeholderType = 'gradient',
        backgroundColor = '#1A1A1A',
        primaryColor = '#FFD700',
        secondaryColor = '#333333',
        icon = 'üñºÔ∏è',
        text = '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ',
        showRetry = true
    } = options;

    if (imgElement.dataset.errorHandled === 'true') return;
    imgElement.dataset.errorHandled = 'true';

    const placeholder = document.createElement('div');
    placeholder.className = 'image-placeholder';
    
    // –í–ê–ñ–ù–û: –ù–∞—Å–ª–µ–¥—É–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ —Ä–∞–∑–º–µ—Ä—ã
    const parent = imgElement.parentNode;
    if (parent) {
        const parentStyle = window.getComputedStyle(parent);
        placeholder.style.width = '100%';
        placeholder.style.height = '100%';
        placeholder.style.minHeight = parentStyle.height || '240px';
    }

    placeholder.style.cssText += `
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: ${backgroundColor};
        position: relative;
        overflow: hidden;
    `;

    switch(placeholderType) {
        case 'gradient':
            placeholder.style.background = `
                linear-gradient(135deg, 
                    ${backgroundColor} 0%, 
                    ${secondaryColor} 50%, 
                    ${backgroundColor} 100%)
            `;
            placeholder.innerHTML = `
                <div style="
                    font-size: 48px;
                    opacity: 0.3;
                    animation: pulse 2s ease-in-out infinite;
                ">${icon}</div>
                <div style="
                    color: ${primaryColor};
                    font-size: 14px;
                    margin-top: 10px;
                    opacity: 0.7;
                    text-align: center;
                    padding: 0 20px;
                ">${text}</div>
            `;
            break;

        case 'icon':
            placeholder.innerHTML = `
                <div style="
                    font-size: 64px;
                    color: ${primaryColor};
                    opacity: 0.5;
                ">${icon}</div>
            `;
            break;

        case 'text':
            placeholder.innerHTML = `
                <div style="
                    color: ${primaryColor};
                    font-size: 16px;
                    font-weight: 600;
                    text-align: center;
                    padding: 20px;
                ">${text}</div>
            `;
            break;

        case 'blur':
            placeholder.style.background = backgroundColor;
            placeholder.innerHTML = `
                <div style="
                    position: absolute;
                    inset: 0;
                    background: repeating-linear-gradient(
                        45deg,
                        ${secondaryColor},
                        ${secondaryColor} 10px,
                        ${backgroundColor} 10px,
                        ${backgroundColor} 20px
                    );
                    opacity: 0.1;
                "></div>
                <div style="
                    font-size: 48px;
                    z-index: 1;
                    opacity: 0.4;
                ">${icon}</div>
            `;
            break;
    }

    if (showRetry) {
        const retryBtn = document.createElement('button');
        retryBtn.className = 'image-retry-btn';
        retryBtn.innerHTML = 'üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å';

        retryBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            retryImageLoad(imgElement, placeholder);
        });

        placeholder.appendChild(retryBtn);
    }

    if (parent) {
        placeholder.dataset.originalSrc = imgElement.src;
        placeholder.dataset.originalAlt = imgElement.alt;
        placeholder.dataset.originalClass = imgElement.className;
        
        parent.replaceChild(placeholder, imgElement);
    }

    addPlaceholderAnimations();
}

function retryImageLoad(imgElement, placeholder) {
    const originalSrc = placeholder.dataset.originalSrc;
    const originalAlt = placeholder.dataset.originalAlt;

    if (!originalSrc) return;

    placeholder.innerHTML = `
        <div style="
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 215, 0, 0.2);
            border-top-color: #FFD700;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        "></div>
        <div style="
            color: #FFD700;
            font-size: 14px;
            margin-top: 15px;
        ">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    `;

    const newImg = document.createElement('img');
    newImg.src = originalSrc + '?t=' + Date.now();
    newImg.alt = originalAlt;
    newImg.className = imgElement.className || 'product-image';
    newImg.loading = 'lazy';

    newImg.onload = () => {
        placeholder.parentNode.replaceChild(newImg, placeholder);
        newImg.onerror = () => handleImageError(newImg);
    };

    newImg.onerror = () => {
        handleImageError(newImg, {
            text: '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ',
            showRetry: true
        });
    };
}

function addPlaceholderAnimations() {
    if (document.getElementById('placeholder-animations')) return;

    const style = document.createElement('style');
    style.id = 'placeholder-animations';
    style.textContent = `
        @keyframes pulse {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.05); }
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .image-placeholder {
            animation: fadeIn 0.3s ease-in-out;
        }

        .image-retry-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3);
        }

        .image-retry-btn:active {
            transform: scale(0.95) !important;
        }
    `;
    document.head.appendChild(style);
}

function setupImageErrorHandlers(options = {}) {
    const images = document.querySelectorAll('img');
    
    images.forEach(img => {
        img.onerror = null;
        img.removeAttribute('data-error-handled');
        
        img.onerror = function() {
            handleImageError(this, options);
        };
    });
}

// ========== –£–õ–£–ß–®–ï–ù–ù–´–ô –ü–û–ò–°–ö –° FUZZY SEARCH ==========

/**
 * Fuzzy Search Algorithm - –ù–µ—á–µ—Ç–∫–∏–π –ø–æ–∏—Å–∫
 */
class FuzzySearch {
    constructor(items, options = {}) {
        this.items = items;
        this.keys = options.keys || ['title'];
        this.threshold = options.threshold || 0.4;
        this.caseSensitive = options.caseSensitive || false;
    }

    levenshteinDistance(str1, str2) {
        const matrix = [];
        for (let i = 0; i <= str2.length; i++) matrix[i] = [i];
        for (let j = 0; j <= str1.length; j++) matrix[0][j] = j;
        
        for (let i = 1; i <= str2.length; i++) {
            for (let j = 1; j <= str1.length; j++) {
                if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
                    matrix[i][j] = matrix[i - 1][j - 1];
                } else {
                    matrix[i][j] = Math.min(
                        matrix[i - 1][j - 1] + 1,
                        matrix[i][j - 1] + 1,
                        matrix[i - 1][j] + 1
                    );
                }
            }
        }
        return matrix[str2.length][str1.length];
    }

    calculateScore(query, text) {
        if (!this.caseSensitive) {
            query = query.toLowerCase();
            text = text.toLowerCase();
        }
        
        if (text === query) return 1.0;
        if (text.startsWith(query)) return 0.95;
        if (text.includes(query)) return 0.85;
        
        const queryWords = query.split(' ');
        const textWords = text.split(' ');
        let wordMatches = 0;
        
        queryWords.forEach(qWord => {
            textWords.forEach(tWord => {
                if (tWord.includes(qWord) || qWord.includes(tWord)) {
                    wordMatches++;
                }
            });
        });
        
        if (wordMatches > 0) {
            return 0.7 + (wordMatches / (queryWords.length + textWords.length)) * 0.2;
        }
        
        const distance = this.levenshteinDistance(query, text);
        const maxLength = Math.max(query.length, text.length);
        return 1 - (distance / maxLength);
    }

    search(query) {
        if (!query || query.trim() === '') {
            return this.items.map(item => ({ item, score: 1, matchedKey: null }));
        }

        const results = this.items.map(item => {
            let bestScore = 0;
            let matchedKey = null;
            
            this.keys.forEach(key => {
                const value = this.getNestedValue(item, key);
                if (value) {
                    const score = this.calculateScore(query, String(value));
                    if (score > bestScore) {
                        bestScore = score;
                        matchedKey = key;
                    }
                }
            });
            
            return { item, score: bestScore, matchedKey };
        });

        return results
            .filter(result => result.score >= this.threshold)
            .sort((a, b) => b.score - a.score);
    }

    getNestedValue(obj, key) {
        return key.split('.').reduce((o, k) => (o || {})[k], obj);
    }

    getSuggestions(query, limit = 5) {
        const results = this.search(query);
        return results
            .slice(0, limit)
            .map(result => {
                const suggestion = this.keys
                    .map(key => this.getNestedValue(result.item, key))
                    .find(val => val);
                return {
                    text: suggestion,
                    score: result.score,
                    matchedKey: result.matchedKey,
                    item: result.item
                };
            });
    }
}

/**
 * –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è –ø–æ–∏—Å–∫–∞
 */
class SearchAutocomplete {
    constructor(inputElement, options = {}) {
        this.input = inputElement;
        this.onSelect = options.onSelect || (() => {});
        this.onSearch = options.onSearch || (() => {});
        this.fuzzySearch = options.fuzzySearch;
        this.maxSuggestions = options.maxSuggestions || 5;
        this.minChars = options.minChars || 2;
        this.highlightClass = options.highlightClass || 'highlight';
        
        this.suggestionsContainer = null;
        this.selectedIndex = -1;
        
        this.init();
    }

    init() {
        this.suggestionsContainer = document.createElement('div');
        this.suggestionsContainer.className = 'search-suggestions';
        this.suggestionsContainer.style.display = 'none';
        this.suggestionsContainer.setAttribute('role', 'listbox');
        
        this.input.parentNode.style.position = 'relative';
        this.input.parentNode.appendChild(this.suggestionsContainer);
        
        this.input.setAttribute('role', 'combobox');
        this.input.setAttribute('aria-autocomplete', 'list');
        this.input.setAttribute('aria-expanded', 'false');
        
        this.input.addEventListener('input', this.handleInput.bind(this));
        this.input.addEventListener('keydown', this.handleKeydown.bind(this));
        this.input.addEventListener('blur', () => {
            setTimeout(() => this.hide(), 200);
        });
        
        document.addEventListener('click', (e) => {
            if (!this.input.contains(e.target) && !this.suggestionsContainer.contains(e.target)) {
                this.hide();
            }
        });
    }

    handleInput(e) {
        const query = e.target.value.trim();
        
        if (query.length < this.minChars) {
            this.hide();
            this.onSearch(query);
            return;
        }
        
        const suggestions = this.fuzzySearch.getSuggestions(query, this.maxSuggestions);
        
        if (suggestions.length > 0) {
            this.show(suggestions, query);
        } else {
            this.hide();
        }
        
        this.onSearch(query);
    }

    handleKeydown(e) {
        const items = this.suggestionsContainer.querySelectorAll('.suggestion-item');
        
        switch(e.key) {
            case 'ArrowDown':
                e.preventDefault();
                this.selectedIndex = Math.min(this.selectedIndex + 1, items.length - 1);
                this.updateSelection(items);
                break;
            case 'ArrowUp':
                e.preventDefault();
                this.selectedIndex = Math.max(this.selectedIndex - 1, -1);
                this.updateSelection(items);
                break;
            case 'Enter':
                e.preventDefault();
                if (this.selectedIndex >= 0 && items[this.selectedIndex]) {
                    items[this.selectedIndex].click();
                }
                break;
            case 'Escape':
                this.hide();
                break;
        }
    }

    updateSelection(items) {
        items.forEach((item, index) => {
            if (index === this.selectedIndex) {
                item.classList.add('selected');
                item.setAttribute('aria-selected', 'true');
                item.scrollIntoView({ block: 'nearest', behavior: 'smooth' });
            } else {
                item.classList.remove('selected');
                item.setAttribute('aria-selected', 'false');
            }
        });
    }

    highlightMatch(text, query) {
        if (!text || !query) return text;
        const regex = new RegExp(`(${this.escapeRegex(query)})`, 'gi');
        return text.replace(regex, `<mark class="${this.highlightClass}">$1</mark>`);
    }

    escapeRegex(str) {
        return str.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    }

    show(suggestions, query) {
        if (suggestions.length === 0) {
            this.hide();
            return;
        }

        this.selectedIndex = -1;
        
        const html = suggestions.map((suggestion, index) => {
            const highlightedText = this.highlightMatch(suggestion.text, query);
            const category = this.getCategoryName(suggestion.item.category);
            const scorePercent = Math.round(suggestion.score * 100);
            
            return `
                <div class="suggestion-item" 
                     data-index="${index}"
                     data-id="${suggestion.item.id}"
                     role="option"
                     aria-selected="false"
                     tabindex="-1">
                    <div class="suggestion-content">
                        <div class="suggestion-text">${highlightedText}</div>
                        <div class="suggestion-meta">
                            <span class="suggestion-category">${category}</span>
                            <span class="suggestion-year">${suggestion.item.year} –≥.</span>
                            <span class="suggestion-price">${this.formatPrice(suggestion.item.price)}</span>
                        </div>
                    </div>
                    <div class="suggestion-score" 
                         title="–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å ${scorePercent}%">
                        ${this.getScoreIndicator(suggestion.score)}
                    </div>
                </div>
            `;
        }).join('');

        this.suggestionsContainer.innerHTML = html;
        this.suggestionsContainer.style.display = 'block';
        this.input.setAttribute('aria-expanded', 'true');
        
        this.suggestionsContainer.querySelectorAll('.suggestion-item').forEach(item => {
            item.addEventListener('click', () => {
                const id = parseInt(item.dataset.id);
                const suggestion = suggestions.find(s => s.item.id === id);
                this.onSelect(suggestion.item);
                this.input.value = suggestion.text;
                this.hide();
            });
        });
    }

    hide() {
        this.suggestionsContainer.style.display = 'none';
        this.input.setAttribute('aria-expanded', 'false');
        this.selectedIndex = -1;
    }

    getCategoryName(category) {
        const categories = {
            'spec': '–°–ø–µ—Ü—Ç–µ—Ö–Ω–∏–∫–∞',
            'truck': '–ì—Ä—É–∑–æ–≤–æ–π',
            'car': '–õ–µ–≥–∫–æ–≤–æ–π',
            'equipment': '–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ'
        };
        return categories[category] || category;
    }

    formatPrice(price) {
        return new Intl.NumberFormat('ru-RU', {
            style: 'currency',
            currency: 'RUB',
            maximumFractionDigits: 0
        }).format(price);
    }

    getScoreIndicator(score) {
        if (score >= 0.9) return 'üü¢';
        if (score >= 0.7) return 'üü°';
        if (score >= 0.5) return 'üü†';
        return 'üî¥';
    }
}

/**
 * –ú–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–æ–∫ –≤ Telegram
 */
class TelegramLeasingRequest {
    constructor(options = {}) {
        this.tg = window.Telegram?.WebApp;
        this.botUsername = options.botUsername || 'kfl_leasing_bot';
        this.onSuccess = options.onSuccess || (() => {});
        this.onError = options.onError || (() => {});
    }

    async sendLeasingRequest(product, userData = {}) {
        if (!product) {
            console.error('Product data is required');
            this.onError('–ù–µ —É–∫–∞–∑–∞–Ω—ã –¥–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–∞');
            return;
        }

        const requestData = {
            action: 'leasing_request',
            timestamp: new Date().toISOString(),
            product: {
                id: product.id,
                title: product.title,
                category: this.getCategoryName(product.category),
                year: product.year,
                price: product.price,
                priceFormatted: this.formatPrice(product.price),
                location: product.location,
                details: product.details
            },
            user: this.getUserData(userData)
        };

        if (this.tg) {
            try {
                this.tg.HapticFeedback.notificationOccurred('success');
                this.tg.sendData(JSON.stringify(requestData));
                
                this.tg.showAlert(
                    '‚úÖ –ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!\n\n' +
                    `–¢–æ–≤–∞—Ä: ${product.title}\n` +
                    `–¶–µ–Ω–∞: ${this.formatPrice(product.price)}\n\n` +
                    '–ú–µ–Ω–µ–¥–∂–µ—Ä –ö–§–õ –õ–∏–∑–∏–Ω–≥ —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.'
                );
                
                this.onSuccess(requestData);
                console.log('Leasing request sent:', requestData);
                
            } catch (error) {
                console.error('Error sending data to Telegram:', error);
                this.fallbackRequest(product, requestData);
            }
        } else {
            this.fallbackRequest(product, requestData);
        }
    }

    fallbackRequest(product, requestData) {
        const message = 
            `–í—ã —Ö–æ—Ç–∏—Ç–µ –æ—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –ª–∏–∑–∏–Ω–≥?\n\n` +
            `üì¶ –¢–æ–≤–∞—Ä: ${product.title}\n` +
            `üìÖ –ì–æ–¥: ${product.year}\n` +
            `üí∞ –¶–µ–Ω–∞: ${this.formatPrice(product.price)}\n` +
            `üìç –†–µ–≥–∏–æ–Ω: ${product.location}\n\n` +
            `–ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å –≤–∞–º–∏ —Å–≤—è–∂–µ—Ç—Å—è –º–µ–Ω–µ–¥–∂–µ—Ä.`;

        if (confirm(message)) {
            this.saveRequestToLocalStorage(requestData);
            
            alert(
                '‚úÖ –ó–∞—è–≤–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!\n\n' +
                '–û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –ö–§–õ –õ–∏–∑–∏–Ω–≥ –≤ Telegram –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞—è–≤–∫–∏.\n\n' +
                '–ò–ª–∏ –ø–æ–∑–≤–æ–Ω–∏—Ç–µ –Ω–∞–º: +7 (XXX) XXX-XX-XX'
            );
            
            this.onSuccess(requestData);
            
            setTimeout(() => {
                if (confirm('–û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞ –ö–§–õ –õ–∏–∑–∏–Ω–≥ –≤ Telegram?')) {
                    window.open(`https://t.me/${this.botUsername}?start=request_${product.id}`, '_blank');
                }
            }, 1000);
        }
    }

    getUserData(additionalData = {}) {
        if (this.tg && this.tg.initDataUnsafe) {
            const user = this.tg.initDataUnsafe.user;
            return {
                telegram_id: user?.id,
                first_name: user?.first_name,
                last_name: user?.last_name,
                username: user?.username,
                language_code: user?.language_code,
                ...additionalData
            };
        }
        
        return {
            source: 'web',
            ...additionalData
        };
    }

    saveRequestToLocalStorage(requestData) {
        try {
            const key = 'kfl_pending_requests';
            const existing = JSON.parse(localStorage.getItem(key) || '[]');
            existing.push(requestData);
            
            if (existing.length > 10) {
                existing.shift();
            }
            
            localStorage.setItem(key, JSON.stringify(existing));
        } catch (error) {
            console.error('Error saving to localStorage:', error);
        }
    }

    getPendingRequests() {
        try {
            const key = 'kfl_pending_requests';
            return JSON.parse(localStorage.getItem(key) || '[]');
        } catch (error) {
            console.error('Error reading from localStorage:', error);
            return [];
        }
    }

    async syncPendingRequests() {
        if (!this.tg) return;

        const pending = this.getPendingRequests();
        if (pending.length === 0) return;

        console.log(`Found ${pending.length} pending requests, syncing...`);

        for (const request of pending) {
            try {
                this.tg.sendData(JSON.stringify(request));
                await new Promise(resolve => setTimeout(resolve, 500));
            } catch (error) {
                console.error('Error syncing request:', error);
            }
        }

        localStorage.removeItem('kfl_pending_requests');
        
        this.tg.showAlert(
            `‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –∑–∞—è–≤–æ–∫: ${pending.length}\n\n` +
            '–ú–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.'
        );
    }

    formatPrice(price) {
        return new Intl.NumberFormat('ru-RU', {
            style: 'currency',
            currency: 'RUB',
            maximumFractionDigits: 0
        }).format(price);
    }

    getCategoryName(category) {
        const categories = {
            'spec': '–°–ø–µ—Ü—Ç–µ—Ö–Ω–∏–∫–∞',
            'truck': '–ì—Ä—É–∑–æ–≤–æ–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç',
            'car': '–õ–µ–≥–∫–æ–≤–æ–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å',
            'equipment': '–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ'
        };
        return categories[category] || category;
    }
}

// ========== –ú–ï–ù–ï–î–ñ–ï–† –û–ë–™–Ø–í–õ–ï–ù–ò–ô ==========

/**
 * –ú–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
 */
class AdvertisementManager {
    constructor() {
        this.adsKey = 'kfl_user_ads';
        this.ads = this.loadAds();
    }

    loadAds() {
        try {
            const saved = localStorage.getItem(this.adsKey);
            return saved ? JSON.parse(saved) : [];
        } catch (error) {
            console.error('Error loading ads:', error);
            return [];
        }
    }

    saveAds() {
        try {
            localStorage.setItem(this.adsKey, JSON.stringify(this.ads));
        } catch (error) {
            console.error('Error saving ads:', error);
        }
    }

    async createAd(adData) {
        const newAd = {
            id: Date.now(),
            ...adData,
            createdAt: new Date().toISOString(),
            status: 'pending', // pending, active, rejected
            views: 0,
            likes: 0
        };

        this.ads.push(newAd);
        this.saveAds();
        
        // –ï—Å–ª–∏ –µ—Å—Ç—å Telegram, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω—É
        if (tg && tg.initDataUnsafe?.user) {
            await this.notifyAdmin(newAd);
        }
        
        return newAd;
    }

    getUserAds() {
        return this.ads.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
    }

    updateAd(id, updates) {
        const index = this.ads.findIndex(ad => ad.id === id);
        if (index !== -1) {
            this.ads[index] = { ...this.ads[index], ...updates };
            this.saveAds();
            return true;
        }
        return false;
    }

    deleteAd(id) {
        const index = this.ads.findIndex(ad => ad.id === id);
        if (index !== -1) {
            this.ads.splice(index, 1);
            this.saveAds();
            return true;
        }
        return false;
    }

    async notifyAdmin(ad) {
        try {
            if (tg && tg.initDataUnsafe?.user) {
                const user = tg.initDataUnsafe.user;

                // –ü–æ–¥–≥–æ—Ç–æ–≤–∏–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –±–æ—Ç—É
                const adForBot = {
                    title: ad.title,
                    category: ad.category,
                    price: ad.price,
                    year: ad.year,
                    location: ad.location,
                    description: ad.details,  // –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–ª–∏ details -> description
                    contact: ad.contact,
                    images_count: ad.images ? ad.images.length : 0,
                    created_at: ad.createdAt
                };

                const message = {
                    action: 'new_advertisement',
                    ad: adForBot,
                    user: {
                        id: user.id,
                        first_name: user.first_name,
                        last_name: user.last_name,
                        username: user.username
                    }
                };

                tg.sendData(JSON.stringify(message));
            }
        } catch (error) {
            console.error('Error notifying admin:', error);
        }
    }

    formatDate(dateString) {
        const date = new Date(dateString);
        return date.toLocaleDateString('ru-RU', {
            day: 'numeric',
            month: 'long',
            year: 'numeric'
        });
    }

    getStatusText(status) {
        const statuses = {
            'pending': '–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏',
            'active': '–ê–∫—Ç–∏–≤–Ω–æ',
            'rejected': '–û—Ç–∫–ª–æ–Ω–µ–Ω–æ'
        };
        return statuses[status] || status;
    }

    getCategoryName(category) {
        const categories = {
            'spec': '–°–ø–µ—Ü—Ç–µ—Ö–Ω–∏–∫–∞',
            'truck': '–ì—Ä—É–∑–æ–≤–æ–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç',
            'passenger': '–õ–µ–≥–∫–æ–≤–æ–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å',
            'equipment': '–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ'
        };
        return categories[category] || category;
    }

    getAdsCount() {
        return this.ads.length;
    }

    getPendingCount() {
        return this.ads.filter(ad => ad.status === 'pending').length;
    }
}

// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
let fuzzySearchInstance = null;
let autocompleteInstance = null;
let telegramRequestManager = null;
let advertisementManager = null;

// ========== –ö–û–ù–ï–¶ –û–ë–†–ê–ë–û–¢–ö–ò –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô ==========

// –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
const APP_CONFIG = {
    ITEMS_PER_PAGE: 12,
    DEFAULT_MAX_PRICE: 100000000,
    YEAR_RANGE: { min: 2000, max: 2025 },
    DEBOUNCE_DELAY: 300
};

// –î–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (–≤—Å–µ 60 –ø–æ–∑–∏—Ü–∏–π)
const productsData = [
    // –°–ø–µ—Ü—Ç–µ—Ö–Ω–∏–∫–∞ (1-24)
    {
        id: 1,
        title: "–≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä Hyundai HX520L",
        year: 2022,
        category: "spec",
        image: "https://s6.auto.drom.ru/photo/v2/LdcuKYRk5-akTTO6a-0_P-dBDlFL4Q2CkgHHh5ae_uH8KTQWONbbBzI1IlLsk-MWyrcefbXAXDfxYMST/gen1200.jpg",
        details: "–ò—Å–ø—Ä–∞–≤–µ–Ω, –Ω–∞—Ä–∞–±–æ—Ç–∫–∞ 13 500 —á–∞—Å–æ–≤, –∫–æ–≤—à 3 –º¬≥",
        location: "–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫–∞—è –æ–±–ª.",
        price: 15500000,
        hours: "13 500 —á–∞—Å–æ–≤",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://auto.drom.ru/spec/iskitim/hyundai/hx520l/excavator/mining/724764609.html",
        discount: false
    },
    {
        id: 2,
        title: "–≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä CATERPILLAR 345GC",
        year: 2021,
        category: "spec",
        image: "https://10.img.avito.st/image/1/1.psxa2ba4CiVsbogoGr_-yl94CCPkeIgzbHUIJ-pwAi_s.qUzbnzUxfj1PM4YrN_h-psLcupQgfSNAMAqOcDVwXi4",
        details: "–ù–∞—Ä–∞–±–æ—Ç–∫–∞ 17 500 —á, –∫–æ–≤—à 2.7 –º¬≥, –∞—Ä–∫—Ç–∏—á–µ—Å–∫–∏–π –ø–∞–∫–µ—Ç",
        location: "–≥. –ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫",
        price: 7800000,
        hours: "17 500 —á–∞—Å–æ–≤",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://www.avito.ru/kiselevsk/gruzoviki_i_spetstehnika/gusenichnyy_ekskavator_cat_345_gc_2021_4773696277",
        discount: false
    },
    {
        id: 3,
        title: "–≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä SDIG E6400F",
        year: 2023,
        category: "spec",
        image: "https://s6.auto.drom.ru/photo/v2/LmLV-8g1rl2K83vt2ViYZdftBYgIHzwQ5N4dVRPOryd1vNgaG_fLbaFuN-Et-T54C_oH4Y96lRsXZXAC/gen1200.jpg",
        details: "–ù–∞—Ä–∞–±–æ—Ç–∫–∞ 8 870 —á–∞—Å–æ–≤, –æ–±—ä–µ–º –∫–æ–≤—à–∞ 2.2 –º¬≥",
        location: "–≥. –°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å",
        price: 15500000,
        hours: "8 870 —á–∞—Å–æ–≤",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://auto.drom.ru/spec/simferopol/sdlg/e6400f/excavator/universal/130847541.html",
        discount: false
    },
    {
        id: 4,
        title: "–≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä SANY SY375H",
        year: 2022,
        category: "spec",
        image: "https://s6.auto.drom.ru/photo/v2/2vY4_QlmLDzIxhjogw4cyoP1aI7e-Ks97r6IHAHHWDeERUY-KjNPqBKjMtCFfG6tq5u7u_wD3PV08BDz/gen1200.jpg",
        details: "–ù–∞—Ä–∞–±–æ—Ç–∫–∞ 13 200 —á–∞—Å–æ–≤, –æ–±—ä–µ–º –∫–æ–≤—à–∞ 1.9 –º¬≥",
        location: "–≥. –°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å",
        price: 12500000,
        hours: "13 200 —á–∞—Å–æ–≤",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://auto.drom.ru/spec/simferopol/sany/sy375h/excavator/universal/705854193.html",
        discount: false
    },
    {
        id: 5,
        title: "–≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä HYUNDAI HX300 SJ",
        year: 2021,
        category: "spec",
        image: "https://40.img.avito.st/image/1/1.RaSH8La46U2xR2tAgYFx4pFR60s5UWtbsVzrTzdZ4Ucx.3Lp3xNS5WnKXXuSEfCxXonQ7AYTBECpvyvYapH6yw6M",
        details: "–ù–∞—Ä–∞–±–æ—Ç–∫–∞ 7 780 —á–∞—Å–æ–≤, –∫–æ–≤—à 1.5 –º¬≤",
        location: "–ö–µ–º–µ—Ä–æ–≤—Å–∫–∞—è –æ–±–ª.",
        price: 23500000,
        hours: "7 780 —á–∞—Å–æ–≤",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://www.avito.ru/taksimo/gruzoviki_i_spetstehnika/gusenichnyy_ekskavator_hyundai_hx300sl_2021_4645927753",
        discount: false
    },
    {
        id: 6,
        title: "–≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä-–ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç–µ–ª—å HITACHI ZX330LC-5G",
        year: 2021,
        category: "spec",
        image: "https://s6.auto.drom.ru/photo/v2/pkaAb8XNteXUYM4p7V3RgX2OkShxPy9YJtAV4lCxZTtBfSik5DdhnAdGizX_DWjd-muXOCq3fA8Ptphn/gen1200.jpg",
        details: "–ù–∞—Ä–∞–±–æ—Ç–∫–∞ 1863 —á–∞—Å–∞",
        location: "–ö–µ–º–µ—Ä–æ–≤—Å–∫–∞—è –æ–±–ª.",
        price: 23500000,
        hours: "1 863 —á–∞—Å–∞",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://auto.drom.ru/spec/prokopyevsk/hitachi/zx330lc/excavator/mining/321180670.html",
        discount: false
    },
    {
        id: 7,
        title: "–≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä SANY SY330H",
        year: 2024,
        category: "spec",
        image: "https://00.img.avito.st/image/1/1.V3tDwba4-5J1dnmfYfxzSx9g-ZT9YHmEdW35kPNo85j1.6Lg2vpjV0XmKl0YEHQZwAS5ID3gTSqvP-1yl1Gt3WVQ",
        details: "–°–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–æ–≤–æ–≥–æ, –Ω–∞—Ä–∞–±–æ—Ç–∫–∞ 25 —á–∞—Å–æ–≤",
        location: "–≥. –°—É—Ä–≥—É—Ç",
        price: 14500000,
        hours: "25 —á–∞—Å–æ–≤",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://www.avito.ru/surgut/gruzoviki_i_spetstehnika/gusenichnyy_ekskavator_sany_sy330h_2024_7781380858",
        discount: false
    },
    {
        id: 8,
        title: "–≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä SANY SY330H",
        year: 2022,
        category: "spec",
        image: "https://10.img.avito.st/image/1/1.mONAcra4NAp2xbYHfEjhhQLTNgz-07Ycdt42CPDbPAD2.n4R8PsxrJuBuc2byIGaRaCSMAEz_fqNR2pzHQyp_vRo",
        details: "–°–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–æ–≤–æ–≥–æ, –Ω–∞—Ä–∞–±–æ—Ç–∫–∞ 25 —á–∞—Å–æ–≤",
        location: "–≥. –°—É—Ä–≥—É—Ç",
        price: 14500000,
        hours: "25 —á–∞—Å–æ–≤",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://www.avito.ru/surgut/gruzoviki_i_spetstehnika/gusenichnyy_ekskavator_sany_sy330h_2022_7877667793",
        discount: false
    },
    {
        id: 9,
        title: "–ë—É—Ä–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –õ–ò–¢ SD30H",
        year: 2024,
        category: "spec",
        image: "https://s6.auto.drom.ru/photo/v2/9rkqwzc03AHWrfJ9heISA87W-OhfZXwTUkZSeewtMgmGRP-vgqovSXxvGiXP6xGhflqEwEfwt4lzANbu/gen1200.jpg",
        details: "–ó–∏–º–Ω–µ–µ –æ—Å–Ω–∞—â–µ–Ω–∏–µ, –¥–∏–∞–º–µ—Ç—Ä —Ç—Ä—É–±—ã 1500 –º–º",
        location: "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ë—É—Ä—è—Ç–∏—è",
        price: 13500000,
        hours: "-",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://auto.drom.ru/spec/taksimo/jint/jint/building/drilling/817458334.html",
        discount: false
    },
    {
        id: 10,
        title: "–ë—É—Ä–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ ATLAS COPCO",
        year: 2013,
        category: "spec",
        image: "https://90.img.avito.st/image/1/1.ljn3lba4OtDBIrjd18fjcPs0ONZJNLjGwTk40kc8MtpB.1EldBk9ZpIhZiYup9tO0Gg7CUQD2GsqGxC8v8Lv_fyI",
        details: "–î–≤–∏–≥–∞—Ç–µ–ª—å Caterpillar C15, –º–æ—â–Ω–æ—Å—Ç—å 404 –∫–í—Ç",
        location: "–ö–µ–º–µ—Ä–æ–≤—Å–∫–∞—è –æ–±–ª.",
        price: 105000000,
        hours: "-",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://www.avito.ru/kemerovskaya_oblast_mezhdurechensk/gruzoviki_i_spetstehnika/drobilno-sortirovochnoe_oborudovanie_atlas_copco_dml_2013_4869827122",
        discount: false
    },
    {
        id: 11,
        title: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –î–ù–ë DDW36/13",
        year: 2025,
        category: "spec",
        image: "https://s6.auto.drom.ru/photo/v2/I33S9Y861kjrO9ZY1DW8cwa-AfqQ1njLOwHbKVn6wdvzufYwHW1uo4ipcZBqWgFbqR-YSbZBz2__OCaT/gen1200.jpg",
        details: "–ù–∞—Ä–∞–±–æ—Ç–∫–∞ ??? —á–∞—Å–æ–≤, –¥–≤–∏–≥–∞—Ç–µ–ª—å CUMMINS 208 –ª.—Å.",
        location: "–≥. –ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫",
        price: 95000000,
        hours: "-",
        engine: "CUMMINS 208 –ª.—Å.",
        link: "https://auto.drom.ru/spec/novokuznetsk/dw-txs/ddw-36-13/building/drilling/797382555.html",
        discount: false
    },
    {
        id: 12,
        title: "–≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä-–ø–æ–≥—Ä—É–∑—á–∏–∫ CUKUROVA 884",
        year: 2021,
        category: "spec",
        image: "https://s6.auto.drom.ru/photo/v2/90uKjONaW9_ltcU_8gpdIyddrbXDQGrWzQkpGeb09t2qhUW49yCxaGIg8hSSXfTqf_iKPyZyPyFkb69V/gen1200.jpg",
        details: "–ù–∞—Ä–∞–±–æ—Ç–∫–∞ 6 000 —á–∞—Å–æ–≤, –¥–≤–∏–≥–∞—Ç–µ–ª—å Perkins 101 –ª.—Å.",
        location: "–≥. –ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫",
        price: 4000000,
        hours: "6 000 —á–∞—Å–æ–≤",
        engine: "Perkins 101 –ª.—Å.",
        link: "https://auto.drom.ru/spec/novokuznetsk/cukurova/884/excavator/loader/480537352.html",
        discount: false
    },
    {
        id: 13,
        title: "–≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä-–ø–æ–≥—Ä—É–∑—á–∏–∫ Lugong CL6777A",
        year: 2023,
        category: "spec",
        image: "https://s6.auto.drom.ru/photo/v2/XMEdei0mB_rBVH8n-1fFGFcIq0kOjp8cuBCTlnFZ-5JPKdtk8cdPRhn4ElFsIfFwWfqfLVElnQBkiBxn/gen1200.jpg",
        details: "–ù–∞—Ä–∞–±–æ—Ç–∫–∞ 1 500-1 700 —á–∞—Å–æ–≤, 4 –µ–¥–∏–Ω–∏—Ü—ã",
        location: "–≥. –†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É",
        price: 5600000,
        hours: "1 500-1 700 —á–∞—Å–æ–≤",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://auto.drom.ru/spec/simferopol/liugong/777a/excavator/loader/724395333.html",
        discount: false
    },
    {
        id: 14,
        title: "–ö–∞—Ç–æ–∫ –¥–æ—Ä–æ–∂–Ω—ã–π Lugong CL66616E",
        year: 2023,
        category: "spec",
        image: "https://s6.auto.drom.ru/photo/v2/wshUOGmcYBOl6IT_Rg9Z3AjQ1w4mXTpVZgjubQuBfM5P5Eak5lc2KvERWTR2tKX4mDHoMFh-pppQr6BQ/gen1200.jpg",
        details: "–ù–∞—Ä–∞–±–æ—Ç–∫–∞ 1 352 —á–∞—Å–∞, –º–∞—Å—Å–∞ 16 800 –∫–≥",
        location: "–≥. –†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É",
        price: 5600000,
        hours: "1 352 —á–∞—Å–∞",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://auto.drom.ru/spec/rostov-na-donu/liugong/clg-6616e/building/roller/339623295.html",
        discount: false
    },
    {
        id: 15,
        title: "–í–∏–ª–æ—á–Ω—ã–π –ø–æ–≥—Ä—É–∑—á–∏–∫ Heli CPC035",
        year: 2023,
        category: "spec",
        image: "https://50.img.avito.st/image/1/1.sUPxm7a4HarHLJ-nn_XScrU6H6xPOp-8xzcfqEEyFaBH.6AhVF-y93W8Hb0Sfs3nIR4Z_pyNLIuFXnqwKH6FERlk",
        details: "–ì—Ä—É–∑–æ–ø–æ–¥—ä—ë–º–Ω–æ—Å—Ç—å 3 500 –∫–≥, –Ω–∞—Ä–∞–±–æ—Ç–∫–∞ 84 —á–∞—Å–∞",
        location: "–≥. –ú–æ—Å–∫–≤–∞",
        price: 2150000,
        hours: "84 —á–∞—Å–∞",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://www.avito.ru/odintsovo/gruzoviki_i_spetstehnika/vilochnyy_pogruzchik_heli_cpcd35_2023_7813114421",
        discount: false
    },
    {
        id: 16,
        title: "–í–∏–ª–æ—á–Ω—ã–π –ø–æ–≥—Ä—É–∑—á–∏–∫ Heli CPC030",
        year: 2023,
        category: "spec",
        image: "https://80.img.avito.st/image/1/1.M9PG07a4nzrwZB03rItaz5xynTx4ch0s8H-dOHZ6lzBw.rJuKfwH1Tct31u1NR3JWRUhgy5CV3eKDQnBkLFIRuLc",
        details: "–ì—Ä—É–∑–æ–ø–æ–¥—ä—ë–º–Ω–æ—Å—Ç—å 3 000 –∫–≥, –Ω–∞—Ä–∞–±–æ—Ç–∫–∞ 599 —á–∞—Å–æ–≤",
        location: "–≥. –ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫",
        price: 1800000,
        hours: "599 —á–∞—Å–æ–≤",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://www.avito.ru/odintsovo/gruzoviki_i_spetstehnika/vilochnyy_pogruzchik_heli_cpcd30_2023_7813822783",
        discount: false
    },
    {
        id: 17,
        title: "–ê–≤—Ç–æ–≥—Ä–µ–π–¥–µ—Ä LiuGong 4260D",
        year: 2024,
        category: "spec",
        image: "https://s6.auto.drom.ru/photo/v2/tQF6SJooebC4oSmPRV8xmrQoHmxhaiC_8Uy8PfaoyUGN__mDECIS50_NvrD4n-EFpPhKh5gxLJ6UHQ2b/gen1200.jpg",
        details: "–ù–∞—Ä–∞–±–æ—Ç–∫–∞ 7 500 —á–∞—Å–æ–≤, –¥–≤–∏–≥–∞—Ç–µ–ª—å Cummins 240 –ª.—Å.",
        location: "–≥. –ü—Ä–æ–∫–æ–ø—å–µ–≤—Å–∫",
        price: 16000000,
        hours: "7 500 —á–∞—Å–æ–≤",
        engine: "Cummins 240 –ª.—Å.",
        link: "https://auto.drom.ru/spec/prokopyevsk/liugong/4260d/building/road-scraper/789666847.html",
        discount: false
    },
    {
        id: 18,
        title: "–ê–≤—Ç–æ–≥—Ä–µ–π–¥–µ—Ä LiuGong 4260D",
        year: 2023,
        category: "spec",
        image: "https://s6.auto.drom.ru/photo/v2/_7_jzi96mKI7Cmv9WclB8HmTImbzZaRIszIZcmOCxa4poyOY-DlBkVLtm68PpvdKw-jCN3aSWw6zxTSl/gen1200.jpg",
        details: "–ù–∞—Ä–∞–±–æ—Ç–∫–∞ 10 800 —á–∞—Å–æ–≤, –¥–≤–∏–≥–∞—Ç–µ–ª—å Cummins 260 –ª.—Å.",
        location: "–≥. –ü—Ä–æ–∫–æ–ø—å–µ–≤—Å–∫",
        price: 13500000,
        hours: "10 800 —á–∞—Å–æ–≤",
        engine: "Cummins 260 –ª.—Å.",
        link: "https://auto.drom.ru/spec/prokopyevsk/liugong/4260d/building/road-scraper/694153839.html",
        discount: false
    },
    {
        id: 19,
        title: "–•–∞—Ä–≤–µ—Å—Ç–µ—Ä Ponsse Bear BW",
        year: 2021,
        category: "spec",
        image: "https://s6.auto.drom.ru/photo/v2/jlfwcbP5btOACB0lpFdhGXJ7XlGHftQv6QQcDAymQBEZbKv6cVJi8uaUpIhweLMXC8GkmIT4iRpiCFHY/gen1200.jpg",
        details: "–ù–∞—Ä–∞–±–æ—Ç–∫–∞ 15 000 —á–∞—Å–æ–≤, —Ç–µ—Ö–Ω–∏–∫–∞ –≤ –æ—Ç–ª–∏—á–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏",
        location: "–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫–∏–π –∫—Ä–∞–π",
        price: 54000000,
        hours: "15 000 —á–∞—Å–æ–≤",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://auto.drom.ru/spec/bolshaya-murta/ponsse/bear/forestry/harvester/525770063.html",
        discount: false
    },
    {
        id: 20,
        title: "–§–æ—Ä–≤–∞—Ä–¥–µ—Ä KOMATSU 895 BWD",
        year: 2019,
        category: "spec",
        image: "https://50.img.avito.st/image/1/1.f-qdb7a40wOrxhEG7zookMXO0QUjzlEL68vRAS3G2wkr.F173GAbVkl_SuJHuUz0-ySQcqYKuNRMhSFN-1dG-mi0",
        details: "–ù–∞—Ä–∞–±–æ—Ç–∫–∞ 11 026 —á–∞—Å–æ–≤, –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–∏",
        location: "–≥. –ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫",
        price: 27000000,
        hours: "11 026 —á–∞—Å–æ–≤",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://www.avito.ru/krasnoyarsk/gruzoviki_i_spetstehnika/forvarder_komatsu_895_8wd_7813747946",
        discount: false
    },
    {
        id: 21,
        title: "–•–∞—Ä–≤–µ—Å—Ç–µ—Ä KOMATSU 951 GWD",
        year: 2019,
        category: "spec",
        image: "https://30.img.avito.st/image/1/1.JGHj7ba4iIjVWgqFp7FeELtMio5dTAqe1UGKilNEgIJV.fyFIwBxFBstFgT2NvF-cdC2MaUQU53xGh5s7miCAKAM",
        details: "–ù–∞—Ä–∞–±–æ—Ç–∫–∞ 11 800 —á–∞—Å–æ–≤, –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ö–∞—Ä–≤–µ—Å—Ç–µ—Ä–Ω–∞—è –≥–æ–ª–æ–≤–∫–∞",
        location: "–≥. –ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫",
        price: 27000000,
        hours: "11 800 —á–∞—Å–æ–≤",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://www.avito.ru/krasnoyarsk/gruzoviki_i_spetstehnika/harvester_komatsu_951_6wd_7813113209",
        discount: false
    },
    {
        id: 22,
        title: "–ö–∞—Ä—å–µ—Ä–Ω—ã–π —Å–∞–º–æ—Å–≤–∞–ª SANY SXT105S",
        year: 2023,
        category: "spec",
        image: "https://s6.auto.drom.ru/photo/v2/AERiU95SmokPktcQwn-S2sHzPH5pv40UsVxSwsN497LmT2BiJ2QsbmIixBESOqOO7t_RHNWJh8Fwuinq/gen1200.jpg",
        details: "–ù–∞—Ä–∞–±–æ—Ç–∫–∞ 7 500 —á–∞—Å–æ–≤, –≥—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω–æ—Å—Ç—å 70 —Ç",
        location: "–ó–∞–±–∞–π–∫–∞–ª—å—Å–∫–∏–π –∫—Ä–∞–π",
        price: 23000000,
        hours: "7 500 —á–∞—Å–æ–≤",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://auto.drom.ru/spec/krasnokamensk/sany/skt105s/truck/career/703053102.html",
        discount: false
    },
    {
        id: 23,
        title: "–°–æ—á–ª–µ–Ω–µ–Ω–Ω—ã–π VOLVO A40F",
        year: 2016,
        category: "spec",
        image: "https://s6.auto.drom.ru/photo/v2/j3EupEUCGWOqBcZJckFdWXc35iUvfAoVXQLizTbhyDzpmQUpRcYMS9YSEb1aBeAIg7knYaL644Cdctn8/gen1200.jpg",
        details: "–ù–∞—Ä–∞–±–æ—Ç–∫–∞ 26 770 –º/—á, –æ—Ç–ª–∏—á–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ",
        location: "–ó–∞–±–∞–π–∫–∞–ª—å—Å–∫–∏–π –∫—Ä–∞–π",
        price: 27000000,
        hours: "26 770 –º/—á",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://auto.drom.ru/spec/krasnokamensk/volvo/a40f/truck/articulated/548856564.html",
        discount: false
    },
    {
        id: 24,
        title: "–°–æ—á–ª–µ–Ω–µ–Ω–Ω—ã–π VOLVO A40F",
        year: 2010,
        category: "spec",
        image: "https://s6.auto.drom.ru/photo/v2/cJmbXlij8jrW6uwJKM4iHVzw46QWsXQAHCsmBF9Pnqdzg4mdPE8JvFbpCZCtnj3_qAlgjICLFY1WeGaD/gen1200.jpg",
        details: "–ù–∞—Ä–∞–±–æ—Ç–∫–∞ 50 000 –º/—á, –æ—Ç–ª–∏—á–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ",
        location: "–ó–∞–±–∞–π–∫–∞–ª—å—Å–∫–∏–π –∫—Ä–∞–π",
        price: 19000000,
        hours: "50 000 –º/—á",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://auto.drom.ru/spec/krasnokamensk/volvo/a35e/truck/articulated/624844091.html",
        discount: false
    },
    // –ì—Ä—É–∑–æ–≤–æ–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç (25-39)
    {
        id: 25,
        title: "–ö–ú–£ –Ω–∞ —à–∞—Å—Å–∏ FAW 3250",
        year: 2024,
        category: "truck",
        image: "https://s6.auto.drom.ru/photo/v2/cGUkHGLY5rIqCyGJJSTTtzyxzBqVDQwxx9ZPmlqxbi8rJu-YV9NOmnNcxLL1rLImW53FtrPT8e_0E19E/gen1200.jpg",
        details: "–ü—Ä–æ–±–µ–≥ 40 000 –∫–º, –º–æ—â–Ω–æ—Å—Ç—å 390 –ª.—Å., –≥—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω–æ—Å—Ç—å 20400 –∫–≥",
        location: "–≥. –°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å",
        price: 10700000,
        hours: "40 000 –∫–º",
        engine: "–î–∏–∑–µ–ª—å 390 –ª.—Å.",
        link: "https://auto.drom.ru/spec/spb/faw/ca3250/truck/flatbed/446058572.html",
        discount: false
    },
    {
        id: 26,
        title: "–ê–≤—Ç–æ–±–µ—Ç–æ–Ω–æ–º–µ—à–∞–ª–∫–∞ –£—Ä–∞–ª 4320 NEXT",
        year: 2024,
        category: "truck",
        image: "https://avatars.mds.yandex.net/get-autoru-vos/6942622/ff22790c15ddde5f9e060a9f78e7a662/1200x900",
        details: "–ü—Ä–æ–±–µ–≥ 12 000 –∫–º, –æ–±—ä–µ–º –±—É–Ω–∫–µ—Ä–∞ 6 –∫—É–±.–º.",
        location: "–≥. –ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫",
        price: 5800000,
        hours: "12 000 –∫–º",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://auto.drom.ru/spec/traktron/ural/4320/building/mixer/61602082_3.html",
        discount: false
    },
    {
        id: 27,
        title: "–ê–≤—Ç–æ–∫—Ä–∞–Ω Sany STC550T",
        year: 2024,
        category: "truck",
        image: "https://s6.auto.drom.ru/photo/v2/ARX1QRQIPPYtr_v4ac0vEdB7QbN2iCjN3wnB-0D5CEcahY3oeKxlnO4PYUL14tUu4QdWSJfweiipsWit/gen1200.jpg",
        details: "–ú–∞–∫—Å. –≥—Ä—É–∑–æ–ø–æ–¥—ä—ë–º–Ω–æ—Å—Ç—å 55 —Ç, –ø–æ–ª–Ω–∞—è –º–∞—Å—Å–∞ 40 970 –∫–≥",
        location: "–≥. –°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å",
        price: 22000000,
        hours: "-",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://auto.drom.ru/spec/simferopol/sany/stc550t5/crane/crane/840034552.html",
        discount: false
    },
    {
        id: 28,
        title: "–ö–ê–ú–ê–ó 43118 —Å –ö–ú–£",
        year: 2021,
        category: "truck",
        image: "https://s6.auto.drom.ru/photo/v2/dMy5Y5_UhPcUXEARgTPp4hcSPvH3yWbJYcFyw96wtbsoaWnlb8FTDz7FFvJy40rPEQI3gHB0w5BnmjbR/gen1200.jpg",
        details: "–ü—Ä–æ–±–µ–≥ 58 000 –∫–º, –¥–≤–∏–≥–∞—Ç–µ–ª—å 300 –ª.—Å., –≤–µ–∑–¥–µ—Ö–æ–¥",
        location: "–≥. –ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫",
        price: 6500000,
        hours: "58 000 –∫–º",
        engine: "–î–∏–∑–µ–ª—å 300 –ª.—Å.",
        link: "https://auto.drom.ru/spec/krasnoyarsk/kamaz/43118/truck/loader-crane/515774097.html",
        discount: false
    },
    {
        id: 29,
        title: "–ê–≤—Ç–æ–≤—ã—à–∫–∞ –Ω–∞ —à–∞—Å—Å–∏ –ì–ê–ó 3309",
        year: 2022,
        category: "truck",
        image: "https://s6.auto.drom.ru/photo/v2/4hi45zeuX1bsY1baa776fEAkyKMGlo8-s0NMZNaJEyZoW1cJpb7EBodCKHRYTu7g5nL2TzK-YWKkqyE6/gen1200.jpg",
        details: "–ì—Ä—É–∑–æ–ø–æ–¥—ä—ë–º–Ω–æ—Å—Ç—å 7 050 –∫–≥, –≤—ã–ª–µ—Ç —Å—Ç—Ä–µ–ª—ã 19 –º",
        location: "–≥. –û—Ä–µ–Ω–±—É—Ä–≥",
        price: 1250000,
        hours: "-",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://auto.drom.ru/spec/orenburg/gaz/3309/municipal/tower/90854_2022.html",
        discount: false
    },
    {
        id: 30,
        title: "–ê–≤—Ç–æ—Ü–∏—Å—Ç–µ—Ä–Ω–∞ –ö–ê–ú–ê–ó 65115",
        year: 2023,
        category: "truck",
        image: "https://s6.auto.drom.ru/photo/v2/CsTLofWeB-41ZC_wtAp_9X5bCMT-o6MAxsd539XiZMACqcNDzpX4lKW9_OjwSNQO_1hv3y1rnHFkyCRs/gen1200.jpg",
        details: "–ü—Ä–æ–±–µ–≥ 46 200 –∫–º, –æ–±—ä–µ–º 15 –º¬≥, 3 –æ—Ç—Å–µ–∫–∞",
        location: "–≥. –°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å",
        price: 9500000,
        hours: "46 200 –∫–º",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://auto.drom.ru/spec/simferopol/kamaz/65115/truck/fuel-tanker/555394116.html",
        discount: false
    },
    {
        id: 31,
        title: "–°–æ—Ä—Ç–∏–º–µ–Ω—Ç–æ–≤–æ–∑ Mercedes-Benz Arocs",
        year: 2021,
        category: "truck",
        image: "https://s6.auto.drom.ru/photo/v2/vODzFEHrH0x9MU0flZUUBGcVfkPx1Rk-mQLinAqmGg-dwVuwOFbzij2TeaBGsXtTReWKd6QbJ6TRj5-3/gen1200.jpg",
        details: "–ü—Ä–æ–±–µ–≥ 91 800 –∫–º, –º–æ—â–Ω–æ—Å—Ç—å 476 –ª.—Å.",
        location: "–≥. –ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫",
        price: 12200000,
        hours: "91 800 –∫–º",
        engine: "–î–∏–∑–µ–ª—å 476 –ª.—Å.",
        link: "https://auto.drom.ru/spec/krasnoyarsk/mercedes-benz/actros--3346/truck/timber/172071680.html",
        discount: false
    },
    {
        id: 32,
        title: "–¢—è–≥–∞—á SITRAK C7H",
        year: 2023,
        category: "truck",
        image: "https://s6.auto.drom.ru/photo/v2/QLVc6rTRINJzF9dXeneMgXRPYZlh-QzQefaYXnXZXsXoIXS0DIlZGhHtIooqFtZ0iIYny-NDgAZFJzoO/gen1200.jpg",
        details: "–ü—Ä–æ–±–µ–≥ 71 600 –∫–º, –¥–≤–∏–≥–∞—Ç–µ–ª—å 540 –ª.—Å.",
        location: "–≥. –ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫",
        price: 5500000,
        hours: "71 600 –∫–º",
        engine: "–î–∏–∑–µ–ª—å 540 –ª.—Å.",
        link: "https://auto.drom.ru/spec/krasnoyarsk/sitrak/c7h/truck-tractor/truck-tractor/508497279.html",
        discount: false
    },
    {
        id: 33,
        title: "–°–µ–¥–µ–ª—å–Ω—ã–π —Ç—è–≥–∞—á SITRAK C7H MAX",
        year: 2023,
        category: "truck",
        image: "https://s6.auto.drom.ru/photo/v2/FXOhzsN6LUVSiKUMuUDxWE0zefaYKjW_itd0T5-TLtn398BVXwBC9yHZ8p3cfUBXFH_WvVZt3ATYsLIO/gen1200.jpg",
        details: "–ü—Ä–æ–±–µ–≥ 245 000 –∫–º, –¥–≤–∏–≥–∞—Ç–µ–ª—å 480 –ª.—Å.",
        location: "–≥. –°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å",
        price: 5500000,
        hours: "245 000 –∫–º",
        engine: "–î–∏–∑–µ–ª—å 480 –ª.—Å.",
        link: "https://auto.drom.ru/spec/simferopol/sitrak/c7h-max/truck-tractor/truck-tractor/209531234.html",
        discount: false
    },
    {
        id: 34,
        title: "–°–µ–¥–µ–ª—å–Ω—ã–π —Ç—è–≥–∞—á Volvo FH",
        year: 2024,
        category: "truck",
        image: "https://s6.auto.drom.ru/photo/v2/UKizcOBZUFnYbb8w9eGn219sgQzQbLWOY-C0pgIOvW8u_dRE-tGr4p0i88R6cav_By6RxMgRwJg5PcUV/gen1200.jpg",
        details: "–ü—Ä–æ–±–µ–≥ 160 000 –∫–º, –º–æ—â–Ω–æ—Å—Ç—å 510 –ª.—Å., –∞–≤—Ç–æ–º–∞—Ç",
        location: "–≥. –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫",
        price: 14500000,
        hours: "160 000 –∫–º",
        engine: "–î–∏–∑–µ–ª—å 510 –ª.—Å.",
        link: "https://auto.drom.ru/spec/novosibirsk/volvo/fh/truck-tractor/truck-tractor/263140783.html",
        discount: false
    },
    {
        id: 35,
        title: "–ü–æ–ª—É–ø—Ä–∏—Ü–µ–ø Orthaus V4",
        year: 2024,
        category: "truck",
        image: "https://s6.auto.drom.ru/photo/v2/4qOKiipQJIj1PW0-yQUCLsjYig_G_b05I13o8phbeVpwp1_-V_ZBJqRFBLUmIyNDsQtONw85vEMiaoCt/gen1200.jpg",
        details: "4 –æ—Å–∏, —à—Ç–æ—Ä–Ω—ã–π, –≥—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω–æ—Å—Ç—å 39 000 –∫–≥",
        location: "–≥. –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫",
        price: 4500000,
        hours: "-",
        engine: "-",
        link: "https://auto.drom.ru/spec/novosibirsk/orthaus/v4/semitrailer/s-curtain/326064915.html",
        discount: false
    },
    {
        id: 36,
        title: "–ü–æ–ª—É–ø—Ä–∏—Ü–µ–ø –±–∏—Ç—É–º–æ–≤–æ–∑ Foxtank",
        year: 2024,
        category: "truck",
        image: "https://90.img.avito.st/image/1/1.2NyH6ba4dDWxXvY4u56WtNZIdjM5SPYjsUV2NzdAfD8x.76I0Dd4WYBtz7FnQsMT0wRA4nsHxH5qDWaRN5e3de3Y",
        details: "–û–±—ä–µ–º 32 –º¬≥, 3 —Ü–∏—Å—Ç–µ—Ä–Ω—ã, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ–±–µ–≥",
        location: "–≥. –ú–æ—Å–∫–≤–∞",
        price: 4800000,
        hours: "-",
        engine: "-",
        link: "https://www.avito.ru/krasnoyarsk/gruzoviki_i_spetstehnika/polupritsep_bitumovoz_foxtank_877721_2024_7749524125",
        discount: false
    },
    {
        id: 37,
        title: "–ü–æ–ª—É–ø—Ä–∏—Ü–µ–ø-—Ü–∏—Å—Ç–µ—Ä–Ω–∞ Foxtank",
        year: 2023,
        category: "truck",
        image: "https://s6.auto.drom.ru/photo/v2/n9hCFT7JdpbPNCo7H8EMnBXP5TgXaROqxGJbfO9skYD9hEhOiwEXEpDkjuatjYTM9weY-_WtluiRXFSO/gen1200.jpg",
        details: "–û–±—ä–µ–º 34 –º¬≥, 5 –æ—Ç—Å–µ–∫–∞, –∞–ª—é–º–∏–Ω–∏–π",
        location: "–≥. –°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å",
        price: 4800000,
        hours: "-",
        engine: "-",
        link: "https://auto.drom.ru/spec/simferopol/foxtank/877721/semitrailer/s-light-oil/558776636.html",
        discount: false
    },
    {
        id: 38,
        title: "–ü–æ–ª—É–ø—Ä–∏—Ü–µ–ø-—Ç—è–∂–µ–ª–æ–≤–æ–∑ –°–ê–ë",
        year: 2023,
        category: "truck",
        image: "https://30.img.avito.st/image/1/1.y_tZDra4ZxJvueUfQy2X1x6vZRTnr-UEb6JlEOmnbxjv.o4F-XNQTDRv4ghGFcDFJMpZEHErFGMD39BqiUcQrzxA",
        details: "–ì—Ä—É–∑–æ–ø–æ–¥—ä—ë–º–Ω–æ—Å—Ç—å 50 700 –∫–≥, –º–∞—Å—Å–∞ 13 300 –∫–≥",
        location: "–≥. –ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫",
        price: 4700000,
        hours: "-",
        engine: "-",
        link: "https://www.avito.ru/krasnoyarsk/gruzoviki_i_spetstehnika/polupritsep_bortovoy_maz_938662-025_2023_7845230015",
        discount: false
    },
    {
        id: 39,
        title: "–ì–ê–ó–µ–ª—å –ë–ò–ó–ù–ï–° —Å —Ç–µ—Ä–º–æ–±—É–¥–∫–æ–π",
        year: 2019,
        category: "truck",
        image: "https://20.img.avito.st/image/1/1.myIPRba4N8s58rXGNS-SYmPkNc2x5LXdOek1yb_sP8G5.eulX5_TLc9d69rAkrzSql0yoEW9eUzIE95yQY6NmFpA",
        details: "–ü—Ä–æ–±–µ–≥ 94 500 –∫–º, —Ä–µ—Ñ—Ä–∏–∂–µ—Ä–∞—Ç–æ—Ä–Ω–æ–≥–æ —Ç–∏–ø–∞ –ª–µ–¥–Ω–∏–∫",
        location: "–≥. –ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫",
        price: 1000000,
        hours: "94 500 –∫–º",
        engine: "–ë–µ–Ω–∑–∏–Ω",
        link: "https://www.avito.ru/novokuznetsk/gruzoviki_i_spetstehnika/gaz_gazel_3302_izotermicheskiy_2019_7621306052",
        discount: false
    },
    // –õ–µ–≥–∫–æ–≤–æ–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç (40-47)
    {
        id: 40,
        title: "Mercedes-Benz G-Class",
        year: 2021,
        category: "passenger",
        image: "https://s6.auto.drom.ru/photo/v2/bSkDZu3Z7Jd9_zvlWufjV-FiWIBuSMmqHgWgDCJ6qmI3A69IKStI7ysrawZ73FJu9otejt053Ot9IRxa/gen1200.jpg",
        details: "–ü—Ä–æ–±–µ–≥ 30 000 –∫–º, –¥–∏–∑–µ–ª—å 2.9 –ª, –∞–≤—Ç–æ–º–∞—Ç, –ø–æ–ª–Ω—ã–π –ø—Ä–∏–≤–æ–¥",
        location: "–ø–≥—Ç. –¢–∞–∫—Å–∏–º–æ",
        price: 16500000,
        hours: "30 000 –∫–º",
        engine: "–î–∏–∑–µ–ª—å 2.9 –ª",
        link: "https://auto.drom.ru/taksimo/mercedes-benz/g-class/116421158.html",
        discount: false
    },
    {
        id: 41,
        title: "LEXUS LX 570",
        year: 2018,
        category: "passenger",
        image: "https://s6.auto.drom.ru/photo/v2/9k3SOSELFz0fX2bsANHgvnL4vWMcaff6r-deso_xEKsTipjVBnd6cTMmKwVAp_y28NQsz34FeZmhgidF/gen1200.jpg",
        details: "–ü—Ä–æ–±–µ–≥ 104 000 –∫–º, –¥–≤–∏–≥–∞—Ç–µ–ª—å 5.7 –ª, –º–æ—â–Ω–æ—Å—Ç—å 367 –ª.—Å.",
        location: "–≥. –ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫",
        price: 11000000,
        hours: "104 000 –∫–º",
        engine: "–ë–µ–Ω–∑–∏–Ω 5.7 –ª",
        link: "https://auto.drom.ru/novokuznetsk/lexus/lx570/918276601.html",
        discount: false
    },
    {
        id: 42,
        title: "Land Rover Range Rover",
        year: 2021,
        category: "passenger",
        image: "https://s6.auto.drom.ru/photo/v2/PiHjHGtnonmyNPYA-vwTxa1x6__iQXTiz5CNFCiI4BUtrc6ZhZU9KYc4fG1IiTI5yrckt925g39z-XIi/gen1200.jpg",
        details: "–ü—Ä–æ–±–µ–≥ 130 000 –∫–º, —Ç—É—Ä–±–æ–¥–∏–∑–µ–ª—å 3.0 –ª, –∞–≤—Ç–æ–º–∞—Ç",
        location: "–≥. –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥",
        price: 7800000,
        hours: "130 000 –∫–º",
        engine: "–¢—É—Ä–±–æ–¥–∏–∑–µ–ª—å 3.0 –ª",
        link: "https://auto.drom.ru/ekaterinburg/land_rover/range_rover/180888377.html",
        discount: false
    },
    {
        id: 43,
        title: "–ü–∏–∫–∞–ø JAC T6",
        year: 2023,
        category: "passenger",
        image: "https://s6.auto.drom.ru/photo/v2/jZVV5hj9kdziqjgOnuaBq_-j_L5RekVpYA8C43VKzR_nt2lYcDpxT2moamGy3OiSjj1-NE-i7LggPy1T/gen1200.jpg",
        details: "–ü—Ä–æ–±–µ–≥ 57 000 –∫–º, 177 –ª.—Å., –±–µ–Ω–∑–∏–Ω, –ø–æ–ª–Ω—ã–π –ø—Ä–∏–≤–æ–¥",
        location: "–≥. –ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫",
        price: 800000,
        hours: "57 000 –∫–º",
        engine: "–ë–µ–Ω–∑–∏–Ω 177 –ª.—Å.",
        link: "https://auto.drom.ru/krasnoyarsk/jac/t6/332044774.html",
        discount: false
    },
    {
        id: 44,
        title: "Haval Jolion",
        year: 2023,
        category: "passenger",
        image: "https://50.img.avito.st/image/1/1.NnfUs7a4mp7iBBiTtO8yWrwSmJhqEhiI4h-YnGQakpRi.JwE_4KYUAtGhySLmIMDMV7y36r9HqzLSs70BGELV1-E",
        details: "–ü—Ä–æ–±–µ–≥ 131 000 –∫–º, –º–æ—â–Ω–æ—Å—Ç—å 143 –ª.—Å., –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è Comfort",
        location: "–≥. –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫",
        price: 1300000,
        hours: "131 000 –∫–º",
        engine: "–ë–µ–Ω–∑–∏–Ω 143 –ª.—Å.",
        link: "https://www.avito.ru/novosibirsk/avtomobili/haval_jolion_1.5_amt_2023_131_000_km_7653681781",
        discount: false
    },
    {
        id: 45,
        title: "Mercedes-Benz V-Class",
        year: 2018,
        category: "passenger",
        image: "https://s6.auto.drom.ru/photo/v2/HiKOso_U9x-Uj4gPqhFsPD4XOtXHRecyLhKZKD5PvzZyiqN7U_fHoIVZKpZ8rDkOp5mrE9A5SFgAZqKh/gen1200.jpg",
        details: "–ü—Ä–æ–±–µ–≥ 206 000 –∫–º, –¥–∏–∑–µ–ª—å 2.4 –ª, –ø–Ω–µ–≤–º–æ–ø–æ–¥–≤–µ—Å–∫–∞, –ø—Ä–µ–º–∏—É–º-–∞—É–¥–∏–æ",
        location: "–≥. –ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫",
        price: 6300000,
        hours: "206 000 –∫–º",
        engine: "–î–∏–∑–µ–ª—å 2.4 –ª",
        link: "https://auto.drom.ru/novokuznetsk/mercedes-benz/v-class/332518316.html",
        discount: false
    },
    {
        id: 46,
        title: "Voyah Dream",
        year: 2023,
        category: "passenger",
        image: "https://s6.auto.drom.ru/photo/v2/h_Us-dFbVLzzoPJihHBvUY1D_4pnV2s2yaD-Z--eheVGNcB41VP_obFpZoskFN7cewZduwfFVk1MoPHv/gen1200.jpg",
        details: "–ü—Ä–æ–±–µ–≥ 83 000-105 000 –∫–º, –≥–∏–±—Ä–∏–¥ 393 –ª.—Å., 7 –º–µ—Å—Ç",
        location: "–≥. –ú–æ—Å–∫–≤–∞",
        price: 14500000,
        hours: "83 000-105 000 –∫–º",
        engine: "–ì–∏–±—Ä–∏–¥ 393 –ª.—Å.",
        link: "https://auto.drom.ru/moscow/voyah/dreamer/542054686.html",
        discount: false
    },
    {
        id: 47,
        title: "Chery Arrizo 8",
        year: 2023,
        category: "passenger",
        image: "https://s6.auto.drom.ru/photo/v2/ZmjBn8honpwRvVZaaSzthNY7TlP5C-GMNLcxmTImekDhnwZ6nflVkMJTUjyg35YrHLVyYAd3-GCEfuzs/gen1200.jpg",
        details: "–ü—Ä–æ–±–µ–≥ 102 000 –∫–º, 1.6 –ª, 186 –ª.—Å., –∫–æ–∂–∞, –ø–∞–Ω–æ—Ä–∞–º–Ω–∞—è –∫—Ä—ã—à–∞",
        location: "–≥. –û—Ä–µ–Ω–±—É—Ä–≥",
        price: 2100000,
        hours: "102 000 –∫–º",
        engine: "–ë–µ–Ω–∑–∏–Ω 1.6 –ª",
        link: "https://auto.drom.ru/orenburg/chery/arrizo_8/617362498.html",
        discount: false
    },
    // –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ (48-60)
    {
        id: 48,
        title: "–ì–∏–¥—Ä–∞–≤–ª–∏—á–µ—Å–∫–∏–π –ø—Ä–µ—Å—Å ‚Ññ81F-250",
        year: 2023,
        category: "equipment",
        image: "https://10.img.avito.st/image/1/1.APA1Wra4rBkD7S4UOTIXkkP7rh-L-y4PA_auG4XzpBOD.tlGYkZr_0K1WGGAwPUYit6H21Mkhvq4brj249SIpe6c",
        details: "–ü–∞–∫–µ—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π –ø—Ä–µ—Å—Å, –ö–∏—Ç–∞–π",
        location: "–≥. –ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫",
        price: 3000000,
        hours: "-",
        engine: "–ì–∏–¥—Ä–∞–≤–ª–∏–∫–∞",
        link: "https://www.avito.ru/novokuznetsk/oborudovanie_dlya_biznesa/gidravlicheskiy_paketirovochnyy_press_y81f-250_7269495355",
        discount: false
    },
    {
        id: 49,
        title: "–ü–µ—Å–∫–æ—Å—Ç—Ä—É–π–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ WP-5018",
        year: 2023,
        category: "equipment",
        image: "https://30.img.avito.st/image/1/1.eRVfx7a41fxpcFfxIbYIbCpm1_rhZlfqaWvX_u9u3fbp.CSTovOZ71OLeSl0YCUor1vwE3ufe7G_dj1vbK50OVuk",
        details: "–ú–∞–∫—Å. –¥–∞–≤–ª–µ–Ω–∏–µ 500 –±–∞—Ä, —Ä–∞—Å—Ö–æ–¥ –≤–æ–¥—ã 1080 –ª/—á–∞—Å",
        location: "–ê–ª—Ç–∞–π—Å–∫–∏–π –∫—Ä–∞–π",
        price: 2700000,
        hours: "-",
        engine: "–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ",
        link: "https://www.avito.ru/krutiha/oborudovanie_dlya_biznesa/peskostruynaya_vodnaya_ustanovka_wp-5018_7301705473",
        discount: false
    },
    {
        id: 50,
        title: "–ö—Ä–∞–Ω –±–∞—à–µ–Ω–Ω—ã–π GIRAFFE",
        year: 2025,
        category: "equipment",
        image: "https://90.img.avito.st/image/1/1.DEIkSra4oKsS_SKmMDY4LWLroq2a6yK9EuaiqZTjqKGS.tuM4O-Oox9wcNMOignX73GYoHvETLWp5sVkhnqLeaB4",
        details: "–ú–∞–∫—Å. –≤—ã–ª–µ—Ç 40 –º, –≥—Ä—É–∑–æ–ø–æ–¥—ä—ë–º–Ω–æ—Å—Ç—å 10 —Ç",
        location: "–≥. –°—É—Ä–≥—É—Ç",
        price: 42000000,
        hours: "-",
        engine: "–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ",
        link: "https://www.avito.ru/surgut/oborudovanie_dlya_biznesa/bashennyy_kran_7844952581",
        discount: false
    },
    {
        id: 51,
        title: "–õ–∏–Ω–∏—è –ª–µ—Å–æ–ø–∏–ª–µ–Ω–∏—è",
        year: 2023,
        category: "equipment",
        image: "https://70.img.avito.st/image/1/1.3xSAy7a4c_22fPHwsuCbA5lqcfs-avHrtmdx_zBie_c2.XGD7_i7-WdMfsht2f39TxvsFm0-NJoTPouAz_eOviw8",
        details: "–ü–æ–ª–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è, –®–≤–µ—Ü–∏—è",
        location: "–≥. –¢–æ–º—Å–∫",
        price: 88000000,
        hours: "-",
        engine: "–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ",
        link: "https://www.avito.ru/tomsk/gotoviy_biznes/liniya_lesopileniya_4677571870",
        discount: false
    },
    {
        id: 52,
        title: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–ª—è –±–µ—Å—Ç—Ä–∞–Ω—à–µ–π–Ω–æ–π –ø—Ä–æ–∫–ª–∞–¥–∫–∏ –£–î800",
        year: 2024,
        category: "equipment",
        image: "https://20.img.avito.st/image/1/1.RzbGcra469_wxWnSxB9nFLvT6dl402nJ8N7p3Xbb49Vw.i1xmqbC3f8ycqqHY4uqtdqsJzFUb6R6O4Bz--QAafE4",
        details: "–°–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–æ–≤–æ–≥–æ, –¥–ª—è —Ç—Ä—É–± –¥–∏–∞–º–µ—Ç—Ä–æ–º –¥–æ 2400 –º–º",
        location: "–≥. –ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫",
        price: 2500000,
        hours: "-",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://www.avito.ru/taksimo/oborudovanie_dlya_biznesa/ustanovka_dlya_bestransheynoy_prokladki_truboprovoda_4646336451",
        discount: false
    },
    {
        id: 53,
        title: "–†–æ—Ç–æ—Ä–Ω—ã–π –≤—Ä–∞—â–∞—Ç–µ–ª—å Prothreaser ROCK 150",
        year: 2023,
        category: "equipment",
        image: "https://30.img.avito.st/image/1/1.zgq4Yba4YuOOyKDmqD7fPq7AYOUGwODrzsVg4QjIaukO.rdRzcgRP78kDKLeBv8peP1Wa3qJrxoRXJbp5qdxdt64",
        details: "–î–ª—è —ç–∫—Å–∫–∞–≤–∞—Ç–æ—Ä–∞ Doosan DX300, –º–æ—â–Ω–æ—Å—Ç—å 110 –∫–í—Ç",
        location: "–≥. –ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫",
        price: 800000,
        hours: "-",
        engine: "–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ 110 –∫–í—Ç",
        link: "https://www.avito.ru/taksimo/gruzoviki_i_spetstehnika/rotornyy_vraschatel_dlya_ekskavatora_doosan_dx300_4646457246",
        discount: false
    },
    {
        id: 54,
        title: "–£–¥–ª–∏–Ω–∏—Ç–µ–ª—å —Ä—É–∫–æ—è—Ç–∏ –¥–ª—è —ç–∫—Å–∫–∞–≤–∞—Ç–æ—Ä–∞ Doosan DX300",
        year: 2023,
        category: "equipment",
        image: "https://00.img.avito.st/image/1/1.E0MUcLa4v6oixz2nPlBANlbRvayq0T28Ity9qKTZt6Ci.p5toaTZd0JF13qK5U1SJyJmVYCqRM4uBX6eMPTSotlU",
        details: "–ù–æ–≤—ã–π, —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —ç–∫—Å–∫–∞–≤–∞—Ç–æ—Ä–æ–º 20-35 —Ç",
        location: "–≥. –ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫",
        price: 250000,
        hours: "-",
        engine: "-",
        link: "https://www.avito.ru/krasnoyarsk/zapchasti_i_aksessuary/udlinitel_rukoyati_ekskavatora_7877577769",
        discount: false
    },
    {
        id: 55,
        title: "–°–∏–ª–æ–≤–æ–π –≤–µ—Ä—Ö–Ω–∏–π –ø—Ä–∏–≤–æ–¥ DQ40BCD",
        year: 2024,
        category: "equipment",
        image: "https://40.img.avito.st/image/1/1.c0f-XLa4367I612jlBUGNav93ahA_V24yPDdrE7116RI.8FpSfBwRa9dsjnS_0EbpZJusio2GS3-DaYg6FsOdlOc",
        details: "–ù–æ–º–∏–Ω–∞–ª—å–Ω–∞—è –≥–ª—É–±–∏–Ω–∞ –±—É—Ä–µ–Ω–∏—è 4000 –º, –Ω–∞–≥—Ä—É–∑–∫–∞ 280 —Ç",
        location: "–≥. –°—É—Ä–≥—É—Ç",
        price: 85000000,
        hours: "-",
        engine: "–î–∏–∑–µ–ª—å",
        link: "https://www.avito.ru/surgut/oborudovanie_dlya_biznesa/burilnaya_sistema_verhnego_privoda_7716961900",
        discount: false
    },
    {
        id: 56,
        title: "–£–ø–∞–∫–æ–≤–æ—á–Ω–∞—è –º–∞—à–∏–Ω–∞ Prostor-450",
        year: 2022,
        category: "equipment",
        image: "https://90.img.avito.st/image/1/1.y50H97a4Z3QxQOV5HYiAgllWZXK5VuViMVtldrdeb36x.xyngmVj-uqSKS2_yN6VB9-2gPzdsAyZ4i7-o1FhUWbw",
        details: "–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å 40-110 –∏–∑–¥–µ–ª–∏–π –≤ –º–∏–Ω—É—Ç—É",
        location: "–≥. –ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫",
        price: 450000,
        hours: "-",
        engine: "–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ",
        link: "https://www.avito.ru/novokuznetsk/oborudovanie_dlya_biznesa/gorizontalnaya_upakovochnaya_mashina_prostor-450_7749037559",
        discount: false
    },
    {
        id: 57,
        title: "–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø–æ–ª–µ–≤–æ–≥–æ —Å–∫–ª–∞–¥–∞",
        year: 2024,
        category: "equipment",
        image: "https://60.img.avito.st/image/1/1.nenqqLa4MQDcH7MN3PqmyawJMwZUCbMW3AQzAloBOQpc.MOmtNGGdD3QJ76J28WrRzoSdzERQTJXytN6aDcvbeFY",
        details: "–ú—è–≥–∫–∏–µ —Ä–µ–∑–µ—Ä–≤—É–∞—Ä—ã –ú–†-–ê–¢150–ê, –æ–±—ä–µ–º 300 –∫—É–±.–º.",
        location: "–≥. –ú–æ—Å–∫–≤–∞",
        price: 3900000,
        hours: "-",
        engine: "-",
        link: "https://www.avito.ru/moskva/oborudovanie_dlya_biznesa/polevoy_sklad_7845509820",
        discount: false
    },
    {
        id: 58,
        title: "–ü–∞—Ä–æ–≤–æ–π –∫–æ—Ç–µ–ª TEMRON SL2000",
        year: 2022,
        category: "equipment",
        image: "https://60.img.avito.st/image/1/1.34Vs1La4c2xaY_FhXt_l8it1cWrSdfF6Wnhxbtx9e2ba.mXjCCEzN6vh0w3_3RM6U34wvtSm4iIt31dNGFqn5Wzk",
        details: "–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è",
        location: "–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫–∏–π –∫—Ä–∞–π",
        price: 2200000,
        hours: "-",
        engine: "–ì–∞–∑/–¥–∏–∑–µ–ª—å",
        link: "https://www.avito.ru/achinsk/oborudovanie_dlya_biznesa/parovoy_kotel_temron_sl2000_7844946044",
        discount: false
    },
    {
        id: 59,
        title: "–ì–æ—Ä–µ–ª–∫–∞ TECHNOPLANE TF-SO 1750 T",
        year: 2023,
        category: "equipment",
        image: "https://60.img.avito.st/image/1/1.SkzAcLa45qX2x2So2Hl-O4fR5KN-0WSz9tzkp3DZ7q92.RgPdfIr1Pna0f9UU47mtc1rImBDaSWDNeXkUiUejixc",
        details: "–ú–æ—â–Ω–æ—Å—Ç—å 1750 –∫–í—Ç, –∂–∏–¥–∫–æ—Ç–æ–ø–ª–∏–≤–Ω–∞—è, –¥–ª—è –Ω–µ—Ñ—Ç–∏",
        location: "–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫–∏–π –∫—Ä–∞–π",
        price: 1800000,
        hours: "-",
        engine: "–ñ–∏–¥–∫–æ–µ —Ç–æ–ø–ª–∏–≤–æ",
        link: "https://www.avito.ru/achinsk/oborudovanie_dlya_biznesa/gorelka_zhidikotoplivnaya_technoflame_tf_so_1750_t_7845384919",
        discount: false
    },
    {
        id: 60,
        title: "–û–∫—Ä–∞—Å–æ—á–Ω–æ-—Å—É—à–∏–ª—å–Ω–∞—è –∫–∞–º–µ—Ä–∞",
        year: 2023,
        category: "equipment",
        image: "https://20.img.avito.st/image/1/1.QyWcFra478yqoW3BlnsJFNi37coit23aqrrtziy_58Yq.rmHUOfIou3p6Lu1Dmj_zv3gIheTx1S1Jd8vZkRp5K9k",
        details: "2 —Å–µ–∫—Ü–∏–∏, —Ä–∞–∑–º–µ—Ä—ã 14000x4000x4000 –º–º –∫–∞–∂–¥–∞—è",
        location: "–≥. –ß–µ–ª—è–±–∏–Ω—Å–∫",
        price: 50000000,
        hours: "-",
        engine: "–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ",
        link: "https://www.avito.ru/chelyabinsk/oborudovanie_dlya_biznesa/okrasochno-sushilnaya_kamera_7876993117",
        discount: false
    }
];

// –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
const categoriesData = [
    { id: 'all', name: '–í—Å–µ', icon: 'üì¶', count: 0 },
    { id: 'spec', name: '–°–ø–µ—Ü—Ç–µ—Ö–Ω–∏–∫–∞', icon: 'üöú', count: 24 },
    { id: 'truck', name: '–ì—Ä—É–∑–æ–≤–æ–π', icon: 'üöõ', count: 15 },
    { id: 'passenger', name: '–õ–µ–≥–∫–æ–≤–æ–π', icon: 'üöó', count: 8 },
    { id: 'equipment', name: '–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ', icon: '‚öôÔ∏è', count: 13 }
];

// –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ä–µ–≥–∏–æ–Ω–æ–≤ –†–æ—Å—Å–∏–∏
const regionsData = [
    "–í—Å–µ —Ä–µ–≥–∏–æ–Ω—ã",
    "–ú–æ—Å–∫–≤–∞",
    "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥",
    "–°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å",
    "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ê–¥—ã–≥–µ—è",
    "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ê–ª—Ç–∞–π",
    "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ë–∞—à–∫–æ—Ä—Ç–æ—Å—Ç–∞–Ω",
    "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ë—É—Ä—è—Ç–∏—è",
    "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –î–∞–≥–µ—Å—Ç–∞–Ω",
    "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ò–Ω–≥—É—à–µ—Ç–∏—è",
    "–ö–∞–±–∞—Ä–¥–∏–Ω–æ-–ë–∞–ª–∫–∞—Ä—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞",
    "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–∞–ª–º—ã–∫–∏—è",
    "–ö–∞—Ä–∞—á–∞–µ–≤–æ-–ß–µ—Ä–∫–µ—Å—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞",
    "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–∞—Ä–µ–ª–∏—è",
    "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–æ–º–∏",
    "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö—Ä—ã–º",
    "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ú–∞—Ä–∏–π –≠–ª",
    "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ú–æ—Ä–¥–æ–≤–∏—è",
    "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –°–∞—Ö–∞ (–Ø–∫—É—Ç–∏—è)",
    "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –°–µ–≤–µ—Ä–Ω–∞—è –û—Å–µ—Ç–∏—è ‚Äî –ê–ª–∞–Ω–∏—è",
    "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –¢–∞—Ç–∞—Ä—Å—Ç–∞–Ω",
    "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –¢—ã–≤–∞",
    "–£–¥–º—É—Ä—Ç—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞",
    "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –•–∞–∫–∞—Å–∏—è",
    "–ß–µ—á–µ–Ω—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞",
    "–ß—É–≤–∞—à—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞",
    "–ê–ª—Ç–∞–π—Å–∫–∏–π –∫—Ä–∞–π",
    "–ó–∞–±–∞–π–∫–∞–ª—å—Å–∫–∏–π –∫—Ä–∞–π",
    "–ö–∞–º—á–∞—Ç—Å–∫–∏–π –∫—Ä–∞–π",
    "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π",
    "–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫–∏–π –∫—Ä–∞–π",
    "–ü–µ—Ä–º—Å–∫–∏–π –∫—Ä–∞–π",
    "–ü—Ä–∏–º–æ—Ä—Å–∫–∏–π –∫—Ä–∞–π",
    "–°—Ç–∞–≤—Ä–æ–ø–æ–ª—å—Å–∫–∏–π –∫—Ä–∞–π",
    "–•–∞–±–∞—Ä–æ–≤—Å–∫–∏–π –∫—Ä–∞–π",
    "–ê–º—É—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ê—Å—Ç—Ä–∞—Ö–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ë–µ–ª–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ë—Ä—è–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–í–ª–∞–¥–∏–º–∏—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–í–æ–ª–≥–æ–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–í–æ–ª–æ–≥–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–í–æ—Ä–æ–Ω–µ–∂—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ò–≤–∞–Ω–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ò—Ä–∫—É—Ç—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ö–∞–ª—É–∂—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ö–µ–º–µ—Ä–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ö–∏—Ä–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ö–æ—Å—Ç—Ä–æ–º—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ö—É—Ä–≥–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ö—É—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–õ–∏–ø–µ—Ü–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ú–∞–≥–∞–¥–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ú—É—Ä–º–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ù–∏–∂–µ–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ù–æ–≤–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–û–º—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–û—Ä–µ–Ω–±—É—Ä–≥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–û—Ä–ª–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ü–µ–Ω–∑–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ü—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–†—è–∑–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–°–∞–º–∞—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–°–∞—Ä–∞—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–°–∞—Ö–∞–ª–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–°–≤–µ—Ä–¥–ª–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–°–º–æ–ª–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–¢–∞–º–±–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–¢–≤–µ—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–¢–æ–º—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–¢—É–ª—å—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–¢—é–º–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–£–ª—å—è–Ω–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ß–µ–ª—è–±–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–Ø—Ä–æ—Å–ª–∞–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ï–≤—Ä–µ–π—Å–∫–∞—è –∞–≤—Ç–æ–Ω–æ–º–Ω–∞—è –æ–±–ª–∞—Å—Ç—å",
    "–ù–µ–Ω–µ—Ü–∫–∏–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –æ–∫—Ä—É–≥",
    "–•–∞–Ω—Ç—ã-–ú–∞–Ω—Å–∏–π—Å–∫–∏–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –æ–∫—Ä—É–≥ ‚Äî –Æ–≥—Ä–∞",
    "–ß—É–∫–æ—Ç—Å–∫–∏–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –æ–∫—Ä—É–≥",
    "–Ø–º–∞–ª–æ-–ù–µ–Ω–µ—Ü–∫–∏–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –æ–∫—Ä—É–≥"
];

// –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
let state = {
    currentView: 'catalog',
    currentCategory: 'all',
    searchQuery: '',
    filters: {
        category: null,
        maxPrice: APP_CONFIG.DEFAULT_MAX_PRICE,
        minYear: null,
        maxYear: null,
        region: null
    },
    sortBy: 'default',
    favorites: [],
    currentPage: 1,
    itemsPerPage: APP_CONFIG.ITEMS_PER_PAGE,
    currentModal: null,
    isMobileMenuOpen: false
};

// DOM —ç–ª–µ–º–µ–Ω—Ç—ã
const elements = {
    categories: document.getElementById('categories'),
    sortSection: document.getElementById('sort-section'),
    productsGrid: document.getElementById('products-grid'),
    loading: document.getElementById('loading'),
    emptyState: document.getElementById('empty-state'),
    pagination: document.getElementById('pagination'),
    searchInput: document.getElementById('search-input'),
    mobileMenu: document.getElementById('mobile-menu'),
    mobileFavoritesCount: document.getElementById('mobile-favorites-count'),
    footerFavoritesBadge: document.getElementById('footer-favorites-badge')
};

// –£—Ç–∏–ª–∏—Ç—ã
const debounce = (func, wait) => {
    let timeout;
    return function executedFunction(...args) {
        clearTimeout(timeout);
        timeout = setTimeout(() => func.apply(this, args), wait);
    };
};

// –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω—ã
function formatPrice(price) {
    if (price >= 1000000) {
        return (price / 1000000).toFixed(1) + ' –º–ª–Ω ‚ÇΩ';
    } else if (price >= 1000) {
        return (price / 1000).toFixed(0) + ' —Ç—ã—Å ‚ÇΩ';
    } else {
        return price.toLocaleString('ru-RU') + ' ‚ÇΩ';
    }
}

function formatFullPrice(price) {
    return new Intl.NumberFormat('ru-RU', {
        style: 'currency',
        currency: 'RUB',
        minimumFractionDigits: 0,
        maximumFractionDigits: 0
    }).format(price);
}

// ========== –§–£–ù–ö–¶–ò–ò –î–õ–Ø –û–ë–™–Ø–í–õ–ï–ù–ò–ô ==========

/**
 * –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è
 */
function openAddAdModal() {
    if (!advertisementManager) {
        showNotification('–°–∏—Å—Ç–µ–º–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞', 'error');
        return;
    }

    const modal = document.getElementById('add-ad-modal');
    if (modal) {
        modal.style.display = 'block';
        document.body.style.overflow = 'hidden';
        state.currentModal = 'add-ad';
        if (tg) tg.BackButton.show();
    }
}

/**
 * –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ "–ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è"
 */
function openMyAdsModal() {
    if (!advertisementManager) {
        showNotification('–°–∏—Å—Ç–µ–º–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞', 'error');
        return;
    }

    renderMyAds();
    updateProfileNotifications();
    
    const modal = document.getElementById('my-ads-modal');
    if (modal) {
        modal.style.display = 'block';
        document.body.style.overflow = 'hidden';
        state.currentModal = 'my-ads';
        if (tg) tg.BackButton.show();
    }
}

/**
 * –†–µ–Ω–¥–µ—Ä —Å–ø–∏—Å–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
 */
function renderMyAds() {
    const adsList = document.getElementById('my-ads-list');
    const noAdsMessage = document.getElementById('no-ads-message');
    
    if (!adsList || !noAdsMessage) return;
    
    const userAds = advertisementManager.getUserAds();
    
    if (userAds.length === 0) {
        adsList.style.display = 'none';
        noAdsMessage.style.display = 'block';
        return;
    }
    
    adsList.style.display = 'flex';
    noAdsMessage.style.display = 'none';
    
    adsList.innerHTML = userAds.map(ad => {
        const statusClass = `status-${ad.status}`;
        const statusText = advertisementManager.getStatusText(ad.status);
        const categoryName = advertisementManager.getCategoryName(ad.category);
        
        return `
            <div class="my-ad-item" data-ad-id="${ad.id}">
                <div class="ad-item-image">
                    <img src="${ad.images && ad.images.length > 0 ? ad.images[0] : 'https://via.placeholder.com/80x80/1A1A1A/FFFFFF?text=–ù–µ—Ç+—Ñ–æ—Ç–æ'}" 
                         alt="${ad.title}" 
                         onerror="this.src='https://via.placeholder.com/80x80/1A1A1A/FFFFFF?text=–ù–µ—Ç+—Ñ–æ—Ç–æ'">
                </div>
                <div class="ad-item-content">
                    <div class="ad-item-title">${ad.title}</div>
                    <div class="ad-item-meta">
                        <div class="ad-item-price">${formatFullPrice(ad.price)}</div>
                        <div class="ad-item-status ${statusClass}">${statusText}</div>
                        <div style="font-size: 12px; color: var(--text-secondary);">
                            ${advertisementManager.formatDate(ad.createdAt)}
                        </div>
                    </div>
                    <div class="ad-item-actions">
                        <button class="ad-action-btn ad-action-edit" onclick="editAd(${ad.id})">
                            ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                        </button>
                        <button class="ad-action-btn ad-action-delete" onclick="deleteAd(${ad.id})">
                            üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                        </button>
                    </div>
                </div>
            </div>
        `;
    }).join('');
}

/**
 * –û–±–Ω–æ–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ
 */
function updateProfileNotifications() {
    if (!advertisementManager) return;
    
    const pendingCount = advertisementManager.getPendingCount();
    const notificationBadge = document.getElementById('profile-notifications');
    
    if (notificationBadge) {
        if (pendingCount > 0) {
            notificationBadge.textContent = pendingCount;
            notificationBadge.style.display = 'block';
            notificationBadge.setAttribute('aria-label', `–ù–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π: ${pendingCount}`);
        } else {
            notificationBadge.style.display = 'none';
        }
    }
}

/**
 * –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –æ–±—ä—è–≤–ª–µ–Ω–∏—è
 */
async function handleAdSubmit(e) {
    e.preventDefault();
    
    if (!advertisementManager) {
        showNotification('–û—à–∏–±–∫–∞ —Å–∏—Å—Ç–µ–º—ã', 'error');
        return;
    }
    
    const form = e.target;
    const submitBtn = document.getElementById('submit-ad-btn');
    const originalText = submitBtn.textContent;
    
    try {
        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
        submitBtn.disabled = true;
        submitBtn.textContent = '‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞...';
        
        // –°–æ–±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
        const formData = new FormData(form);
        const adData = {
            title: (formData.get('ad-title') || '').trim(),
            category: formData.get('ad-category') || '',
            price: parseInt(formData.get('ad-price')) || 0,
            year: formData.get('ad-year') ? parseInt(formData.get('ad-year')) : null,
            details: (formData.get('ad-description') || '').trim(),
            location: (formData.get('ad-location') || '').trim() || '–ù–µ —É–∫–∞–∑–∞–Ω–æ',
            contact: (formData.get('ad-contact') || '').trim(),
            images: getUploadedImages()
        };
        
        // –í–∞–ª–∏–¥–∞—Ü–∏—è
        if (!adData.title || !adData.category || !adData.price || !adData.details || !adData.contact) {
            throw new Error('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
        }
        
        if (adData.price <= 0) {
            throw new Error('–£–∫–∞–∂–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ü–µ–Ω—É');
        }
        
        if (adData.year && (adData.year < 1900 || adData.year > 2025)) {
            throw new Error('–£–∫–∞–∂–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≥–æ–¥ –≤—ã–ø—É—Å–∫–∞');
        }
        
        // –°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
        const newAd = await advertisementManager.createAd(adData);
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        showNotification('–û–±—ä—è–≤–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–æ –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é!', 'success');
        
        // –û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É
        form.reset();
        clearImagePreview();
        
        // –û–±–Ω–æ–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        updateProfileNotifications();
        
        // –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        setTimeout(() => {
            closeCurrentModal();
            // –ü–æ–∫–∞–∑–∞—Ç—å –æ–∫–Ω–æ "–ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è"
            openMyAdsModal();
        }, 1500);
        
    } catch (error) {
        console.error('Error creating ad:', error);
        showNotification(error.message || '–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è', 'error');
    } finally {
        // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
    }
}

/**
 * –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è
 */
function handleImageUpload(e) {
    const files = e.target.files;
    const previewContainer = document.getElementById('image-preview');
    const maxImages = 10;
    
    if (!previewContainer) return;
    
    // –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤
    if (files.length > maxImages) {
        showNotification(`–ú–∞–∫—Å–∏–º—É–º ${maxImages} —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π`, 'error');
        e.target.value = '';
        return;
    }
    
    // –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ø—Ä–µ–≤—å—é
    clearImagePreview();
    
    // –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–µ–≤—å—é
    for (let i = 0; i < files.length; i++) {
        const file = files[i];
        
        // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–º–∞–∫—Å 5MB)
        if (file.size > 5 * 1024 * 1024) {
            showNotification(`–§–∞–π–ª ${file.name} —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π (–º–∞–∫—Å 5MB)`, 'error');
            continue;
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∏–ø —Ñ–∞–π–ª–∞
        if (!file.type.startsWith('image/')) {
            showNotification(`–§–∞–π–ª ${file.name} –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º`, 'error');
            continue;
        }
        
        // –°–æ–∑–¥–∞—Ç—å –ø—Ä–µ–≤—å—é
        const reader = new FileReader();
        reader.onload = function(e) {
            const imgContainer = document.createElement('div');
            imgContainer.className = 'image-preview-item';
            imgContainer.innerHTML = `
                <img src="${e.target.result}" alt="–ü—Ä–µ–≤—å—é ${i + 1}">
                <button type="button" 
                        class="image-preview-remove" 
                        onclick="removeImagePreview(${i})">√ó</button>
            `;
            previewContainer.appendChild(imgContainer);
        };
        reader.readAsDataURL(file);
    }
}

/**
 * –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
 */
function clearImagePreview() {
    const previewContainer = document.getElementById('image-preview');
    const fileInput = document.getElementById('ad-images');
    
    if (previewContainer) {
        previewContainer.innerHTML = '';
    }
    
    if (fileInput) {
        fileInput.value = '';
    }
}

/**
 * –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–µ–≤—å—é
 */
function removeImagePreview(index) {
    const previewContainer = document.getElementById('image-preview');
    const fileInput = document.getElementById('ad-images');
    
    if (!previewContainer || !fileInput) return;
    
    // –£–¥–∞–ª–∏—Ç—å –ø—Ä–µ–≤—å—é
    const items = previewContainer.querySelectorAll('.image-preview-item');
    if (items[index]) {
        items[index].remove();
    }
    
    // –û–±–Ω–æ–≤–∏—Ç—å input —Ñ–∞–π–ª–æ–≤
    const dt = new DataTransfer();
    const currentFiles = fileInput.files;
    
    for (let i = 0; i < currentFiles.length; i++) {
        if (i !== index) {
            dt.items.add(currentFiles[i]);
        }
    }
    
    fileInput.files = dt.files;
}

/**
 * –ü–æ–ª—É—á–∏—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
 */
function getUploadedImages() {
    const fileInput = document.getElementById('ad-images');
    const images = [];
    
    if (fileInput && fileInput.files) {
        for (let i = 0; i < fileInput.files.length; i++) {
            const file = fileInput.files[i];
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
            // –°–µ–π—á–∞—Å –ø—Ä–æ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∏–º—è —Ñ–∞–π–ª–∞
            images.push(file.name);
        }
    }
    
    return images;
}

/**
 * –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
 */
function editAd(adId) {
    showNotification('–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ', 'info');
}

/**
 * –£–¥–∞–ª–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
 */
function deleteAd(adId) {
    if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ?')) {
        if (advertisementManager.deleteAd(adId)) {
            showNotification('–û–±—ä—è–≤–ª–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ', 'success');
            renderMyAds();
            updateProfileNotifications();
        } else {
            showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏', 'error');
        }
    }
}

/**
 * –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
 */
function showNotification(message, type = 'info') {
    // –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    const oldNotifications = document.querySelectorAll('.notification');
    oldNotifications.forEach(n => n.remove());
    
    const notification = document.createElement('div');
    notification.className = `notification ${type}`;
    
    const icons = {
        success: '‚úÖ',
        error: '‚ùå',
        info: '‚ÑπÔ∏è',
        warning: '‚ö†Ô∏è'
    };
    
    notification.innerHTML = `
        <div class="notification-icon">${icons[type] || '‚ÑπÔ∏è'}</div>
        <div class="notification-content">
            <div class="notification-title">${
                type === 'success' ? '–£—Å–ø–µ—à–Ω–æ!' : 
                type === 'error' ? '–û—à–∏–±–∫–∞!' : 
                type === 'warning' ? '–í–Ω–∏–º–∞–Ω–∏–µ!' : 
                '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è'
            }</div>
            <div class="notification-message">${message}</div>
        </div>
        <button class="notification-close" onclick="this.parentElement.remove()">√ó</button>
    `;
    
    document.body.appendChild(notification);
    
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
    setTimeout(() => {
        if (notification.parentNode) {
            notification.remove();
        }
    }, 5000);
}

/**
 * –û–±–Ω–æ–≤–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ —Å–∏–º–≤–æ–ª–æ–≤
 */
function updateCharCounter(input, counterId) {
    const counter = document.getElementById(counterId);
    if (counter) {
        counter.textContent = `${input.value.length}/${input.maxLength || 100}`;
    }
}

/**
 * –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π
 */
function setupAdEventListeners() {
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è" –≤ –º–æ–±–∏–ª—å–Ω–æ–º –º–µ–Ω—é
    const myAdsMenuBtn = document.querySelector('[data-view="my-ads"]');
    if (myAdsMenuBtn) {
        myAdsMenuBtn.addEventListener('click', openMyAdsModal);
    }
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–†–∞–∑–º–µ—Å—Ç–∏—Ç—å" –≤ –Ω–∏–∂–Ω–µ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
    const addAdNavBtn = document.querySelector('[data-view="add-ad"]');
    if (addAdNavBtn) {
        addAdNavBtn.addEventListener('click', openAddAdModal);
    }
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ü—Ä–æ—Ñ–∏–ª—å" –≤ –Ω–∏–∂–Ω–µ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
    const profileNavBtn = document.querySelector('[data-view="my-ads"]');
    if (profileNavBtn) {
        profileNavBtn.addEventListener('click', openMyAdsModal);
    }
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–æ—Ä–º—ã
    const form = document.getElementById('ad-form');
    if (form) {
        form.addEventListener('submit', handleAdSubmit);
    }
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—á–µ—Ç—á–∏–∫–æ–≤ —Å–∏–º–≤–æ–ª–æ–≤
    const titleInput = document.getElementById('ad-title');
    const descInput = document.getElementById('ad-description');
    
    if (titleInput) {
        titleInput.addEventListener('input', function() {
            updateCharCounter(this, 'ad-title-counter');
        });
        
        // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è —Å—á–µ—Ç—á–∏–∫–∞, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
        if (!document.getElementById('ad-title-counter')) {
            const counter = document.createElement('div');
            counter.id = 'ad-title-counter';
            counter.className = 'char-counter';
            counter.textContent = `0/${titleInput.maxLength || 100}`;
            titleInput.parentNode.appendChild(counter);
        }
    }
    
    if (descInput) {
        descInput.addEventListener('input', function() {
            updateCharCounter(this, 'ad-desc-counter');
        });
        
        if (!document.getElementById('ad-desc-counter')) {
            const counter = document.createElement('div');
            counter.id = 'ad-desc-counter';
            counter.className = 'char-counter';
            counter.textContent = `0/${descInput.maxLength || 2000}`;
            descInput.parentNode.appendChild(counter);
        }
    }
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    const imagesInput = document.getElementById('ad-images');
    if (imagesInput) {
        imagesInput.addEventListener('change', handleImageUpload);
    }
}

/**
 * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
 */
function initializeAdManager() {
    advertisementManager = new AdvertisementManager();
    console.log('‚úÖ Advertisement manager initialized');
    
    setupAdEventListeners();
    updateProfileNotifications();
}

// ========== –û–°–ù–û–í–ù–´–ï –§–£–ù–ö–¶–ò–ò –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø ==========

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
document.addEventListener('DOMContentLoaded', function() {
    try {
        initApp();
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
        setTimeout(() => {
            initializeEnhancedSearch();
            initializeTelegramIntegration();
            initializeAdManager();
            
            console.log('%cüöÄ –ö–§–õ –õ–∏–∑–∏–Ω–≥ - –£–ª—É—á—à–µ–Ω–∏—è –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã', 'color: #FFD700; font-size: 16px; font-weight: bold;');
            console.log('üìä –ó–∞–≥—Ä—É–∂–µ–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤:', productsData?.length || 0);
        }, 500);
    } catch (error) {
        console.error('Error initializing app:', error);
        showErrorState('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
    }
});

function initApp() {
    updateCategoryCounts();
    renderCategories();
    renderProducts();
    updateFavoritesCounters();
    populateRegions();
    setupEventListeners();
    setupImageErrorHandlers({ placeholderType: 'gradient' });
}

function updateCategoryCounts() {
    categoriesData.forEach(cat => {
        if (cat.id === 'all') {
            cat.count = productsData.length;
        } else {
            cat.count = productsData.filter(p => p.category === cat.id).length;
        }
    });
}

// –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ä–µ–≥–∏–æ–Ω–æ–≤
function populateRegions() {
    const regionSelect = document.getElementById('region-select');
    if (regionSelect) {
        regionSelect.innerHTML = '<option value="">–í—Å–µ —Ä–µ–≥–∏–æ–Ω—ã</option>' + 
            regionsData.filter(region => region !== "–í—Å–µ —Ä–µ–≥–∏–æ–Ω—ã")
                .map(region => `<option value="${region}">${region}</option>`)
                .join('');
        
        if (state.filters.region) {
            regionSelect.value = state.filters.region;
        }
    }
}

// Setup Event Listeners —Å –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
function setupEventListeners() {
    // Search input —Å debounce
    if (elements.searchInput) {
        const debouncedSearch = debounce((value) => {
            state.searchQuery = value;
            state.currentPage = 1;
            renderProducts();
        }, APP_CONFIG.DEBOUNCE_DELAY);
        
        elements.searchInput.addEventListener('input', (e) => {
            debouncedSearch(e.target.value);
        });
    }
    
    // Sort buttons
    if (elements.sortSection) {
        elements.sortSection.addEventListener('click', (e) => {
            const sortBtn = e.target.closest('.sort-btn');
            if (sortBtn) {
                const sortType = sortBtn.dataset.sort;
                const action = sortBtn.dataset.action;
                
                if (action === 'filters') {
                    openFiltersModal();
                } else if (sortType) {
                    setSort(sortType);
                }
            }
        });
    }
    
    // Categories
    if (elements.categories) {
        elements.categories.addEventListener('click', (e) => {
            const categoryBtn = e.target.closest('.category-btn');
            if (categoryBtn) {
                setCategory(categoryBtn.dataset.category);
            }
        });
    }
    
    // Products grid
    if (elements.productsGrid) {
        elements.productsGrid.addEventListener('click', (e) => {
            const productCard = e.target.closest('.product-card');
            const favoriteBtn = e.target.closest('.favorite-btn');
            
            if (favoriteBtn) {
                const productId = parseInt(favoriteBtn.dataset.productId);
                toggleFavorite(productId, e);
                return;
            }
            
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É
            if (productCard && !e.target.closest('.favorite-btn')) {
                const favoriteBtn = productCard.querySelector('.favorite-btn');
                if (favoriteBtn) {
                    const productId = parseInt(favoriteBtn.dataset.productId);
                    openProductModal(productId);
                }
                return;
            }
            
            // –û—Å—Ç–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
            const detailsBtn = e.target.closest('[data-action="details"]');
            if (detailsBtn) {
                const productId = parseInt(detailsBtn.dataset.productId);
                openProductModal(productId);
                return;
            }
            
            const leasingBtn = e.target.closest('[data-action="leasing"]');
            if (leasingBtn) {
                const productId = parseInt(leasingBtn.dataset.productId);
                requestLeasing(productId);
            }
        });
    }
    
    // Mobile menu
    const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
    if (mobileMenuBtn) {
        mobileMenuBtn.addEventListener('click', toggleMobileMenu);
    }
    
    const mobileMenuClose = document.querySelector('.mobile-menu-close');
    if (mobileMenuClose) {
        mobileMenuClose.addEventListener('click', toggleMobileMenu);
    }
    
    if (elements.mobileMenu) {
        elements.mobileMenu.addEventListener('click', (e) => {
            const menuItem = e.target.closest('.mobile-menu-item');
            if (menuItem) {
                const view = menuItem.dataset.view;
                if (view === 'filters') {
                    openFiltersModal();
                } else if (view === 'my-ads') {
                    openMyAdsModal();
                } else {
                    showView(view);
                }
                toggleMobileMenu();
            }
        });
    }
    
    // Footer navigation
    const footerNav = document.querySelector('.footer-nav');
    if (footerNav) {
        footerNav.addEventListener('click', (e) => {
            const navItem = e.target.closest('.nav-item');
            if (navItem) {
                const view = navItem.dataset.view;
                if (view === 'add-ad') {
                    openAddAdModal();
                } else {
                    showView(view);
                }
            }
        });
    }
    
    // Modal close buttons
    document.querySelectorAll('.modal-close').forEach(btn => {
        btn.addEventListener('click', closeCurrentModal);
    });
    
    // Filter modal buttons
    const applyFiltersBtn = document.querySelector('[data-action="apply-filters"]');
    if (applyFiltersBtn) {
        applyFiltersBtn.addEventListener('click', applyFilters);
    }
    
    const closeFiltersBtn = document.querySelector('[data-action="close-filters"]');
    if (closeFiltersBtn) {
        closeFiltersBtn.addEventListener('click', closeFiltersModal);
    }
    
    // Close add-ad modal button
    const closeAddAdBtn = document.querySelector('[data-action="close-add-ad"]');
    if (closeAddAdBtn) {
        closeAddAdBtn.addEventListener('click', closeCurrentModal);
    }
    
    // Close contacts modal button
    const closeContactsBtn = document.querySelector('[data-action="close-contacts"]');
    if (closeContactsBtn) {
        closeContactsBtn.addEventListener('click', closeCurrentModal);
    }

    // Close calculator modal button
    const closeCalculatorBtn = document.querySelector('[data-action="close-calculator"]');
    if (closeCalculatorBtn) {
        closeCalculatorBtn.addEventListener('click', closeCurrentModal);
    }

    // Filter clear buttons
    document.querySelectorAll('[data-clear]').forEach(btn => {
        btn.addEventListener('click', (e) => {
            const filter = e.target.dataset.clear;
            clearFilter(filter);
        });
    });
    
    // Close modals when clicking outside
    document.querySelectorAll('.modal').forEach(modal => {
        modal.addEventListener('click', (e) => {
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫–ª–∏–∫ –±—ã–ª –ø–æ —Å–∞–º–æ–º—É .modal (—Ñ–æ–Ω—É), –∞ –Ω–µ –ø–æ –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É
            if (e.target === modal) {
                closeCurrentModal();
            }
        });
    });
    
    // Price range
    const priceRange = document.getElementById('price-range');
    if (priceRange) {
        priceRange.addEventListener('input', (e) => {
            updatePriceValue(e.target.value);
        });
    }
    
    // Year range sliders
    const yearMin = document.getElementById('year-min');
    const yearMax = document.getElementById('year-max');
    if (yearMin && yearMax) {
        yearMin.addEventListener('input', updateYearRange);
        yearMax.addEventListener('input', updateYearRange);
    }
    
    // Region select
    const regionSelect = document.getElementById('region-select');
    if (regionSelect) {
        regionSelect.addEventListener('change', (e) => {
            setRegionFilter(e.target.value);
        });
    }
    
    // Contact modal actions
    const callBtn = document.querySelector('[data-action="call"]');
    if (callBtn) {
        callBtn.addEventListener('click', makeCall);
    }
    
    const emailBtn = document.querySelector('[data-action="email"]');
    if (emailBtn) {
        emailBtn.addEventListener('click', sendEmail);
    }
    
    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            if (state.isMobileMenuOpen) {
                toggleMobileMenu();
            }
            if (state.currentModal) {
                closeCurrentModal();
            }
        }
    });
    
    // Close mobile menu on click outside
    document.addEventListener('click', (e) => {
        if (state.isMobileMenuOpen && 
            !e.target.closest('.mobile-menu') && 
            !e.target.closest('.mobile-menu-btn')) {
            toggleMobileMenu();
        }
    });
}

// Render Categories
function renderCategories() {
    if (!elements.categories) return;
    
    elements.categories.innerHTML = categoriesData.map(cat => `
        <button class="category-btn ${state.currentCategory === cat.id ? 'active' : ''}"
                data-category="${cat.id}"
                role="tab"
                aria-selected="${state.currentCategory === cat.id}"
                aria-controls="products-grid">
            <span aria-hidden="true">${cat.icon}</span> ${cat.name}
            <span class="category-count">(${cat.count})</span>
        </button>
    `).join('');
}

// Render Products
function renderProducts() {
    if (!elements.productsGrid || !elements.loading) return;
    
    elements.loading.style.display = 'block';
    elements.productsGrid.innerHTML = '';
    
    setTimeout(() => {
        try {
            const filteredProducts = filterProducts();
            const sortedProducts = sortProducts(filteredProducts);
            const paginatedProducts = paginateProducts(sortedProducts);
            
            if (paginatedProducts.length === 0) {
                showEmptyState();
            } else {
                hideEmptyState();
                renderProductCards(paginatedProducts);
                renderPagination(filteredProducts.length);
            }
        } catch (error) {
            console.error('Error rendering products:', error);
            showErrorState('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤');
        } finally {
            elements.loading.style.display = 'none';
        }
    }, 300);
}

function renderProductCards(products) {
    elements.productsGrid.innerHTML = products.map(product => {
        const isFavorite = state.favorites.includes(product.id);
        return `
            <article class="product-card">
                <button class="favorite-btn ${isFavorite ? 'active' : ''}" 
                        data-product-id="${product.id}"
                        aria-label="${isFavorite ? '–£–¥–∞–ª–∏—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ' : '–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ'}"
                        aria-pressed="${isFavorite}">
                    ${isFavorite ? '‚ù§Ô∏è' : 'ü§ç'}
                </button>
                
                <div class="product-image-container">
                    <img src="${product.image}" 
                         alt="${product.title}" 
                         class="product-image" 
                         loading="lazy"
                         onerror="handleImageError(this, { placeholderType: 'gradient' })">
                </div>
                
                <div class="product-content">
                    <h3 class="product-title">${product.title}</h3>
                    <div class="product-price-section">
                        <div class="product-price price-formatted">${formatFullPrice(product.price)}</div>
                        <div class="product-price-note">—Å –ù–î–°</div>
                    </div>
                </div>
            </article>
        `;
    }).join('');
}

// Filter Products
function filterProducts() {
    let filtered = productsData;
    
    // –ö–∞—Ç–µ–≥–æ—Ä–∏—è
    if (state.currentCategory !== 'all') {
        filtered = filtered.filter(p => p.category === state.currentCategory);
    }
    
    // –£–õ–£–ß–®–ï–ù–ù–´–ô –ü–û–ò–°–ö —Å fuzzy matching
    if (state.searchQuery && fuzzySearchInstance) {
        const searchResults = fuzzySearchInstance.search(state.searchQuery);
        const searchedIds = searchResults.map(r => r.item.id);
        filtered = filtered.filter(p => searchedIds.includes(p.id));
        
        // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
        filtered.sort((a, b) => {
            const scoreA = searchResults.find(r => r.item.id === a.id)?.score || 0;
            const scoreB = searchResults.find(r => r.item.id === b.id)?.score || 0;
            return scoreB - scoreA;
        });
    }
    
    // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
    if (state.filters.maxPrice && state.filters.maxPrice < APP_CONFIG.DEFAULT_MAX_PRICE) {
        filtered = filtered.filter(p => p.price <= state.filters.maxPrice);
    }
    
    if (state.filters.minYear || state.filters.maxYear) {
        const minYear = state.filters.minYear || APP_CONFIG.YEAR_RANGE.min;
        const maxYear = state.filters.maxYear || APP_CONFIG.YEAR_RANGE.max;
        filtered = filtered.filter(p => p.year >= minYear && p.year <= maxYear);
    }
    
    if (state.filters.region) {
        filtered = filtered.filter(p => p.location.includes(state.filters.region));
    }
    
    return filtered;
}

// Sort Products
function sortProducts(products) {
    const sorted = [...products];
    
    switch(state.sortBy) {
        case 'price_asc':
            return sorted.sort((a, b) => a.price - b.price);
        case 'price_desc':
            return sorted.sort((a, b) => b.price - a.price);
        case 'year_desc':
            return sorted.sort((a, b) => b.year - a.year);
        case 'year_asc':
            return sorted.sort((a, b) => a.year - b.year);
        default:
            return sorted;
    }
}

// Paginate Products
function paginateProducts(products) {
    const start = (state.currentPage - 1) * state.itemsPerPage;
    const end = start + state.itemsPerPage;
    return products.slice(start, end);
}

// Render Pagination
function renderPagination(totalItems) {
    if (!elements.pagination) return;
    
    const totalPages = Math.ceil(totalItems / state.itemsPerPage);
    
    if (totalPages <= 1) {
        elements.pagination.style.display = 'none';
        return;
    }
    
    elements.pagination.style.display = 'flex';
    
    let html = `
        <button class="page-btn" 
                onclick="changePage(${state.currentPage - 1})" 
                ${state.currentPage === 1 ? 'disabled' : ''}
                aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞">
            ‚Üê
        </button>
    `;
    
    const maxVisible = window.innerWidth < 480 ? 3 : 5;
    let startPage = Math.max(1, state.currentPage - Math.floor(maxVisible / 2));
    let endPage = Math.min(totalPages, startPage + maxVisible - 1);
    
    if (endPage - startPage + 1 < maxVisible) {
        startPage = Math.max(1, endPage - maxVisible + 1);
    }
    
    if (startPage > 1) {
        html += `
            <button class="page-btn" onclick="changePage(1)">1</button>
            ${startPage > 2 ? '<span class="page-btn" style="cursor: default; background: transparent; border: none;">...</span>' : ''}
        `;
    }
    
    for (let i = startPage; i <= endPage; i++) {
        html += `
            <button class="page-btn ${i === state.currentPage ? 'active' : ''}" 
                    onclick="changePage(${i})"
                    aria-label="–°—Ç—Ä–∞–Ω–∏—Ü–∞ ${i}"
                    ${i === state.currentPage ? 'aria-current="page"' : ''}>
                ${i}
            </button>
        `;
    }
    
    if (endPage < totalPages) {
        html += `
            ${endPage < totalPages - 1 ? '<span class="page-btn" style="cursor: default; background: transparent; border: none;">...</span>' : ''}
            <button class="page-btn" onclick="changePage(${totalPages})">${totalPages}</button>
        `;
    }
    
    html += `
        <button class="page-btn" 
                onclick="changePage(${state.currentPage + 1})" 
                ${state.currentPage === totalPages ? 'disabled' : ''}
                aria-label="–°–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞">
            ‚Üí
        </button>
    `;
    
    elements.pagination.innerHTML = html;
}

function changePage(page) {
    const totalPages = Math.ceil(filterProducts().length / state.itemsPerPage);
    if (page < 1 || page > totalPages) return;
    
    state.currentPage = page;
    renderProducts();
    
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

// Helper Functions
function getCategoryName(categoryId) {
    const category = categoriesData.find(c => c.id === categoryId);
    return category ? category.name : '';
}

function showEmptyState() {
    if (elements.emptyState) {
        elements.emptyState.style.display = 'block';
        elements.emptyState.innerHTML = `
            <div class="empty-icon" aria-hidden="true">üîç</div>
            <h3>–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>
            <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä—ã</p>
        `;
    }
    elements.productsGrid.style.display = 'none';
    if (elements.pagination) elements.pagination.style.display = 'none';
}

function hideEmptyState() {
    if (elements.emptyState) {
        elements.emptyState.style.display = 'none';
    }
    elements.productsGrid.style.display = 'grid';
}

function showErrorState(message) {
    if (elements.emptyState) {
        elements.emptyState.innerHTML = `
            <div class="empty-icon" aria-hidden="true">‚ö†Ô∏è</div>
            <h3>–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫</h3>
            <p>${message}</p>
        `;
        elements.emptyState.style.display = 'block';
    }
    elements.productsGrid.style.display = 'none';
    if (elements.pagination) elements.pagination.style.display = 'none';
}

// Category and Sort
function setCategory(categoryId) {
    state.currentCategory = categoryId;
    state.currentPage = 1;
    renderCategories();
    renderProducts();
}

function setSort(sortType) {
    state.sortBy = sortType;
    state.currentPage = 1;
    
    // Update active state
    document.querySelectorAll('.sort-btn').forEach(btn => {
        btn.classList.remove('active');
        btn.setAttribute('aria-pressed', 'false');
        if (btn.dataset.sort === sortType) {
            btn.classList.add('active');
            btn.setAttribute('aria-pressed', 'true');
        }
    });
    
    renderProducts();
}

// Favorites
function toggleFavorite(productId, event) {
    if (event) event.stopPropagation();
    
    const index = state.favorites.indexOf(productId);
    if (index > -1) {
        state.favorites.splice(index, 1);
    } else {
        state.favorites.push(productId);
    }
    
    updateFavoritesCounters();
    
    if (state.currentView === 'favorites') {
        renderProducts();
    } else {
        // Update only the button
        const btn = document.querySelector(`[data-product-id="${productId}"]`);
        if (btn) {
            const isFavorite = state.favorites.includes(productId);
            btn.classList.toggle('active', isFavorite);
            btn.textContent = isFavorite ? '‚ù§Ô∏è' : 'ü§ç';
            btn.setAttribute('aria-pressed', isFavorite);
            btn.setAttribute('aria-label', isFavorite ? '–£–¥–∞–ª–∏—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ' : '–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ');
        }
    }
}

function updateFavoritesCounters() {
    const count = state.favorites.length;
    
    if (elements.mobileFavoritesCount) {
        elements.mobileFavoritesCount.textContent = count;
    }
    
    if (elements.footerFavoritesBadge) {
        elements.footerFavoritesBadge.textContent = count;
        elements.footerFavoritesBadge.style.display = count > 0 ? 'block' : 'none';
    }
}

// Views
function showView(view) {
    state.currentView = view;
    
    // Update navigation
    document.querySelectorAll('.nav-item, .mobile-menu-item').forEach(item => {
        item.classList.remove('active');
        item.removeAttribute('aria-current');
    });
    
    document.querySelectorAll(`[data-view="${view}"]`).forEach(item => {
        item.classList.add('active');
        item.setAttribute('aria-current', 'page');
    });
    
    switch(view) {
        case 'catalog':
            state.currentCategory = 'all';
            renderProducts();
            break;
        case 'favorites':
            showFavorites();
            break;
        case 'calculator':
            openCalculatorModal();
            break;
        case 'contacts':
            openContactsModal();
            break;
        case 'rating':
            openRatingModal();
            break;
        case 'add-ad':
            openAddAdModal();
            break;
        case 'my-ads':
            openMyAdsModal();
            break;
        default:
            // –î–ª—è –Ω–æ–≤—ã—Ö –≤—å—é—à–µ–∫ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
            break;
    }
}

function showFavorites() {
    const favoriteProducts = productsData.filter(p => state.favorites.includes(p.id));
    
    if (favoriteProducts.length === 0) {
        elements.productsGrid.style.display = 'none';
        if (elements.emptyState) {
            elements.emptyState.innerHTML = `
                <div class="empty-icon" aria-hidden="true">‚ù§Ô∏è</div>
                <h3>–í –∏–∑–±—Ä–∞–Ω–Ω–æ–º –ø–æ–∫–∞ –ø—É—Å—Ç–æ</h3>
                <p>–î–æ–±–∞–≤–ª—è–π—Ç–µ —Ç–æ–≤–∞—Ä—ã, –Ω–∞–∂–∏–º–∞—è –Ω–∞ —Å–µ—Ä–¥–µ—á–∫–æ</p>
            `;
            elements.emptyState.style.display = 'block';
        }
        if (elements.pagination) elements.pagination.style.display = 'none';
    } else {
        hideEmptyState();
        renderProductCards(favoriteProducts);
        if (elements.pagination) elements.pagination.style.display = 'none';
    }
}

// Mobile Menu
function toggleMobileMenu() {
    if (!elements.mobileMenu) return;
    
    state.isMobileMenuOpen = !state.isMobileMenuOpen;
    
    const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
    
    if (state.isMobileMenuOpen) {
        elements.mobileMenu.style.display = 'flex';
        setTimeout(() => {
            elements.mobileMenu.classList.add('active');
        }, 10);
        document.body.style.overflow = 'hidden';
        if (mobileMenuBtn) {
            mobileMenuBtn.setAttribute('aria-expanded', 'true');
        }
    } else {
        elements.mobileMenu.classList.remove('active');
        setTimeout(() => {
            elements.mobileMenu.style.display = 'none';
        }, 300);
        document.body.style.overflow = '';
        if (mobileMenuBtn) {
            mobileMenuBtn.setAttribute('aria-expanded', 'false');
        }
    }
    
    updateFavoritesCounters();
}

// Modals
function openProductModal(productId) {
    const product = productsData.find(p => p.id === productId);
    if (!product) return;
    
    const isFavorite = state.favorites.includes(product.id);
    const modalBody = document.getElementById('modal-body');
    const modal = document.getElementById('product-modal');
    
    if (!modalBody || !modal) return;
    
    modalBody.innerHTML = `
        <div class="modal-image-container">
            <img src="${product.image}" 
                 alt="${product.title}" 
                 class="modal-image" 
                 onerror="handleImageError(this, { placeholderType: 'gradient' })">
        </div>
        
        <div class="modal-section">
            <h3 class="modal-section-title">${product.title}</h3>
            <div class="modal-tags">
                <div class="modal-tag">${getCategoryName(product.category)}</div>
                <div class="modal-tag">${product.year} –≥–æ–¥</div>
                <div class="modal-tag">üìç ${product.location}</div>
            </div>
        </div>
        
        <div class="modal-section">
            <h3 class="modal-section-title">üìã –û–ø–∏—Å–∞–Ω–∏–µ</h3>
            <div class="modal-section-content">
                <p>${product.details}</p>
            </div>
        </div>
        
        <div class="modal-section">
            <h3 class="modal-section-title">‚öôÔ∏è –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h3>
            <div class="modal-section-content">
                <p><strong>–î–≤–∏–≥–∞—Ç–µ–ª—å:</strong> ${product.engine}</p>
                <p><strong>–ù–∞—Ä–∞–±–æ—Ç–∫–∞:</strong> ${product.hours}</p>
                <p><strong>–°–æ—Å—Ç–æ—è–Ω–∏–µ:</strong> –û—Ç–ª–∏—á–Ω–æ–µ</p>
            </div>
        </div>
        
        <div class="modal-section">
            <h3 class="modal-section-title">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å</h3>
            <div class="modal-section-content">
                <div style="font-size: 28px; font-weight: 800; color: var(--primary); margin: 10px 0;" class="price-formatted">
                    ${formatFullPrice(product.price)}
                </div>
                <p style="color: var(--text-secondary);">—Å –ù–î–°, –≤–æ–∑–º–æ–∂–µ–Ω –ª–∏–∑–∏–Ω–≥</p>
            </div>
        </div>
        
        <div class="modal-actions">
            <button class="btn btn-primary" 
                    style="flex: 2;" 
                    onclick="requestLeasing(${product.id})">
                üìù –ó–∞–ø—Ä–æ—Å–∏—Ç—å –ª–∏–∑–∏–Ω–≥
            </button>
            <button class="btn btn-secondary" 
                    style="flex: 1;" 
                    onclick="toggleFavorite(${product.id})">
                ${isFavorite ? '‚ù§Ô∏è' : 'ü§ç'}
            </button>
        </div>
    `;
    
    modal.style.display = 'block';
    document.body.style.overflow = 'hidden';
    state.currentModal = 'product';
    
    if (tg) tg.BackButton.show();
}

function closeCurrentModal() {
    const modals = document.querySelectorAll('.modal');
    modals.forEach(modal => {
        modal.style.display = 'none';
    });
    
    document.body.style.overflow = '';
    state.currentModal = null;
    
    if (tg) tg.BackButton.hide();
}

// Filters Modal
function openFiltersModal() {
    fillFiltersModal();
    
    const modal = document.getElementById('filters-modal');
    if (modal) {
        modal.style.display = 'block';
        document.body.style.overflow = 'hidden';
    }
    
    state.currentModal = 'filters';
    if (tg) tg.BackButton.show();
}

function fillFiltersModal() {
    // Category filters
    const categoryFilters = document.getElementById('category-filters');
    if (categoryFilters) {
        categoryFilters.innerHTML = categoriesData
            .filter(cat => cat.id !== 'all')
            .map(cat => `
                <button class="filter-option ${state.filters.category === cat.id ? 'active' : ''}"
                        onclick="setModalFilter('category', '${cat.id}')">
                    ${cat.icon} ${cat.name} (${cat.count})
                </button>
            `).join('');
    }
    
    // Year range
    const yearMin = document.getElementById('year-min');
    const yearMax = document.getElementById('year-max');
    const yearMinValue = document.getElementById('year-min-value');
    const yearMaxValue = document.getElementById('year-max-value');
    
    if (yearMin && yearMax && yearMinValue && yearMaxValue) {
        const years = productsData.map(p => p.year);
        const minYear = Math.min(...years);
        const maxYear = Math.max(...years);
        
        yearMin.min = minYear;
        yearMax.min = minYear;
        yearMin.max = maxYear;
        yearMax.max = maxYear;
        
        yearMin.value = state.filters.minYear || minYear;
        yearMax.value = state.filters.maxYear || maxYear;
        
        yearMinValue.textContent = yearMin.value;
        yearMaxValue.textContent = yearMax.value;
        
        updateYearRange();
    }
    
    // Region
    const regionSelect = document.getElementById('region-select');
    if (regionSelect) {
        regionSelect.value = state.filters.region || '';
    }
    
    // Price
    const priceRange = document.getElementById('price-range');
    const priceValue = document.getElementById('price-value');
    if (priceRange && priceValue && state.filters.maxPrice) {
        priceRange.value = state.filters.maxPrice;
        priceValue.textContent = state.filters.maxPrice === APP_CONFIG.DEFAULT_MAX_PRICE 
            ? '100 000 000+ ‚ÇΩ' 
            : formatFullPrice(state.filters.maxPrice);
    }
}

function updateYearRange() {
    const yearMin = document.getElementById('year-min');
    const yearMax = document.getElementById('year-max');
    const yearMinValue = document.getElementById('year-min-value');
    const yearMaxValue = document.getElementById('year-max-value');
    const yearTrackFilled = document.getElementById('year-track-filled');
    
    if (!yearMin || !yearMax || !yearMinValue || !yearMaxValue || !yearTrackFilled) return;
    
    if (parseInt(yearMin.value) > parseInt(yearMax.value)) {
        const temp = yearMin.value;
        yearMin.value = yearMax.value;
        yearMax.value = temp;
    }
    
    yearMinValue.textContent = yearMin.value;
    yearMaxValue.textContent = yearMax.value;
    
    const min = parseInt(yearMin.min);
    const max = parseInt(yearMax.max);
    const minVal = parseInt(yearMin.value);
    const maxVal = parseInt(yearMax.value);
    
    const percent1 = ((minVal - min) / (max - min)) * 100;
    const percent2 = ((maxVal - min) / (max - min)) * 100;
    
    yearTrackFilled.style.left = percent1 + '%';
    yearTrackFilled.style.width = (percent2 - percent1) + '%';
}

function setModalFilter(filter, value) {
    const option = event.target;
    const isActive = option.classList.contains('active');
    
    if (isActive) {
        state.filters[filter] = null;
        option.classList.remove('active');
    } else {
        state.filters[filter] = value;
        option.parentNode.querySelectorAll('.filter-option').forEach(opt => {
            opt.classList.remove('active');
        });
        option.classList.add('active');
    }
}

function setRegionFilter(value) {
    state.filters.region = value || null;
}

function clearFilter(filter) {
    if (filter === 'category') {
        state.filters.category = null;
        const options = document.querySelectorAll('#category-filters .filter-option');
        options.forEach(opt => opt.classList.remove('active'));
    } else if (filter === 'price') {
        state.filters.maxPrice = APP_CONFIG.DEFAULT_MAX_PRICE;
        const priceRange = document.getElementById('price-range');
        const priceValue = document.getElementById('price-value');
        if (priceRange && priceValue) {
            priceRange.value = APP_CONFIG.DEFAULT_MAX_PRICE;
            priceValue.textContent = '100 000 000+ ‚ÇΩ';
        }
    } else if (filter === 'year') {
        state.filters.minYear = null;
        state.filters.maxYear = null;
        const yearMin = document.getElementById('year-min');
        const yearMax = document.getElementById('year-max');
        if (yearMin && yearMax) {
            const years = productsData.map(p => p.year);
            const minYear = Math.min(...years);
            const maxYear = Math.max(...years);
            yearMin.value = minYear;
            yearMax.value = maxYear;
            updateYearRange();
        }
    } else if (filter === 'region') {
        state.filters.region = null;
        const regionSelect = document.getElementById('region-select');
        if (regionSelect) {
            regionSelect.value = '';
        }
    }
}

function updatePriceValue(value) {
    const price = parseInt(value);
    const priceValue = document.getElementById('price-value');
    if (priceValue) {
        priceValue.textContent = price === APP_CONFIG.DEFAULT_MAX_PRICE 
            ? '100 000 000+ ‚ÇΩ' 
            : formatFullPrice(price);
    }
}

function applyFilters() {
    // Price
    const priceRange = document.getElementById('price-range');
    if (priceRange) {
        state.filters.maxPrice = priceRange.value === String(APP_CONFIG.DEFAULT_MAX_PRICE) 
            ? APP_CONFIG.DEFAULT_MAX_PRICE 
            : parseInt(priceRange.value);
    }
    
    // Year
    const yearMin = document.getElementById('year-min');
    const yearMax = document.getElementById('year-max');
    if (yearMin && yearMax) {
        const minYearValue = parseInt(yearMin.value);
        const maxYearValue = parseInt(yearMax.value);
        
        const years = productsData.map(p => p.year);
        const minYear = Math.min(...years);
        const maxYear = Math.max(...years);
        
        if (minYearValue === minYear && maxYearValue === maxYear) {
            state.filters.minYear = null;
            state.filters.maxYear = null;
        } else {
            state.filters.minYear = minYearValue;
            state.filters.maxYear = maxYearValue;
        }
    }
    
    // Region
    const regionSelect = document.getElementById('region-select');
    if (regionSelect) {
        state.filters.region = regionSelect.value || null;
    }
    
    closeFiltersModal();
    state.currentPage = 1;
    renderProducts();
}

function closeFiltersModal() {
    const modal = document.getElementById('filters-modal');
    if (modal) {
        modal.style.display = 'none';
        document.body.style.overflow = '';
    }
    state.currentModal = null;
    if (tg) tg.BackButton.hide();
}

// Calculator Modal
function openCalculatorModal() {
    const modal = document.getElementById('calculator-modal');
    if (modal) {
        modal.style.display = 'block';
        document.body.style.overflow = 'hidden';

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏
        if (!window.leasingCalculator) {
            window.leasingCalculator = new LeasingCalculator();
        } else {
            // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –µ—Å–ª–∏ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
            window.leasingCalculator.calculate();
        }
    }
    state.currentModal = 'calculator';
    if (tg) tg.BackButton.show();
}

function closeCalculatorModal() {
    const modal = document.getElementById('calculator-modal');
    if (modal) {
        modal.style.display = 'none';
        document.body.style.overflow = '';
    }
    state.currentModal = null;
    if (tg) tg.BackButton.hide();
}

// Contacts Modal
function openContactsModal() {
    const modal = document.getElementById('contacts-modal');
    if (modal) {
        modal.style.display = 'block';
        document.body.style.overflow = 'hidden';
    }
    state.currentModal = 'contacts';
    if (tg) tg.BackButton.show();
}

function closeContactsModal() {
    const modal = document.getElementById('contacts-modal');
    if (modal) {
        modal.style.display = 'none';
        document.body.style.overflow = '';
    }
    state.currentModal = null;
    if (tg) tg.BackButton.hide();
}

function makeCall() {
    if (tg) {
        tg.openTelegramLink('tel:+7XXXXXXXXXX');
    } else {
        window.location.href = 'tel:+7XXXXXXXXXX';
    }
}

function sendEmail() {
    if (tg) {
        tg.openTelegramLink('mailto:info@kuzfl.ru');
    } else {
        window.location.href = 'mailto:info@kuzfl.ru';
    }
}

// Rating Modal
function openRatingModal() {
    const modal = document.getElementById('rating-modal');
    if (modal) {
        modal.style.display = 'block';
        document.body.style.overflow = 'hidden';
    }
    state.currentModal = 'rating';
    if (tg) tg.BackButton.show();
}

function closeRatingModal() {
    const modal = document.getElementById('rating-modal');
    if (modal) {
        modal.style.display = 'none';
        document.body.style.overflow = '';
    }
    state.currentModal = null;
    if (tg) tg.BackButton.hide();
}

// Request Leasing
function requestLeasing(productId) {
    const product = productsData.find(p => p.id === productId);
    if (!product) {
        console.error('–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω');
        return;
    }
    
    if (!telegramRequestManager) {
        console.error('Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
        // Fallback –Ω–∞ —Å—Ç–∞—Ä—ã–π –º–µ—Ç–æ–¥
        if (tg) {
            tg.showPopup({
                title: '–ó–∞—è–≤–∫–∞ –Ω–∞ –ª–∏–∑–∏–Ω–≥',
                message: `–í—ã —Ö–æ—Ç–∏—Ç–µ –æ—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –ª–∏–∑–∏–Ω–≥ "${product.title}" –∑–∞ ${formatFullPrice(product.price)}?`,
                buttons: [
                    { id: 'yes', type: 'ok', text: '–î–∞, –æ—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É' },
                    { type: 'cancel' }
                ]
            }, (buttonId) => {
                if (buttonId === 'yes') {
                    tg.showAlert('–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –ú–µ–Ω–µ–¥–∂–µ—Ä –ö–§–õ —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.');
                    if (state.currentModal) closeCurrentModal();
                }
            });
        } else {
            if (confirm(`–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –ª–∏–∑–∏–Ω–≥ "${product.title}" –∑–∞ ${formatFullPrice(product.price)}?`)) {
                alert('–ó–∞—è–≤–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞! –° –≤–∞–º–∏ —Å–≤—è–∂—É—Ç—Å—è –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.');
                if (state.currentModal) closeCurrentModal();
            }
        }
        return;
    }

    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –∑–∞—è–≤–æ–∫
    telegramRequestManager.sendLeasingRequest(product);
    
    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ç–æ–≤–∞—Ä–∞
    if (state.currentModal) {
        closeCurrentModal();
    }
}

// ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –£–õ–£–ß–®–ï–ù–ò–ô ==========

/**
 * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
 */
function initializeEnhancedSearch() {
    if (!productsData || productsData.length === 0) {
        console.warn('‚ö†Ô∏è productsData –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
        return;
    }

    // –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä fuzzy search
    fuzzySearchInstance = new FuzzySearch(productsData, {
        keys: ['title', 'details', 'location'],
        threshold: 0.3,
        caseSensitive: false
    });

    // –ü–æ–ª—É—á–∞–µ–º input —ç–ª–µ–º–µ–Ω—Ç
    const searchInput = document.getElementById('search-input');
    
    if (searchInput && fuzzySearchInstance) {
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
        autocompleteInstance = new SearchAutocomplete(searchInput, {
            fuzzySearch: fuzzySearchInstance,
            maxSuggestions: 5,
            minChars: 2,
            onSelect: (product) => {
                // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
                openProductModal(product.id);
                
                // Haptic feedback –¥–ª—è Telegram
                if (tg) {
                    tg.HapticFeedback.impactOccurred('light');
                }
            },
            onSearch: (query) => {
                // –û–±–Ω–æ–≤–ª—è–µ–º state.searchQuery –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
                state.searchQuery = query;
                state.currentPage = 1;
                renderProducts();
            }
        });
        
        console.log('‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
    }
}

/**
 * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
 */
function initializeTelegramIntegration() {
    telegramRequestManager = new TelegramLeasingRequest({
        botUsername: '@kuzfl_bot',
        onSuccess: (requestData) => {
            console.log('‚úÖ –ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞:', requestData);
            
            // –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
            if (typeof gtag !== 'undefined') {
                gtag('event', 'leasing_request', {
                    product_id: requestData.product.id,
                    product_title: requestData.product.title,
                    product_price: requestData.product.price
                });
            }
        },
        onError: (error) => {
            console.error('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–∫–∏:', error);
        }
    });

    // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –æ–∂–∏–¥–∞—é—â–∏–µ –∑–∞—è–≤–∫–∏
    if (tg) {
        telegramRequestManager.syncPendingRequests();
    }
    
    console.log('‚úÖ Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
}

// –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∫–æ–Ω—Å–æ–ª–∏
window.testSearch = function(query) {
    if (!fuzzySearchInstance) {
        console.error('Fuzzy search –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
        return;
    }
    
    const results = fuzzySearchInstance.search(query);
    
    console.group(`üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞: "${query}"`);
    console.log(`–ù–∞–π–¥–µ–Ω–æ: ${results.length} —Ç–æ–≤–∞—Ä–æ–≤`);
    console.table(results.map(r => ({
        title: r.item.title,
        score: (r.score * 100).toFixed(1) + '%',
        category: r.item.category,
        price: r.item.price
    })));
    console.groupEnd();
    
    return results;
};

window.getSearchStatistics = function() {
    if (!fuzzySearchInstance) return null;
    
    return {
        totalProducts: productsData.length,
        searchThreshold: fuzzySearchInstance.threshold,
        searchKeys: fuzzySearchInstance.keys
    };
};

window.exportLeasingRequests = function() {
    if (!telegramRequestManager) return [];
    const requests = telegramRequestManager.getPendingRequests();
    console.table(requests);
    return requests;
};

// –°–¥–µ–ª–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ –¥–ª—è onclick –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
window.changePage = changePage;
window.toggleFavorite = toggleFavorite;
window.requestLeasing = requestLeasing;
window.setModalFilter = setModalFilter;
window.updateYearRange = updateYearRange;
window.updatePriceValue = updatePriceValue;
window.handleImageError = handleImageError;
window.openAddAdModal = openAddAdModal;
window.openMyAdsModal = openMyAdsModal;
window.editAd = editAd;
window.deleteAd = deleteAd;
window.removeImagePreview = removeImagePreview;
window.showNotification = showNotification;
window.closeCurrentModal = closeCurrentModal;
// ========== –§–£–ù–ö–¶–ò–Ø –û–¢–ö–†–´–¢–ò–Ø –°–û–ó–î–ê–ù–ò–Ø –û–ë–™–Ø–í–õ–ï–ù–ò–Ø –ò–ó –ü–†–û–§–ò–õ–Ø ==========

function openAddAdFromProfile() {
    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å
    const myAdsModal = document.getElementById('my-ads-modal');
    if (myAdsModal) {
        myAdsModal.style.display = 'none';
    }
    
    // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏
    setTimeout(() => {
        const addAdModal = document.getElementById('add-ad-modal');
        if (addAdModal) {
            addAdModal.style.display = 'flex';
        }
    }, 300);
}

// ========== –£–õ–£–ß–®–ï–ù–ò–Ø –î–õ–Ø –ú–û–î–ê–õ–¨–ù–´–• –û–ö–û–ù ==========

// –°—á–µ—Ç—á–∏–∫ —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è textarea
document.addEventListener('DOMContentLoaded', function() {
    const descriptionTextarea = document.getElementById('ad-description');
    const charCount = document.getElementById('char-count');
    
    if (descriptionTextarea && charCount) {
        descriptionTextarea.addEventListener('input', function() {
            charCount.textContent = this.value.length;
        });
    }
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –≤ –ø—Ä–æ—Ñ–∏–ª–µ
    updateProfileStats();
});

// –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è
function updateProfileStats() {
    const myAds = JSON.parse(localStorage.getItem('myAds') || '[]');
    const totalAdsElement = document.getElementById('total-ads-count');
    if (totalAdsElement) {
        totalAdsElement.textContent = myAds.length;
    }
}

// ========== –ê–ù–ò–ú–ê–¶–ò–Ø –ò–ó–ë–†–ê–ù–ù–û–ì–û ==========

// –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
function toggleFavoriteWithAnimation(productId, button) {
    const isActive = button.classList.contains('active');
    const isInModal = button.closest('#product-modal') !== null;
    
    if (!isActive) {
        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
        button.classList.add('animating');
        
        // –°–æ–∑–¥–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç –∑–≤–µ–∑–¥–æ—á–µ–∫
        createSparkles(button, isInModal);
        
        // –ü—É–ª—å—Å–∞—Ü–∏—è –±–µ–π–¥–∂–∞
        const badges = document.querySelectorAll('.nav-badge, #footer-favorites-badge');
        badges.forEach(badge => {
            badge.classList.add('pulse');
            setTimeout(() => badge.classList.remove('pulse'), 500);
        });
        
        // –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–æ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ç–æ–≤–∞—Ä–∞, –¥–æ–±–∞–≤–ª—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç –≤—Å–ø—ã—à–∫–∏
        if (isInModal) {
            const modalBody = document.querySelector('#product-modal .modal-body');
            if (modalBody) {
                modalBody.classList.add('favorite-flash');
                setTimeout(() => modalBody.classList.remove('favorite-flash'), 500);
            }
        }
        
        setTimeout(() => button.classList.remove('animating'), 600);
    } else {
        // –£–±–∏—Ä–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
        button.classList.add('animating');
        setTimeout(() => button.classList.remove('animating'), 300);
    }
    
    // –í—ã–∑—ã–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
    if (typeof toggleFavorite === 'function') {
        toggleFavorite(productId, button);
    }
}

// –°–æ–∑–¥–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ –∑–≤–µ–∑–¥–æ—á–µ–∫ –≤–æ–∫—Ä—É–≥ –∫–Ω–æ–ø–∫–∏
function createSparkles(button, isOrange = false) {
    const sparkles = ['‚ú®', '‚≠ê', 'üí´', 'üåü'];
    const positions = [
        { top: '-15px', left: '-15px' },
        { top: '-15px', right: '-15px' },
        { bottom: '-15px', left: '-15px' },
        { bottom: '-15px', right: '-15px' }
    ];
    
    positions.forEach((pos, index) => {
        const sparkle = document.createElement('div');
        sparkle.className = 'favorite-sparkle';
        sparkle.textContent = sparkles[index % sparkles.length];
        sparkle.style.cssText = Object.entries(pos).map(([k, v]) => `${k}: ${v}`).join('; ');
        
        // –ï—Å–ª–∏ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ - –æ—Ä–∞–Ω–∂–µ–≤—ã–µ –∑–≤–µ–∑–¥–æ—á–∫–∏
        if (isOrange) {
            sparkle.style.color = '#FF9800';
        }
        
        button.style.position = 'relative';
        button.appendChild(sparkle);
        
        setTimeout(() => sparkle.remove(), 800);
    });
}

// –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –∫–ª–∏–∫–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
document.addEventListener('click', function(e) {
    const favoriteBtn = e.target.closest('.favorite-btn');
    if (favoriteBtn && !favoriteBtn.classList.contains('animating')) {
        const productId = favoriteBtn.dataset.productId || 
                         favoriteBtn.closest('.product-card')?.dataset?.productId;
        if (productId) {
            e.stopPropagation();
            toggleFavoriteWithAnimation(productId, favoriteBtn);
        }
    }
});

// ========== –£–õ–£–ß–®–ï–ù–ò–Ø –ü–†–ï–î–ü–†–û–°–ú–û–¢–†–ê –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô ==========

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –ø—Ä–µ–≤—å—é
const adImagesInput = document.getElementById('ad-images');
const imagePreview = document.getElementById('image-preview');

if (adImagesInput && imagePreview) {
    adImagesInput.addEventListener('change', function(e) {
        imagePreview.innerHTML = '';
        const files = Array.from(e.target.files).slice(0, 10); // –ú–∞–∫—Å–∏–º—É–º 10 —Ñ–∞–π–ª–æ–≤
        
        files.forEach((file, index) => {
            if (file.type.startsWith('image/')) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    const previewItem = document.createElement('div');
                    previewItem.className = 'image-preview-item';
                    previewItem.style.animation = `fadeIn 0.3s ease-out ${index * 0.1}s both`;
                    
                    previewItem.innerHTML = `
                        <img src="${e.target.result}" alt="Preview ${index + 1}">
                        <button type="button" class="image-preview-remove" onclick="removePreviewImage(this)" title="–£–¥–∞–ª–∏—Ç—å">√ó</button>
                    `;
                    
                    imagePreview.appendChild(previewItem);
                };
                
                reader.readAsDataURL(file);
            }
        });
    });
}

// –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ –ø—Ä–µ–≤—å—é
function removePreviewImage(button) {
    const previewItem = button.closest('.image-preview-item');
    previewItem.style.animation = 'fadeOut 0.2s ease-out forwards';
    setTimeout(() => previewItem.remove(), 200);
}

// –î–æ–±–∞–≤–ª—è–µ–º CSS –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
if (!document.getElementById('preview-animations')) {
    const style = document.createElement('style');
    style.id = 'preview-animations';
    style.textContent = `
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes fadeOut {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0; transform: scale(0.8); }
        }
    `;
    document.head.appendChild(style);
}

// ========== –û–¢–ö–†–´–¢–ò–ï –ú–û–î–ê–õ–¨–ù–´–• –û–ö–û–ù –° –û–ë–ù–û–í–õ–ï–ù–ò–ï–ú –°–¢–ê–¢–ò–°–¢–ò–ö–ò ==========

// –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–∫—Ä—ã—Ç–∏—è –ø—Ä–æ—Ñ–∏–ª—è
const originalShowView = window.showView;
if (originalShowView) {
    window.showView = function(view) {
        if (view === 'my-ads') {
            updateProfileStats();
        }
        return originalShowView(view);
    };
}

console.log('‚ú® –£–ª—É—á—à–µ–Ω–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –∏ –∞–Ω–∏–º–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã');

// ========== –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† –õ–ò–ó–ò–ù–ì–ê ==========

class LeasingCalculator {
    constructor() {
        this.priceInput = document.getElementById('calc-price');
        this.advanceSlider = document.getElementById('calc-advance');
        this.termSlider = document.getElementById('calc-term');
        this.rateSlider = document.getElementById('calc-rate');

        this.init();
    }

    init() {
        if (!this.priceInput) return;

        this.priceInput.addEventListener('input', () => this.calculate());
        this.advanceSlider.addEventListener('input', () => this.calculate());
        this.termSlider.addEventListener('input', () => this.calculate());
        this.rateSlider.addEventListener('input', () => this.calculate());

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        this.calculate();
    }

    calculate() {
        // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è
        const price = parseFloat(this.priceInput.value) || 0;
        const advancePercent = parseFloat(this.advanceSlider.value);
        const term = parseInt(this.termSlider.value);
        const rate = parseFloat(this.rateSlider.value);

        // –†–∞—Å—á–µ—Ç—ã
        const advanceAmount = price * (advancePercent / 100);
        const financeAmount = price - advanceAmount;
        const monthlyRate = rate / 100 / 12;

        // –ê–Ω–Ω—É–∏—Ç–µ—Ç–Ω—ã–π –ø–ª–∞—Ç–µ–∂
        const monthlyPayment = financeAmount * (monthlyRate * Math.pow(1 + monthlyRate, term)) /
                              (Math.pow(1 + monthlyRate, term) - 1);

        const totalPayments = monthlyPayment * term;
        const overpayment = totalPayments - financeAmount;
        const totalAmount = price + overpayment;

        // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        document.getElementById('calc-price-display').textContent = this.formatMoney(price);
        document.getElementById('calc-advance-percent').textContent = `${advancePercent}%`;
        document.getElementById('calc-advance-display').textContent = this.formatMoney(advanceAmount);
        document.getElementById('calc-term-display').textContent = `${term} –º–µ—Å—è—Ü–µ–≤`;
        document.getElementById('calc-rate-display').textContent = `${rate}%`;

        document.getElementById('calc-monthly-payment').textContent = this.formatMoney(monthlyPayment);
        document.getElementById('calc-total-advance').textContent = this.formatMoney(advanceAmount);
        document.getElementById('calc-finance-amount').textContent = this.formatMoney(financeAmount);
        document.getElementById('calc-overpayment').textContent = this.formatMoney(overpayment);
        document.getElementById('calc-total-amount').textContent = this.formatMoney(totalAmount);

        // Haptic feedback –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
        this.hapticFeedback('light');
    }

    formatMoney(value) {
        if (isNaN(value) || !isFinite(value)) return '0 ‚ÇΩ';
        return new Intl.NumberFormat('ru-RU', {
            style: 'decimal',
            minimumFractionDigits: 0,
            maximumFractionDigits: 0
        }).format(value) + ' ‚ÇΩ';
    }

    hapticFeedback(type = 'light') {
        if (tg && tg.HapticFeedback) {
            tg.HapticFeedback.impactOccurred(type);
        }
    }
}

// –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤ openCalculatorModal)

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É" –≤ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–µ
document.addEventListener('DOMContentLoaded', function() {
    const calcSendBtn = document.getElementById('calc-send-request');
    if (calcSendBtn) {
        calcSendBtn.addEventListener('click', function() {
            const price = parseFloat(document.getElementById('calc-price').value) || 0;
            const term = parseInt(document.getElementById('calc-term').value);
            const advance = parseFloat(document.getElementById('calc-advance').value);
            const rate = parseFloat(document.getElementById('calc-rate').value);
            const monthlyPayment = document.getElementById('calc-monthly-payment').textContent;

            const message = `–ó–∞—è–≤–∫–∞ –∏–∑ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –ª–∏–∑–∏–Ω–≥–∞:\n\n` +
                           `–°—Ç–æ–∏–º–æ—Å—Ç—å —Ç–µ—Ö–Ω–∏–∫–∏: ${formatPrice(price)}\n` +
                           `–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å: ${advance}%\n` +
                           `–°—Ä–æ–∫: ${term} –º–µ—Å—è—Ü–µ–≤\n` +
                           `–°—Ç–∞–≤–∫–∞: ${rate}%\n` +
                           `–ï–∂–µ–º–µ—Å—è—á–Ω—ã–π –ø–ª–∞—Ç–µ–∂: ${monthlyPayment}\n\n` +
                           `–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å–æ –º–Ω–æ–π –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è —É—Å–ª–æ–≤–∏–π.`;

            if (tg && tg.HapticFeedback) {
                tg.HapticFeedback.notificationOccurred('success');
            }

            if (tg && tg.sendData) {
                tg.sendData(JSON.stringify({
                    action: 'calculator_request',
                    price: price,
                    advance: advance,
                    term: term,
                    rate: rate,
                    monthlyPayment: monthlyPayment,
                    timestamp: new Date().toISOString()
                }));
                tg.showAlert('‚úÖ –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.');
            } else {
                alert(message);
            }

            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
            closeCalculatorModal();
        });
    }
});

// ========== HAPTIC FEEDBACK ==========

class HapticManager {
    constructor() {
        this.tg = window.Telegram?.WebApp;
    }

    light() {
        if (this.tg?.HapticFeedback) {
            this.tg.HapticFeedback.impactOccurred('light');
        }
    }

    medium() {
        if (this.tg?.HapticFeedback) {
            this.tg.HapticFeedback.impactOccurred('medium');
        }
    }

    heavy() {
        if (this.tg?.HapticFeedback) {
            this.tg.HapticFeedback.impactOccurred('heavy');
        }
    }

    success() {
        if (this.tg?.HapticFeedback) {
            this.tg.HapticFeedback.notificationOccurred('success');
        }
    }

    error() {
        if (this.tg?.HapticFeedback) {
            this.tg.HapticFeedback.notificationOccurred('error');
        }
    }

    warning() {
        if (this.tg?.HapticFeedback) {
            this.tg.HapticFeedback.notificationOccurred('warning');
        }
    }

    selection() {
        if (this.tg?.HapticFeedback) {
            this.tg.HapticFeedback.selectionChanged();
        }
    }
}

const haptic = new HapticManager();

// –î–æ–±–∞–≤–ª—è–µ–º haptic feedback –Ω–∞ –∫–Ω–æ–ø–∫–∏
document.addEventListener('click', (e) => {
    const button = e.target.closest('button, .btn, .product-card, .nav-item');
    if (button) {
        haptic.light();
    }

    const favoriteBtn = e.target.closest('.favorite-btn');
    if (favoriteBtn) {
        haptic.medium();
    }
});

// Haptic feedback –Ω–∞ —Å–ª–∞–π–¥–µ—Ä—ã
document.querySelectorAll('input[type="range"]').forEach(slider => {
    let lastValue = slider.value;
    slider.addEventListener('input', () => {
        if (slider.value !== lastValue) {
            haptic.selection();
            lastValue = slider.value;
        }
    });
});

// ========== PULL TO REFRESH ==========

class PullToRefresh {
    constructor(options = {}) {
        this.element = document.getElementById('pull-to-refresh');
        this.container = document.querySelector('.products-container');
        this.threshold = options.threshold || 80;
        this.onRefresh = options.onRefresh || (() => {});

        this.startY = 0;
        this.currentY = 0;
        this.isDragging = false;
        this.isRefreshing = false;

        this.init();
    }

    init() {
        if (!this.element || !this.container) return;

        // Touch —Å–æ–±—ã—Ç–∏—è
        this.container.addEventListener('touchstart', this.handleTouchStart.bind(this), { passive: true });
        this.container.addEventListener('touchmove', this.handleTouchMove.bind(this), { passive: false });
        this.container.addEventListener('touchend', this.handleTouchEnd.bind(this));
    }

    handleTouchStart(e) {
        if (this.isRefreshing) return;

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–∫—Ä–æ–ª–ª –≤ —Å–∞–º–æ–º –≤–µ—Ä—Ö—É
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        if (scrollTop === 0) {
            this.startY = e.touches[0].clientY;
            this.isDragging = true;
        }
    }

    handleTouchMove(e) {
        if (!this.isDragging || this.isRefreshing) return;

        this.currentY = e.touches[0].clientY;
        const diff = this.currentY - this.startY;

        if (diff > 0 && diff < this.threshold * 2) {
            e.preventDefault();

            const progress = Math.min(diff / this.threshold, 1);
            this.element.style.display = 'flex';
            this.element.style.transform = `translateY(${-100 + (progress * 100)}%)`;

            if (diff >= this.threshold) {
                this.element.classList.add('pulling');
                this.element.querySelector('.ptr-text').textContent = '–û—Ç–ø—É—Å—Ç–∏—Ç–µ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è';
                haptic.light();
            } else {
                this.element.classList.remove('pulling');
                this.element.querySelector('.ptr-text').textContent = '–ü–æ—Ç—è–Ω–∏—Ç–µ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è';
            }
        }
    }

    handleTouchEnd() {
        if (!this.isDragging || this.isRefreshing) return;

        const diff = this.currentY - this.startY;

        if (diff >= this.threshold) {
            this.refresh();
        } else {
            this.reset();
        }

        this.isDragging = false;
    }

    async refresh() {
        this.isRefreshing = true;
        this.element.classList.add('refreshing');
        this.element.classList.remove('pulling');
        this.element.style.transform = 'translateY(0)';
        this.element.querySelector('.ptr-text').textContent = '–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ...';

        haptic.success();

        try {
            await this.onRefresh();
        } catch (error) {
            console.error('Refresh error:', error);
            haptic.error();
        }

        setTimeout(() => {
            this.reset();
            this.isRefreshing = false;
        }, 1000);
    }

    reset() {
        this.element.classList.remove('pulling', 'refreshing');
        this.element.style.transform = 'translateY(-100%)';

        setTimeout(() => {
            this.element.style.display = 'none';
            this.element.querySelector('.ptr-text').textContent = '–ü–æ—Ç—è–Ω–∏—Ç–µ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è';
        }, 300);
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Pull to Refresh
const pullToRefresh = new PullToRefresh({
    onRefresh: async () => {
        // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
        console.log('üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞...');
        await new Promise(resolve => setTimeout(resolve, 1500));

        // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–∫—É—â–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã –∑–∞–Ω–æ–≤–æ
        if (typeof applyFilters === 'function') {
            applyFilters();
        }

        console.log('‚úÖ –ö–∞—Ç–∞–ª–æ–≥ –æ–±–Ω–æ–≤–ª–µ–Ω');
    }
});

// ========== –î–û–õ–ì–ò–ô –¢–ê–ü –ò –ö–û–ù–¢–ï–ö–°–¢–ù–û–ï –ú–ï–ù–Æ ==========

class ContextMenuManager {
    constructor() {
        this.menu = document.getElementById('context-menu');
        this.longPressTimer = null;
        this.longPressDuration = 500; // –º—Å
        this.currentProductId = null;

        this.init();
    }

    init() {
        if (!this.menu) return;

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–ª–≥–æ–≥–æ —Ç–∞–ø–∞ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö
        document.addEventListener('touchstart', this.handleTouchStart.bind(this), { passive: true });
        document.addEventListener('touchend', this.handleTouchEnd.bind(this));
        document.addEventListener('touchmove', this.handleTouchMove.bind(this));

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
        document.addEventListener('click', (e) => {
            if (!this.menu.contains(e.target)) {
                this.hide();
            }
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π –º–µ–Ω—é
        this.menu.querySelectorAll('.context-menu-item').forEach(item => {
            item.addEventListener('click', (e) => {
                const action = item.dataset.action;
                this.handleAction(action);
                haptic.medium();
            });
        });
    }

    handleTouchStart(e) {
        const card = e.target.closest('.product-card');
        if (!card) return;

        this.currentProductId = card.dataset.productId;

        this.longPressTimer = setTimeout(() => {
            this.show(e.touches[0].clientX, e.touches[0].clientY);
            haptic.heavy();
        }, this.longPressDuration);
    }

    handleTouchEnd(e) {
        if (this.longPressTimer) {
            clearTimeout(this.longPressTimer);
        }
    }

    handleTouchMove(e) {
        if (this.longPressTimer) {
            clearTimeout(this.longPressTimer);
        }
    }

    show(x, y) {
        if (!this.menu || !this.currentProductId) return;

        this.menu.style.display = 'block';

        // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
        const menuRect = this.menu.getBoundingClientRect();
        const windowWidth = window.innerWidth;
        const windowHeight = window.innerHeight;

        let left = x;
        let top = y;

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—ã—Ö–æ–¥ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã —ç–∫—Ä–∞–Ω–∞
        if (left + menuRect.width > windowWidth) {
            left = windowWidth - menuRect.width - 10;
        }
        if (top + menuRect.height > windowHeight) {
            top = windowHeight - menuRect.height - 10;
        }

        this.menu.style.left = `${left}px`;
        this.menu.style.top = `${top}px`;
    }

    hide() {
        if (this.menu) {
            this.menu.style.display = 'none';
        }
    }

    handleAction(action) {
        const productId = this.currentProductId;

        switch(action) {
            case 'favorite':
                if (typeof toggleFavorite === 'function') {
                    toggleFavorite(productId);
                }
                break;

            case 'compare':
                alert('–§—É–Ω–∫—Ü–∏—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏');
                break;

            case 'share':
                this.shareProduct(productId);
                break;

            case 'request':
                const product = state.products.find(p => p.id == productId);
                if (product && typeof showProductDetails === 'function') {
                    showProductDetails(product);
                }
                break;
        }

        this.hide();
    }

    shareProduct(productId) {
        const product = state.products.find(p => p.id == productId);
        if (!product) return;

        const shareText = `${product.title}\n${product.year} –≥.\n–¶–µ–Ω–∞: ${formatPrice(product.price)}\n\n–ö–§–õ –õ–∏–∑–∏–Ω–≥ - –ª–∏–∑–∏–Ω–≥ –∫–æ–Ω—Ñ–∏—Å–∫–∞—Ç–∞`;

        if (navigator.share) {
            navigator.share({
                title: product.title,
                text: shareText,
                url: window.location.href
            }).catch(err => console.log('Share error:', err));
        } else if (tg && tg.openTelegramLink) {
            const encodedText = encodeURIComponent(shareText);
            tg.openTelegramLink(`https://t.me/share/url?url=${window.location.href}&text=${encodedText}`);
        } else {
            // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
            if (navigator.clipboard) {
                navigator.clipboard.writeText(shareText).then(() => {
                    alert('‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞');
                });
            }
        }

        haptic.success();
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é
const contextMenu = new ContextMenuManager();

// ========== –£–õ–£–ß–®–ï–ù–ù–´–ô –ü–û–ò–°–ö –° –°–ò–ù–û–ù–ò–ú–ê–ú–ò ==========

// –°–ª–æ–≤–∞—Ä—å —Å–∏–Ω–æ–Ω–∏–º–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞
const searchSynonyms = {
    '—ç–∫—Å–∫–∞–≤–∞—Ç–æ—Ä': ['excavator', '–∫–æ–ø–∞—Ç–µ–ª—å', '–±—É–ª—å–¥–æ–∑–µ—Ä', '–∑–µ–º–ª–µ—Ä–æ–π–Ω–∞—è'],
    '–ø–æ–≥—Ä—É–∑—á–∏–∫': ['loader', '—Ñ—Ä–æ–Ω—Ç–∞–ª—å–Ω—ã–π', '—Ç–µ–ª–µ—Å–∫–æ–ø–∏—á–µ—Å–∫–∏–π'],
    '–±—É–ª—å–¥–æ–∑–µ—Ä': ['bulldozer', '–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫'],
    '–∫—Ä–∞–Ω': ['crane', '–ø–æ–¥—ä–µ–º–Ω—ã–π', '–∞–≤—Ç–æ–∫—Ä–∞–Ω'],
    '–≥—Ä—É–∑–æ–≤–∏–∫': ['truck', '—Ñ—É—Ä–∞', '—Ç—è–≥–∞—á', '—Å–∞–º–æ—Å–≤–∞–ª'],
    '–∫–∞–º–∞–∑': ['kamaz', '–≥—Ä—É–∑–æ–≤–æ–π'],
    '—Ç—Ä–∞–∫—Ç–æ—Ä': ['tractor', '—Å–µ–ª—å—Ö–æ–∑'],
    '–∞–≤—Ç–æ–º–æ–±–∏–ª—å': ['car', '–º–∞—à–∏–Ω–∞', '–ª–µ–≥–∫–æ–≤–æ–π'],
    '–±—É—Ä–æ–≤–∞—è': ['drill', '—É—Å—Ç–∞–Ω–æ–≤–∫–∞', '–±—É—Ä–µ–Ω–∏–µ'],
    '–¥—Ä–æ–±–∏–ª–∫–∞': ['crusher', '–∏–∑–º–µ–ª—å—á–∏—Ç–µ–ª—å']
};

// –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ —Å–∏–Ω–æ–Ω–∏–º–∞–º–∏
function expandSearchQuery(query) {
    const lowerQuery = query.toLowerCase();
    const words = lowerQuery.split(' ');
    const expandedWords = new Set(words);

    words.forEach(word => {
        for (const [key, synonyms] of Object.entries(searchSynonyms)) {
            if (key.includes(word) || word.includes(key)) {
                synonyms.forEach(syn => expandedWords.add(syn));
            }
            synonyms.forEach(syn => {
                if (syn.includes(word) || word.includes(syn)) {
                    expandedWords.add(key);
                    synonyms.forEach(s => expandedWords.add(s));
                }
            });
        }
    });

    return Array.from(expandedWords);
}

console.log('‚úÖ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ª–∏–∑–∏–Ω–≥–∞, Haptic Feedback, Pull-to-Refresh –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –∑–∞–≥—Ä—É–∂–µ–Ω—ã!');
    </script>
</body>
</html>
